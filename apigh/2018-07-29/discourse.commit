{
  "sha": "fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODpmYzNiOTA0ZTFmNjRiN2Q1M2Q3YzhmMTFlZGQ4ZWY0MzQ2MTJmNDZl",
  "commit": {
    "author": {
      "name": "Arpit Jalan",
      "email": "arpit@techapj.com",
      "date": "2018-07-29T08:56:24Z"
    },
    "committer": {
      "name": "Arpit Jalan",
      "email": "arpit@techapj.com",
      "date": "2018-07-29T09:31:33Z"
    },
    "message": "remove \"track external right clicks\" feature",
    "tree": {
      "sha": "6f03280901162cd346c07fd15907a719aaec566d",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/6f03280901162cd346c07fd15907a719aaec566d"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
    "comment_count": 1,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
  "html_url": "https://github.com/discourse/discourse/commit/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/comments",
  "author": {
    "login": "techAPJ",
    "id": 5732281,
    "node_id": "MDQ6VXNlcjU3MzIyODE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/5732281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/techAPJ",
    "html_url": "https://github.com/techAPJ",
    "followers_url": "https://api.github.com/users/techAPJ/followers",
    "following_url": "https://api.github.com/users/techAPJ/following{/other_user}",
    "gists_url": "https://api.github.com/users/techAPJ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/techAPJ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/techAPJ/subscriptions",
    "organizations_url": "https://api.github.com/users/techAPJ/orgs",
    "repos_url": "https://api.github.com/users/techAPJ/repos",
    "events_url": "https://api.github.com/users/techAPJ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/techAPJ/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "techAPJ",
    "id": 5732281,
    "node_id": "MDQ6VXNlcjU3MzIyODE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/5732281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/techAPJ",
    "html_url": "https://github.com/techAPJ",
    "followers_url": "https://api.github.com/users/techAPJ/followers",
    "following_url": "https://api.github.com/users/techAPJ/following{/other_user}",
    "gists_url": "https://api.github.com/users/techAPJ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/techAPJ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/techAPJ/subscriptions",
    "organizations_url": "https://api.github.com/users/techAPJ/orgs",
    "repos_url": "https://api.github.com/users/techAPJ/repos",
    "events_url": "https://api.github.com/users/techAPJ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/techAPJ/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3dbaaf0d74f556e536bdc0bfb9b14956c0df8fc9",
      "url": "https://api.github.com/repos/discourse/discourse/commits/3dbaaf0d74f556e536bdc0bfb9b14956c0df8fc9",
      "html_url": "https://github.com/discourse/discourse/commit/3dbaaf0d74f556e536bdc0bfb9b14956c0df8fc9"
    }
  ],
  "stats": {
    "total": 139,
    "additions": 9,
    "deletions": 130
  },
  "files": [
    {
      "sha": "96ea6f2f9cfbeee6906677b5516894cbf6608b42",
      "filename": "app/assets/javascripts/discourse/lib/click-track.js.es6",
      "status": "modified",
      "additions": 0,
      "deletions": 9,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/app/assets/javascripts/discourse/lib/click-track.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/app/assets/javascripts/discourse/lib/click-track.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/lib/click-track.js.es6?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -83,15 +83,6 @@ export default {\n       }\n     }\n \n-    // If they right clicked, change the destination href\n-    if (e.which === 3) {\n-      $link.attr(\n-        \"href\",\n-        Discourse.SiteSettings.track_external_right_clicks ? destUrl : href\n-      );\n-      return true;\n-    }\n-\n     // if they want to open in a new tab, do an AJAX request\n     if (tracking && wantsNewWindow(e)) {\n       ajax(\"/clicks/track\", {"
    },
    {
      "sha": "2677e0f16670d1194bcadba607fe724739d6e351",
      "filename": "config/locales/server.en.yml",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/config/locales/server.en.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/config/locales/server.en.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/locales/server.en.yml?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -1227,7 +1227,6 @@ en:\n     post_menu: \"Determine which items appear on the post menu, and in what order. Example like|edit|flag|delete|share|bookmark|reply\"\n     post_menu_hidden_items: \"The menu items to hide by default in the post menu unless an expansion ellipsis is clicked on.\"\n     share_links: \"Determine which items appear on the share dialog, and in what order.\"\n-    track_external_right_clicks: \"Track external links that are right clicked (eg: open in new tab) disabled by default because it rewrites URLs\"\n     site_contact_username: \"A valid staff username to send all automated messages from. If left blank the default System account will be used.\"\n     send_welcome_message: \"Send all new users a welcome message with a quick start guide.\"\n     send_tl1_welcome_message: \"Send new trust level 1 users a welcome message.\""
    },
    {
      "sha": "a6a2a2634629e579b2240b9469155c6386cf90f6",
      "filename": "config/site_settings.yml",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/config/site_settings.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/config/site_settings.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/site_settings.yml?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -98,9 +98,6 @@ basic:\n     default: 365\n     min: 7\n     max: 10000\n-  track_external_right_clicks:\n-    client: true\n-    default: false\n   ga_universal_tracking_code:\n     client: true\n     default: ''"
    },
    {
      "sha": "424804b477ad3290d371b4f982b33dff978aee16",
      "filename": "db/migrate/20180729092926_remove_track_external_right_clicks.rb",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/db/migrate/20180729092926_remove_track_external_right_clicks.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/db/migrate/20180729092926_remove_track_external_right_clicks.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/db/migrate/20180729092926_remove_track_external_right_clicks.rb?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -0,0 +1,9 @@\n+class RemoveTrackExternalRightClicks < ActiveRecord::Migration[5.2]\n+  def up\n+    execute \"DELETE FROM site_settings WHERE name = 'track_external_right_clicks'\"\n+  end\n+\n+  def down\n+    raise ActiveRecord::IrreversibleMigration\n+  end\n+end"
    },
    {
      "sha": "4c8775b5f044dcba13f07a7b6a880d238429ffd7",
      "filename": "test/javascripts/helpers/site-settings.js",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/helpers/site-settings.js",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/helpers/site-settings.js",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/helpers/site-settings.js?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -7,7 +7,6 @@ Discourse.SiteSettingsOriginal = {\n   \"favicon_url\":\"//meta.discourse.org/uploads/default/2499/79d53726406d87af.ico\",\n   \"allow_user_locale\":false,\n   \"suggested_topics\":7,\n-  \"track_external_right_clicks\":false,\n   \"ga_universal_tracking_code\":\"\",\n   \"ga_universal_domain_name\":\"auto\",\n   \"top_menu\":\"latest|new|unread|categories|top\","
    },
    {
      "sha": "9ad93bb66ac988520e98b05e898d5600e59fde6a",
      "filename": "test/javascripts/lib/click-track-edit-history-test.js.es6",
      "status": "modified",
      "additions": 0,
      "deletions": 35,
      "changes": 35,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-edit-history-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-edit-history-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/lib/click-track-edit-history-test.js.es6?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -103,41 +103,6 @@ asyncTestDiscourse(\"restores the href after a while\", function(assert) {\n   }, 75);\n });\n \n-var trackRightClick = function(target) {\n-  var clickEvent = generateClickEventOn(target);\n-  clickEvent.which = 3;\n-  return track(clickEvent);\n-};\n-\n-QUnit.test(\"right clicks change the href\", assert => {\n-  assert.ok(trackRightClick(\"a\"));\n-  assert.equal(\n-    fixture(\"a\")\n-      .first()\n-      .prop(\"href\"),\n-    \"http://www.google.com/\"\n-  );\n-});\n-\n-QUnit.test(\"right clicks are tracked\", assert => {\n-  Discourse.SiteSettings.track_external_right_clicks = true;\n-  trackRightClick(\"a\");\n-  assert.equal(\n-    fixture(\"a\")\n-      .first()\n-      .attr(\"href\"),\n-    \"/clicks/track?url=http%3A%2F%2Fwww.google.com&post_id=42&topic_id=1337\"\n-  );\n-});\n-\n-QUnit.test(\"preventDefault is not called for right clicks\", assert => {\n-  var clickEvent = generateClickEventOn(\"a\");\n-  clickEvent.which = 3;\n-  sandbox.stub(clickEvent, \"preventDefault\");\n-  assert.ok(track(clickEvent));\n-  assert.ok(!clickEvent.preventDefault.calledOnce);\n-});\n-\n var testOpenInANewTab = function(description, clickEventModifier) {\n   test(description, function(assert) {\n     var clickEvent = generateClickEventOn(\"a\");"
    },
    {
      "sha": "0b5eafe5eff133d8a1f08ef1656bd49be804994e",
      "filename": "test/javascripts/lib/click-track-profile-page-test.js.es6",
      "status": "modified",
      "additions": 0,
      "deletions": 46,
      "changes": 46,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-profile-page-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-profile-page-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/lib/click-track-profile-page-test.js.es6?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -97,52 +97,6 @@ asyncTestDiscourse(\"restores the href after a while\", function(assert) {\n   }, 75);\n });\n \n-var trackRightClick = function(target) {\n-  var clickEvent = generateClickEventOn(target);\n-  clickEvent.which = 3;\n-  return track(clickEvent);\n-};\n-\n-QUnit.test(\"right clicks change the href\", assert => {\n-  assert.ok(trackRightClick(\"a\"));\n-  assert.equal(\n-    fixture(\"a\")\n-      .first()\n-      .prop(\"href\"),\n-    \"http://www.google.com/\"\n-  );\n-});\n-\n-QUnit.test(\"right clicks are tracked\", assert => {\n-  Discourse.SiteSettings.track_external_right_clicks = true;\n-  trackRightClick(\"a\");\n-  assert.equal(\n-    fixture(\".first a\")\n-      .first()\n-      .attr(\"href\"),\n-    \"/clicks/track?url=http%3A%2F%2Fwww.google.com&post_id=42&topic_id=1337\"\n-  );\n-});\n-\n-QUnit.test(\"right clicks are tracked for second excerpt\", assert => {\n-  Discourse.SiteSettings.track_external_right_clicks = true;\n-  trackRightClick(\".second a\");\n-  assert.equal(\n-    fixture(\".second a\")\n-      .first()\n-      .attr(\"href\"),\n-    \"/clicks/track?url=http%3A%2F%2Fwww.google.com&post_id=24&topic_id=7331\"\n-  );\n-});\n-\n-QUnit.test(\"preventDefault is not called for right clicks\", assert => {\n-  var clickEvent = generateClickEventOn(\"a\");\n-  clickEvent.which = 3;\n-  sandbox.stub(clickEvent, \"preventDefault\");\n-  assert.ok(track(clickEvent));\n-  assert.ok(!clickEvent.preventDefault.calledOnce);\n-});\n-\n var testOpenInANewTab = function(description, clickEventModifier) {\n   test(description, function(assert) {\n     var clickEvent = generateClickEventOn(\"a\");"
    },
    {
      "sha": "6b2149b983043de22b211bd8e62192f67981e1b7",
      "filename": "test/javascripts/lib/click-track-test.js.es6",
      "status": "modified",
      "additions": 0,
      "deletions": 35,
      "changes": 35,
      "blob_url": "https://github.com/discourse/discourse/blob/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/fc3b904e1f64b7d53d7c8f11edd8ef434612f46e/test/javascripts/lib/click-track-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/lib/click-track-test.js.es6?ref=fc3b904e1f64b7d53d7c8f11edd8ef434612f46e",
      "patch": "@@ -132,41 +132,6 @@ QUnit.test(\"updates badge counts correctly\", function(assert) {\n   badgeClickCount(assert, \"with-badge\", 2);\n });\n \n-var trackRightClick = function() {\n-  var clickEvent = generateClickEventOn(\"a\");\n-  clickEvent.which = 3;\n-  return track(clickEvent);\n-};\n-\n-QUnit.test(\"right clicks change the href\", function(assert) {\n-  assert.ok(trackRightClick());\n-  assert.equal(\n-    fixture(\"a\")\n-      .first()\n-      .prop(\"href\"),\n-    \"http://www.google.com/\"\n-  );\n-});\n-\n-QUnit.test(\"right clicks are tracked\", function(assert) {\n-  Discourse.SiteSettings.track_external_right_clicks = true;\n-  trackRightClick();\n-  assert.equal(\n-    fixture(\"a\")\n-      .first()\n-      .attr(\"href\"),\n-    \"/clicks/track?url=http%3A%2F%2Fwww.google.com&post_id=42&topic_id=1337\"\n-  );\n-});\n-\n-QUnit.test(\"preventDefault is not called for right clicks\", function(assert) {\n-  var clickEvent = generateClickEventOn(\"a\");\n-  clickEvent.which = 3;\n-  sandbox.stub(clickEvent, \"preventDefault\");\n-  assert.ok(track(clickEvent));\n-  assert.ok(!clickEvent.preventDefault.calledOnce);\n-});\n-\n var testOpenInANewTab = function(description, clickEventModifier) {\n   test(description, function(assert) {\n     var clickEvent = generateClickEventOn(\"a\");"
    }
  ]
}
