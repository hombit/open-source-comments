{
  "sha": "75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
  "node_id": "MDY6Q29tbWl0MTA1NjMzMjI6NzVlZWY4ZmE0MWUzNmM0NWZkNTNhNDdjZDZiOTBkZWMzZGU1ZmY3Ng==",
  "commit": {
    "author": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2018-08-08T05:10:07Z"
    },
    "committer": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2018-08-08T05:10:07Z"
    },
    "message": "Better remember-forum-scroll fix.",
    "tree": {
      "sha": "eb3f2a131cfdbe30ac6734b8c739224dc377f051",
      "url": "https://api.github.com/repos/debiki/talkyard/git/trees/eb3f2a131cfdbe30ac6734b8c739224dc377f051"
    },
    "url": "https://api.github.com/repos/debiki/talkyard/git/commits/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/debiki/talkyard/commits/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
  "html_url": "https://github.com/debiki/talkyard/commit/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
  "comments_url": "https://api.github.com/repos/debiki/talkyard/commits/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76/comments",
  "author": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "82530343a7e32bc4d9a59dba1101663eda803653",
      "url": "https://api.github.com/repos/debiki/talkyard/commits/82530343a7e32bc4d9a59dba1101663eda803653",
      "html_url": "https://github.com/debiki/talkyard/commit/82530343a7e32bc4d9a59dba1101663eda803653"
    }
  ],
  "stats": {
    "total": 29,
    "additions": 16,
    "deletions": 13
  },
  "files": [
    {
      "sha": "b49bfa77014b95442d102b2069efe9fd6a845686",
      "filename": "client/app/forum/forum.ts",
      "status": "modified",
      "additions": 10,
      "deletions": 7,
      "changes": 17,
      "blob_url": "https://github.com/debiki/talkyard/blob/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76/client/app/forum/forum.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76/client/app/forum/forum.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app/forum/forum.ts?ref=75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
      "patch": "@@ -65,13 +65,16 @@ let lastScrollYByPath = {};\n let scrollToWhenCommentsLoaded;\n \n function scrollToLastPositionSoon() {\n-  setTimeout(function() {\n-    $byId('esPageColumn').scrollTop = scrollToWhenCommentsLoaded || 0;\n-    scrollToWhenCommentsLoaded = 0;\n-  },\n-    // If doesn't wait some millis before resetting scroll, then, maybe 1 in 5 times, the browser\n-    // somehow scrolls to scrollTop = 0 = page top (it does even *before* a 0ms timeout). TyT5WG7AB02\n-    50);\n+  const resetTo = scrollToWhenCommentsLoaded || 0;\n+  scrollToWhenCommentsLoaded = 0;\n+  function resetScroll() {\n+    $byId('esPageColumn').scrollTop = resetTo;\n+  }\n+  // If doesn't wait some millis before resetting scroll, then, maybe 1 in 5 times, the browser\n+  // somehow scrolls to scrollTop = 0 = page top (it does even *before* a 0ms timeout). TyT5WG7AB02\n+  // The browser still does â€” so reset twice: Once soon, looks better. And once more just in case.\n+  setTimeout(resetScroll, 40);\n+  setTimeout(resetScroll, 160);\n }\n \n "
    },
    {
      "sha": "5fb4508d13e963be586f21751c7acfd39a60af13",
      "filename": "tests/e2e/specs/embedded-comments-scroll.test.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/debiki/talkyard/blob/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76/tests/e2e/specs/embedded-comments-scroll.test.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/75eef8fa41e36c45fd53a47cd6b90dec3de5ff76/tests/e2e/specs/embedded-comments-scroll.test.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/tests/e2e/specs/embedded-comments-scroll.test.ts?ref=75eef8fa41e36c45fd53a47cd6b90dec3de5ff76",
      "patch": "@@ -83,25 +83,25 @@ ${ extraHeight > 500 ? \"<br><br><i>SCROLL DOWN\\n:\\n:\\n:</i>\" : \"\"}\n </html>`;\n   }\n \n+  // TESTS_MISSING  emb cmts scroll\n+\n   it(\"Maria opens a tall embedding page, does *not* scroll to comment-1\", () => {\n-    mariasBrowser.go(embeddingOrigin + '/' + pageTallSlug + '#comment-1');\n+    mariasBrowser.go(embeddingOrigin + '/' + pageTallSlug);\n   });\n \n   it(\"... the Log In button is not visible on screen\", () => {\n-    // TESTS_MISSING\n   });\n \n   it(\"Maria opens tall embedding page, auto scrolls to comment-1  TyT2K4DHR49-05\", () => {\n-    mariasBrowser.go(embeddingOrigin + '/' + pageTallSlug + '#comment-1');\n+    //mariasBrowser.go(embeddingOrigin + '/' + pageTallSlug + '#comment-1');\n   });\n \n   it(\"... now the Log In button is visible directly\", () => {\n \n   });\n \n   it(\"Maria clicks Log In  TyT2K4DHR49-02\", () => {\n-    mariasBrowser.switchToEmbeddedCommentsIrame();\n-    //mariasBrowser.topic.clickReplyToEmbeddingBlogPost();\n+    //mariasBrowser.switchToEmbeddedCommentsIrame();\n     //mariasBrowser.loginDialog.loginWithPasswordInPopup(maria);\n   });\n \n@@ -112,7 +112,7 @@ ${ extraHeight > 500 ? \"<br><br><i>SCROLL DOWN\\n:\\n:\\n:</i>\" : \"\"}\n   }\n \n   it(\"... and reads comments 1 and 2 (posts 2 and 3)\", () => {\n-    markCommentsRead();\n+    //markCommentsRead();\n   });\n \n   it(\"She reloads the page\", () => {"
    }
  ]
}
