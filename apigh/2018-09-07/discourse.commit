{
  "sha": "2ad882113e6f0d32155b84788f352e9adc7373bc",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODoyYWQ4ODIxMTNlNmYwZDMyMTU1Yjg0Nzg4ZjM1MmU5YWRjNzM3M2Jj",
  "commit": {
    "author": {
      "name": "Joffrey JAFFEUX",
      "email": "j.jaffeux@gmail.com",
      "date": "2018-09-07T14:49:44Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2018-09-07T14:49:44Z"
    },
    "message": "FIX: corrects top-referred and trending-search dates (#6372)",
    "tree": {
      "sha": "77764ba9c31930ff4a82c22049e4ac7e05e64e68",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/77764ba9c31930ff4a82c22049e4ac7e05e64e68"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/2ad882113e6f0d32155b84788f352e9adc7373bc",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbkpAICRBK7hj4Ov3rIwAAdHIIAADyW68AI/fID1bEkKP1FQyz\nHRUMNbeckqJbN9biYdlk5PUIoewW54GDfalS5BfC4lJ7YRsIpImbqMaJyl2gUSZ1\n+n+t1RjO3qXiqGmqtFan8gKhSIjlWhHz56Ce/zlFgO6HlABLWVt+BONnAarvLYiQ\n4E9rJcit+L4q62woZgrnvuyGTD6RoIi7PMKNXIDDDTuFfBHB1wxuQ99Pj2V2I2A7\nF8diq+wKYyjzy/BWLlUmZLLQDPTYIsmK1CuE4F2SXrPXPx8NnIY/Ynj+WgjQtbh+\n6UKDWP96v+UEJ5Rotsdwz59YaB6G9DbRSwici8ToeB6k1XyYoEcIeGn+ttpnmsM=\n=Sma+\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 77764ba9c31930ff4a82c22049e4ac7e05e64e68\nparent 9e77fd8fc3707a9fe6285b11aaf0dc1b14080cf0\nauthor Joffrey JAFFEUX <j.jaffeux@gmail.com> 1536331784 +0200\ncommitter GitHub <noreply@github.com> 1536331784 +0200\n\nFIX: corrects top-referred and trending-search dates (#6372)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/2ad882113e6f0d32155b84788f352e9adc7373bc",
  "html_url": "https://github.com/discourse/discourse/commit/2ad882113e6f0d32155b84788f352e9adc7373bc",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/2ad882113e6f0d32155b84788f352e9adc7373bc/comments",
  "author": {
    "login": "jjaffeux",
    "id": 339945,
    "node_id": "MDQ6VXNlcjMzOTk0NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/339945?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjaffeux",
    "html_url": "https://github.com/jjaffeux",
    "followers_url": "https://api.github.com/users/jjaffeux/followers",
    "following_url": "https://api.github.com/users/jjaffeux/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjaffeux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjaffeux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjaffeux/subscriptions",
    "organizations_url": "https://api.github.com/users/jjaffeux/orgs",
    "repos_url": "https://api.github.com/users/jjaffeux/repos",
    "events_url": "https://api.github.com/users/jjaffeux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjaffeux/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9e77fd8fc3707a9fe6285b11aaf0dc1b14080cf0",
      "url": "https://api.github.com/repos/discourse/discourse/commits/9e77fd8fc3707a9fe6285b11aaf0dc1b14080cf0",
      "html_url": "https://github.com/discourse/discourse/commit/9e77fd8fc3707a9fe6285b11aaf0dc1b14080cf0"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 33,
    "deletions": 7
  },
  "files": [
    {
      "sha": "687f66333eaa09f4b301ac910cc3f6f4e9d91003",
      "filename": "app/assets/javascripts/admin/controllers/admin-dashboard-next-general.js.es6",
      "status": "modified",
      "additions": 30,
      "deletions": 6,
      "changes": 36,
      "blob_url": "https://github.com/discourse/discourse/blob/2ad882113e6f0d32155b84788f352e9adc7373bc/app/assets/javascripts/admin/controllers/admin-dashboard-next-general.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/2ad882113e6f0d32155b84788f352e9adc7373bc/app/assets/javascripts/admin/controllers/admin-dashboard-next-general.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/controllers/admin-dashboard-next-general.js.es6?ref=2ad882113e6f0d32155b84788f352e9adc7373bc",
      "patch": "@@ -23,11 +23,6 @@ export default Ember.Controller.extend(PeriodComputationMixin, {\n   ),\n   shouldDisplayDurability: Ember.computed.and(\"diskSpace\"),\n \n-  @computed\n-  topReferredTopicsTopions() {\n-    return { table: { total: false, limit: 8 } };\n-  },\n-\n   @computed\n   activityMetrics() {\n     return [\n@@ -48,9 +43,38 @@ export default Ember.Controller.extend(PeriodComputationMixin, {\n     };\n   },\n \n+  @computed\n+  topReferredTopicsOptions() {\n+    return {\n+      table: { total: false, limit: 8 }\n+    };\n+  },\n+\n+  @computed\n+  topReferredTopicsFilters() {\n+    return {\n+      startDate: moment()\n+        .subtract(2, \"days\")\n+        .startOf(\"day\"),\n+      endDate: this.get(\"today\")\n+    };\n+  },\n+\n+  @computed\n+  trendingSearchFilters() {\n+    return {\n+      startDate: moment()\n+        .subtract(2, \"days\")\n+        .startOf(\"day\"),\n+      endDate: this.get(\"today\")\n+    };\n+  },\n+\n   @computed\n   trendingSearchOptions() {\n-    return { table: { total: false, limit: 8 } };\n+    return {\n+      table: { total: false, limit: 8 }\n+    };\n   },\n \n   usersByTypeReport: staticReport(\"users_by_type\"),"
    },
    {
      "sha": "98ca3f03048aae97bd1a5bd4dce4dbe3a6e4e83b",
      "filename": "app/assets/javascripts/admin/templates/dashboard_next_general.hbs",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/2ad882113e6f0d32155b84788f352e9adc7373bc/app/assets/javascripts/admin/templates/dashboard_next_general.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/2ad882113e6f0d32155b84788f352e9adc7373bc/app/assets/javascripts/admin/templates/dashboard_next_general.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/templates/dashboard_next_general.hbs?ref=2ad882113e6f0d32155b84788f352e9adc7373bc",
      "patch": "@@ -154,12 +154,14 @@\n \n     <div class=\"section-column\">\n       {{admin-report\n+        filters=topReferredTopicsFilters\n         dataSourceName=\"top_referred_topics\"\n-        reportOptions=topReferredTopicsTopions}}\n+        reportOptions=topReferredTopicsOptions}}\n \n       {{admin-report\n         dataSourceName=\"trending_search\"\n         reportOptions=trendingSearchOptions\n+        filters=trendingSearchFilters\n         isEnabled=logSearchQueriesEnabled\n         disabledLabel=\"admin.dashboard.reports.trending_search.disabled\"}}\n       {{{i18n \"admin.dashboard.reports.trending_search.more\"}}}"
    }
  ]
}
