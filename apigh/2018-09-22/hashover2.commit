{
  "sha": "01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
  "node_id": "MDY6Q29tbWl0MTgwOTYzMjI6MDFiOWY2ZWNmYTRkYWNmZmE4YmJlZmE0NTJmYjU5MDhmYzlmZGRhNw==",
  "commit": {
    "author": {
      "name": "jacobwb",
      "email": "jacobbarkdull@gmail.com",
      "date": "2018-09-12T13:25:40Z"
    },
    "committer": {
      "name": "jacobwb",
      "email": "jacobbarkdull@gmail.com",
      "date": "2018-09-12T13:25:40Z"
    },
    "message": "Multiple threads per page now supported!\n\nYou may now place a comment thread under every article in a list of articles, or add comments for each article/page on websites with endless scrolling or other dynamically generated content.\n\nTo use this new feature, you must instantiate HashOver manually. Using the `?nodefault` URL query in the HashOver script tag is also recommended for complete control.\n\nHere's how it works...\n\n1. Use a script tag like this:\n\n   <script src=\"/hashover/loader.php?nodefault\"></script>\n\n2. Create an element you want comments to appear in:\n\n   <div id=\"comments\"></div>\n\n3. Instantiate HashOver manually, with an ID:\n\n   var hashover = new HashOver ('comments', {\n       url: 'https://example.com/cool/article.html',\n       title: 'Cool Article Title'\n   });\n\nTo get another thread on the page, repeat steps 2 and 3.\n\nLike this...\n\n2. Create another element you want comments to appear in:\n\n   <div id=\"comments-2\"></div>\n\n3. Instantiate HashOver manually, with another ID:\n\n   var hashover2 = new HashOver ('comments-2', {\n       url: 'https://example.com/yet/another/cool/article.html',\n       title: '(Yet) Another Cool Article Title'\n   });\n\nRepeat this process as many times as necessary. You can also easily automate this process, allowing for integration with Wordpress and other content management systems.",
    "tree": {
      "sha": "8fd0e0f0eb36e316ec08de106175a8b25db400d0",
      "url": "https://api.github.com/repos/jacobwb/hashover-next/git/trees/8fd0e0f0eb36e316ec08de106175a8b25db400d0"
    },
    "url": "https://api.github.com/repos/jacobwb/hashover-next/git/commits/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/jacobwb/hashover-next/commits/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
  "html_url": "https://github.com/jacobwb/hashover-next/commit/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
  "comments_url": "https://api.github.com/repos/jacobwb/hashover-next/commits/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/comments",
  "author": {
    "login": "jacobwb",
    "id": 4677622,
    "node_id": "MDQ6VXNlcjQ2Nzc2MjI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4677622?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacobwb",
    "html_url": "https://github.com/jacobwb",
    "followers_url": "https://api.github.com/users/jacobwb/followers",
    "following_url": "https://api.github.com/users/jacobwb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacobwb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacobwb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacobwb/subscriptions",
    "organizations_url": "https://api.github.com/users/jacobwb/orgs",
    "repos_url": "https://api.github.com/users/jacobwb/repos",
    "events_url": "https://api.github.com/users/jacobwb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacobwb/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jacobwb",
    "id": 4677622,
    "node_id": "MDQ6VXNlcjQ2Nzc2MjI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4677622?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacobwb",
    "html_url": "https://github.com/jacobwb",
    "followers_url": "https://api.github.com/users/jacobwb/followers",
    "following_url": "https://api.github.com/users/jacobwb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacobwb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacobwb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacobwb/subscriptions",
    "organizations_url": "https://api.github.com/users/jacobwb/orgs",
    "repos_url": "https://api.github.com/users/jacobwb/repos",
    "events_url": "https://api.github.com/users/jacobwb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacobwb/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "750e38fca3aa8d7ab88d4cd0f2e7cb45944ebe36",
      "url": "https://api.github.com/repos/jacobwb/hashover-next/commits/750e38fca3aa8d7ab88d4cd0f2e7cb45944ebe36",
      "html_url": "https://github.com/jacobwb/hashover-next/commit/750e38fca3aa8d7ab88d4cd0f2e7cb45944ebe36"
    }
  ],
  "stats": {
    "total": 505,
    "additions": 325,
    "deletions": 180
  },
  "files": [
    {
      "sha": "720576f530a5d95445a3189d65c6ae4d6f2fd029",
      "filename": "hashover/admin/views/moderation/threads.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/admin/views/moderation/threads.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/admin/views/moderation/threads.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/admin/views/moderation/threads.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -48,4 +48,4 @@ options.settings = {\n };\n \n // And instantiate HashOver\n-var hashover = new HashOver (options);\n+var hashover = new HashOver ('hashover', options);"
    },
    {
      "sha": "bbea1c6a5f84cab0c25acf5233ba6eadd48df140",
      "filename": "hashover/api/latest.php",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/api/latest.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/api/latest.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/api/latest.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -63,6 +63,9 @@\n \t// Register HashOver ready state detection method\n \t$javascript->registerFile ('onready.js');\n \n+\t// Register instance prefix method\n+\t$javascript->registerFile ('prefix.js');\n+\n \t// Register element creation method\n \t$javascript->registerFile ('createelement.js');\n "
    },
    {
      "sha": "b80a8d94f7456fd7abd03417b19cbdeb36709e2d",
      "filename": "hashover/backend/classes/commentsui.php",
      "status": "modified",
      "additions": 19,
      "deletions": 22,
      "changes": 41,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/commentsui.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/commentsui.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/classes/commentsui.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -28,7 +28,7 @@ public function __construct (Setup $setup, array $counts)\n \tpublic function commentWrapper ($permalink = '{permalink}')\n \t{\n \t\t$comment_wrapper = new HTMLTag ('div', array (\n-\t\t\t'id' => $permalink,\n+\t\t\t'id' => $this->prefix ($permalink),\n \t\t\t'class' => 'hashover-comment'\n \t\t), false);\n \n@@ -62,7 +62,7 @@ public function nameElement ($element, $permalink = '{permalink}', $name = '{nam\n \t\t\t\t// A hyperlink pointing to the user's input URL\n \t\t\t\t$name_link = new HTMLTag ('a', array (\n \t\t\t\t\t'href' => $href,\n-\t\t\t\t\t'id' => 'hashover-name-' . $permalink,\n+\t\t\t\t\t'id' => $this->prefix ('name-' . $permalink),\n \t\t\t\t\t'rel' => 'noopener noreferrer',\n \t\t\t\t\t'target' => '_blank',\n \t\t\t\t\t'title' => $name,\n@@ -75,7 +75,7 @@ public function nameElement ($element, $permalink = '{permalink}', $name = '{nam\n \t\t\tcase 'span': {\n \t\t\t\t// A plain wrapper element\n \t\t\t\t$name_link = new HTMLTag ('span', array (\n-\t\t\t\t\t'id' => 'hashover-name-' . $permalink,\n+\t\t\t\t\t'id' => $this->prefix ('name-' . $permalink),\n \t\t\t\t\t'innerHTML' => $name\n \t\t\t\t), false);\n \n@@ -106,7 +106,7 @@ protected function queryLink ($href = false, array $queries = array ())\n \t}\n \n \t// Creates \"Top of Thread\" hyperlink element\n-\tpublic function parentThreadLink ($parent = '{parent}', $permalink = '{permalink}', $name = '{name}')\n+\tpublic function parentThreadLink ($href = '{href}', $parent = '{parent}', $permalink = '{permalink}', $name = '{name}')\n \t{\n \t\t// Get locale string\n \t\t$thread_locale = $this->locale->text['thread'];\n@@ -115,9 +115,12 @@ public function parentThreadLink ($parent = '{parent}', $permalink = '{permalink\n \t\t$inner_html = sprintf ($thread_locale, $name);\n \n \t\t// Create hyperlink element\n-\t\t$thread_link = new HTMLTag ('a', array (\n+\t\t$thread_link = $this->queryLink ($href);\n+\n+\t\t// Create hyperlink element\n+\t\t$thread_link->appendAttributes (array (\n \t\t\t'href' => '#' . $parent,\n-\t\t\t'id' => 'hashover-thread-link-' . $permalink,\n+\t\t\t'id' => $this->prefix ('thread-link-' . $permalink),\n \t\t\t'class' => 'hashover-thread-link',\n \t\t\t'title' => $this->locale->text['thread-tip'],\n \t\t\t'innerHTML' => $inner_html\n@@ -146,13 +149,10 @@ public function dateLink ($href = '{href}', $permalink = '{permalink}', $date =\n \t// Creates element to hold a count of likes/dislikes each comment has\n \tpublic function likeCount ($type, $permalink = '{permalink}', $text = '{text}')\n \t{\n-\t\t// CSS class\n-\t\t$class = 'hashover-' . $type;\n-\n \t\t// Create element\n \t\t$count = new HTMLTag ('span', array (\n-\t\t\t'id' => $class . '-' . $permalink,\n-\t\t\t'class' => $class,\n+\t\t\t'id' => $this->prefix ($type . '-' . $permalink),\n+\t\t\t'class' => 'hashover-' . $type,\n \t\t\t'innerHTML' => $text\n \t\t), false);\n \n@@ -165,7 +165,7 @@ public function likeLink ($type, $permalink = '{permalink}', $class = '{class}',\n \t\t// Create hyperlink element\n \t\t$link = new HTMLTag ('a', array (\n \t\t\t'href' => '#',\n-\t\t\t'id' => 'hashover-' . $type . '-' . $permalink,\n+\t\t\t'id' => $this->prefix ($type . '-' . $permalink),\n \t\t\t'class' => $class,\n \t\t\t'title' => $title,\n \t\t\t'innerHTML' => $text\n@@ -188,7 +188,7 @@ public function formLink ($href, $type, $permalink = '{permalink}', $class = '{c\n \n \t\t// Create more attributes\n \t\t$link->createAttributes (array (\n-\t\t\t'id' => $form. '-link-' . $permalink,\n+\t\t\t'id' => $this->prefix ($type. '-link-' . $permalink),\n \t\t\t'class' => 'hashover-comment-' . $type,\n \t\t\t'title' => $this->locale->text[$title_locale]\n \t\t));\n@@ -274,23 +274,20 @@ public function cancelButton ($type, $permalink)\n \t\t// Create hyperlink element\n \t\t$cancel_button = $this->queryLink ($this->setup->filePath);\n \n-\t\t// Cancel button class\n-\t\t$class = 'hashover-' . $type . '-cancel';\n-\n \t\t// \"Cancel\" locale string\n \t\t$cancel_locale = $this->locale->text['cancel'];\n \n \t\t// Add ID attribute with JavaScript variable single quote break out\n \t\tif (!empty ($permalink)) {\n-\t\t\t$cancel_button->createAttribute ('id', $class . '-' . $permalink);\n+\t\t\t$cancel_button->createAttribute ('id', $this->prefix ($type . '-cancel-' . $permalink));\n \t\t}\n \n \t\t// Append href attribute\n \t\t$cancel_button->appendAttribute ('href', '#hashover-' . $permalink, false);\n \n \t\t// Create more attributes\n \t\t$cancel_button->createAttributes (array (\n-\t\t\t'class' => 'hashover-submit ' . $class,\n+\t\t\t'class' => 'hashover-submit hashover-' . $type . '-cancel',\n \t\t\t'title' => $cancel_locale,\n \t\t\t'innerHTML' => $cancel_locale\n \t\t));\n@@ -401,7 +398,7 @@ public function replyForm ($permalink = '{permalink}', $file = '{file}', $subscr\n \n \t\t// Add ID attribute with JavaScript variable single quote break out\n \t\tif (!empty ($permalink)) {\n-\t\t\t$reply_post_button->createAttribute ('id', 'hashover-reply-post-' . $permalink);\n+\t\t\t$reply_post_button->createAttribute ('id', $this->prefix ('reply-post-' . $permalink));\n \t\t}\n \n \t\t// Post reply locale\n@@ -476,7 +473,7 @@ public function editForm ($permalink = '{permalink}', $file = '{file}', $name =\n \n \t\t\t// Create status dropdown menu element\n \t\t\t$edit_status_dropdown = new HTMLTag ('select', array (\n-\t\t\t\t'id' => 'hashover-edit-status-' . $permalink,\n+\t\t\t\t'id' => $this->prefix ('edit-status-' . $permalink),\n \t\t\t\t'name' => 'status',\n \t\t\t\t'size' => '1'\n \t\t\t));\n@@ -586,7 +583,7 @@ public function editForm ($permalink = '{permalink}', $file = '{file}', $name =\n \n \t\t// Add ID attribute with JavaScript variable single quote break out\n \t\tif (!empty ($permalink)) {\n-\t\t\t$save_edit_button->createAttribute ('id', 'hashover-edit-post-' . $permalink);\n+\t\t\t$save_edit_button->createAttribute ('id', $this->prefix ('edit-post-' . $permalink));\n \t\t}\n \n \t\t// Continue with other attributes\n@@ -606,7 +603,7 @@ public function editForm ($permalink = '{permalink}', $file = '{file}', $name =\n \n \t\t// Add ID attribute with JavaScript variable single quote break out\n \t\tif (!empty ($permalink)) {\n-\t\t\t$delete_button->createAttribute ('id', 'hashover-edit-delete-' . $permalink);\n+\t\t\t$delete_button->createAttribute ('id', $this->prefix ('edit-delete-' . $permalink));\n \t\t}\n \n \t\t// Continue with other attributes"
    },
    {
      "sha": "3f4c5e45f5ca169ed89e9db7c34271c0ac0a1673",
      "filename": "hashover/backend/classes/formui.php",
      "status": "modified",
      "additions": 97,
      "deletions": 50,
      "changes": 147,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/formui.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/formui.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/classes/formui.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -70,19 +70,47 @@ public function __construct (Setup $setup, array $counts)\n \t\t$this->defaultLoginInputs = $this->loginInputs ();\n \t}\n \n+\t// Returns pseudo-namespace prefixed string\n+\tpublic function prefix ($id = '', $template = true)\n+\t{\n+\t\t// Return template prefix in JavaScript mode\n+\t\tif ($template === true and $this->mode !== 'php') {\n+\t\t\treturn '{hashover}-' . $id;\n+\t\t}\n+\n+\t\t// Initial prefix\n+\t\t$prefix = 'hashover';\n+\n+\t\t// Return simple prefix if we're on first instance\n+\t\tif ($this->setup->instanceNumber > 1) {\n+\t\t\t$prefix .= '-' . $this->setup->instanceNumber;\n+\t\t}\n+\n+\t\t// Return prefixed ID if one is given\n+\t\tif (!empty ($id)) {\n+\t\t\treturn $prefix . '-' . $id;\n+\t\t}\n+\n+\t\t// Otherwise, return prefix by itself\n+\t\treturn $prefix;\n+\t}\n+\n \t// Creates input elements for user login information\n \tprotected function loginInputs ($permalink = '', $edit_form = false, $name = '', $website = '')\n \t{\n+\t\t// Reply/edit form indicator\n+\t\t$is_form = !empty ($permalink);\n+\n \t\t// Prepend dash to permalink if present\n-\t\t$permalink = !empty ($permalink) ? '-' . $permalink : '';\n+\t\t$permalink = $is_form ? '-' . $permalink : '';\n \n \t\t// Login input attribute information\n \t\t$login_input_attributes = array (\n \t\t\t'name' => array (\n \t\t\t\t'wrapper-class'\t\t=> 'hashover-name-input',\n \t\t\t\t'label-class'\t\t=> 'hashover-name-label',\n \t\t\t\t'placeholder'\t\t=> $this->locale->text['name'],\n-\t\t\t\t'input-id'\t\t=> 'hashover-main-name' . $permalink,\n+\t\t\t\t'input-id'\t\t=> $this->prefix ('main-name' . $permalink, $is_form),\n \t\t\t\t'input-type'\t\t=> 'text',\n \t\t\t\t'input-name'\t\t=> 'name',\n \t\t\t\t'input-title'\t\t=> $this->locale->text['name-tip'],\n@@ -93,7 +121,7 @@ protected function loginInputs ($permalink = '', $edit_form = false, $name = '',\n \t\t\t\t'wrapper-class'\t\t=> 'hashover-password-input',\n \t\t\t\t'label-class'\t\t=> 'hashover-password-label',\n \t\t\t\t'placeholder'\t\t=> $this->locale->text['password'],\n-\t\t\t\t'input-id'\t\t=> 'hashover-main-password' . $permalink,\n+\t\t\t\t'input-id'\t\t=> $this->prefix ('main-password' . $permalink, $is_form),\n \t\t\t\t'input-type'\t\t=> 'password',\n \t\t\t\t'input-name'\t\t=> 'password',\n \t\t\t\t'input-title'\t\t=> $this->locale->text['password-tip'],\n@@ -104,7 +132,7 @@ protected function loginInputs ($permalink = '', $edit_form = false, $name = '',\n \t\t\t\t'wrapper-class'\t\t=> 'hashover-email-input',\n \t\t\t\t'label-class'\t\t=> 'hashover-email-label',\n \t\t\t\t'placeholder'\t\t=> $this->locale->text['email'],\n-\t\t\t\t'input-id'\t\t=> 'hashover-main-email' . $permalink,\n+\t\t\t\t'input-id'\t\t=> $this->prefix ('main-email' . $permalink, $is_form),\n \t\t\t\t'input-type'\t\t=> 'email',\n \t\t\t\t'input-name'\t\t=> 'email',\n \t\t\t\t'input-title'\t\t=> $this->locale->text['email-tip'],\n@@ -115,7 +143,7 @@ protected function loginInputs ($permalink = '', $edit_form = false, $name = '',\n \t\t\t\t'wrapper-class'\t\t=> 'hashover-website-input',\n \t\t\t\t'label-class'\t\t=> 'hashover-website-label',\n \t\t\t\t'placeholder'\t\t=> $this->locale->text['website'],\n-\t\t\t\t'input-id'\t\t=> 'hashover-main-website' . $permalink,\n+\t\t\t\t'input-id'\t\t=> $this->prefix ('main-website' . $permalink, $is_form),\n \t\t\t\t'input-type'\t\t=> 'url',\n \t\t\t\t'input-name'\t\t=> 'website',\n \t\t\t\t'input-title'\t\t=> $this->locale->text['website-tip'],\n@@ -229,30 +257,33 @@ protected function avatar ($text)\n \t}\n \n \t// Creates \"Notify me of replies\" checkbox\n-\tprotected function subscribeLabel ($id = '', $type = 'main', $checked = true)\n+\tprotected function subscribeLabel ($permalink = '', $type = 'main', $checked = true)\n \t{\n+\t\t// Reply/edit form indicator\n+\t\t$is_form = !empty ($permalink);\n+\n+\t\t// The checkbox ID\n+\t\t$id = $this->prefix ($type . '-subscribe', $is_form);\n+\n+\t\t// Append permalink to the ID if one was given\n+\t\tif ($is_form === true) {\n+\t\t\t$id .= '-' . $permalink;\n+\t\t}\n+\n \t\t// Create subscribe checkbox label element\n \t\t$subscribe_label = new HTMLTag ('label', array (\n-\t\t\t'for' => 'hashover-' . $type . '-subscribe',\n+\t\t\t'for' => $id,\n \t\t\t'class' => 'hashover-' . $type . '-label',\n \t\t\t'title' => $this->locale->text['subscribe-tip']\n \t\t));\n \n-\t\tif (!empty ($id)) {\n-\t\t\t$subscribe_label->appendAttribute ('for', '-' . $id, false);\n-\t\t}\n-\n \t\t// Create subscribe element checkbox\n \t\t$subscribe = new HTMLTag ('input', array (\n-\t\t\t'id' => 'hashover-' . $type . '-subscribe',\n+\t\t\t'id' => $id,\n \t\t\t'type' => 'checkbox',\n \t\t\t'name' => 'subscribe'\n \t\t), false, true);\n \n-\t\tif (!empty ($id)) {\n-\t\t\t$subscribe->appendAttribute ('id', '-' . $id, false);\n-\t\t}\n-\n \t\t// Tick the checkbox\n \t\tif ($checked === true) {\n \t\t\t$subscribe->createAttribute ('checked', 'true');\n@@ -292,15 +323,18 @@ protected function acceptedFormatCell ($format, $locale_key)\n \t// Creats a comment form, ie. main/reply/edit\n \tprotected function commentForm (HTMLTag $form, $type, $placeholder, $text, $permalink = '')\n \t{\n+\t\t// Reply/edit form indicator\n+\t\t$is_form = !empty ($permalink);\n+\n \t\t// Prepend dash to permalink if present\n-\t\t$permalink = !empty ($permalink) ? '-' . $permalink : '';\n+\t\t$permalink = $is_form ? '-' . $permalink : '';\n \n \t\t// Form title locale key\n \t\t$title_locale = ($type === 'reply') ? 'reply-form' : 'comment-form';\n \n \t\t// Create textarea\n \t\t$textarea = new HTMLTag ('textarea', array (\n-\t\t\t'id' => 'hashover-' . $type . '-comment' . $permalink,\n+\t\t\t'id' => $this->prefix ($type . '-comment' . $permalink, $is_form),\n \t\t\t'class' => 'hashover-textarea hashover-' . $type . '-textarea',\n \t\t\t'cols' => '63',\n \t\t\t'name' => 'comment',\n@@ -337,12 +371,12 @@ protected function commentForm (HTMLTag $form, $type, $placeholder, $text, $perm\n \t\t// Create element for various messages when needed\n \t\tif ($type !== 'main') {\n \t\t\t$message = new HTMLTag ('div', array (\n-\t\t\t\t'id' => 'hashover-' . $type . '-message-container' . $permalink,\n+\t\t\t\t'id' => $this->prefix ($type . '-message-container' . $permalink, $is_form),\n \t\t\t\t'class' => 'hashover-message',\n \n \t\t\t\t'children' => array (\n \t\t\t\t\tnew HTMLTag ('div', array (\n-\t\t\t\t\t\t'id' => 'hashover-' . $type . '-message' . $permalink\n+\t\t\t\t\t\t'id' => $this->prefix ($type . '-message' . $permalink, $is_form)\n \t\t\t\t\t))\n \t\t\t\t)\n \t\t\t));\n@@ -353,7 +387,7 @@ protected function commentForm (HTMLTag $form, $type, $placeholder, $text, $perm\n \n \t\t// Create accepted HTML message element\n \t\t$accepted_formatting_message = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-' . $type . '-formatting-message' . $permalink,\n+\t\t\t'id' => $this->prefix ($type . '-formatting-message' . $permalink, $is_form),\n \t\t\t'class' => 'hashover-formatting-message'\n \t\t));\n \n@@ -435,15 +469,18 @@ protected function pageInfoFields (HTMLTag $form)\n \t// Creates \"Formatting\" link to open the accepted HTML/markdown panel\n \tprotected function acceptedFormatting ($type, $permalink = '')\n \t{\n+\t\t// Reply/edit form indicator\n+\t\t$is_form = !empty ($permalink);\n+\n \t\t// Prepend dash to permalink if present\n-\t\t$permalink = !empty ($permalink) ? '-' . $permalink : '';\n+\t\t$permalink = $is_form ? '-' . $permalink : '';\n \n \t\t// \"Formatting\" hyperlink locale\n \t\t$accepted_format = $this->locale->text['comment-formatting'];\n \n \t\t// Create accepted HTML message revealer hyperlink\n \t\t$accepted_formatting = new HTMLTag ('span', array (\n-\t\t\t'id' => 'hashover-' . $type . '-formatting' . $permalink,\n+\t\t\t'id' => $this->prefix ($type . '-formatting' . $permalink, $is_form),\n \t\t\t'class' => 'hashover-fake-link hashover-formatting',\n \t\t\t'title' => $accepted_format,\n \t\t\t'innerHTML' => $accepted_format\n@@ -464,7 +501,7 @@ protected function createMainElement ()\n \t{\n \t\t// Create element that HashOver comments will appear in\n \t\t$main = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover',\n+\t\t\t'id' => $this->prefix (),\n \t\t\t'class' => 'hashover'\n \t\t), false);\n \n@@ -490,12 +527,14 @@ protected function createMainElement ()\n \t\t}\n \n \t\t// Create element for jump anchor\n-\t\t$jump_anchor = new HTMLTag ('div', array (\n-\t\t\t'id' => 'comments'\n-\t\t));\n+\t\tif ($this->setup->instanceNumber === 1) {\n+\t\t\t$jump_anchor = new HTMLTag ('div', array (\n+\t\t\t\t'id' => 'comments'\n+\t\t\t));\n \n-\t\t// Add jump anchor to HashOver element\n-\t\t$main->appendChild ($jump_anchor);\n+\t\t\t// Add jump anchor to HashOver element\n+\t\t\t$main->appendChild ($jump_anchor);\n+\t\t}\n \n \t\treturn $main;\n \t}\n@@ -527,7 +566,8 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create primary form wrapper element\n \t\t$form_section = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-form-section'\n+\t\t\t'id' => $this->prefix ('form-section', false),\n+\t\t\t'class' => 'hashover-form-section'\n \t\t));\n \n \t\t// Hide primary form wrapper if comments are to be initially hidden\n@@ -551,13 +591,14 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create element for various messages when needed\n \t\t$message_container = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-message-container',\n+\t\t\t'id' => $this->prefix ('message-container', false),\n \t\t\t'class' => 'hashover-title hashover-message'\n \t\t));\n \n \t\t// Create element for message text\n \t\t$message_element = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-message'\n+\t\t\t'id' => $this->prefix ('message', false),\n+\t\t\t'class' => 'hashover-main-message'\n \t\t));\n \n \t\t// Check if message cookie is set\n@@ -596,8 +637,8 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create main HashOver form\n \t\t$main_form = new HTMLTag ('form', array (\n-\t\t\t'id' => 'hashover-form',\n-\t\t\t'class' => 'hashover-balloon',\n+\t\t\t'id' => $this->prefix ('form', false),\n+\t\t\t'class' => 'hashover-form hashover-balloon',\n \t\t\t'name' => 'hashover-form',\n \t\t\t'action' => $this->setup->getBackendPath ('form-actions.php'),\n \t\t\t'method' => 'post'\n@@ -691,7 +732,7 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create fake \"required fields\" element as a SPAM trap\n \t\t$required_fields = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-requiredFields'\n+\t\t\t'class' => 'hashover-required-fields'\n \t\t));\n \n \t\t$fake_fields = array (\n@@ -795,7 +836,7 @@ public function initialHTML ($hashover_wrapper = true)\n \t\t// Create \"Login\" / \"Logout\" button element\n \t\tif ($this->setup->allowsLogin !== false or $this->login->userIsLoggedIn === true) {\n \t\t\t$login_button = new HTMLTag ('input', array (\n-\t\t\t\t'id' => 'hashover-login-button',\n+\t\t\t\t'id' => $this->prefix ('login-button', false),\n \t\t\t\t'class' => 'hashover-submit',\n \t\t\t\t'type' => 'submit'\n \t\t\t), false, true);\n@@ -830,7 +871,7 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create \"Post Comment\" button element\n \t\t$main_post_button = new HTMLTag ('input', array (\n-\t\t\t'id' => 'hashover-post-button',\n+\t\t\t'id' => $this->prefix ('post-button', false),\n \t\t\t'class' => 'hashover-submit hashover-post-button',\n \t\t\t'type' => 'submit',\n \t\t\t'name' => 'post',\n@@ -859,7 +900,8 @@ public function initialHTML ($hashover_wrapper = true)\n \t\tif ($this->commentCounts['popular'] > 0) {\n \t\t\t// Create wrapper element for popular comments\n \t\t\t$popular_section = new HTMLTag ('div', array (\n-\t\t\t\t'id' => 'hashover-popular-section'\n+\t\t\t\t'id' => $this->prefix ('popular-section', false),\n+\t\t\t\t'class' => 'hashover-popular-section'\n \t\t\t), false);\n \n \t\t\t// Hide popular comments wrapper if comments are to be initially hidden\n@@ -892,7 +934,8 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t\t// Create element for popular comments to appear in\n \t\t\t$popular_comments = new HTMLTag ('div', array (\n-\t\t\t\t'id' => 'hashover-top-comments'\n+\t\t\t\t'id' => $this->prefix ('top-comments', false),\n+\t\t\t\t'class' => 'hashover-top-comments'\n \t\t\t), false);\n \n \t\t\t// Add comments to HashOver element\n@@ -909,18 +952,20 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create wrapper element for comments\n \t\t$comments_section = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-comments-section'\n+\t\t\t'id' => $this->prefix ('comments-section', false),\n+\t\t\t'class' => 'hashover-comments-section'\n \t\t), false);\n \n \t\t// Create wrapper element for comment count and sort dropdown menu\n \t\t$count_sort_wrapper = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-count-wrapper',\n+\t\t\t'id' => $this->prefix ('count-wrapper', false),\n \t\t\t'class' => 'hashover-count-sort hashover-dashed-title'\n \t\t));\n \n \t\t// Create element for comment count\n \t\t$count_element = new HTMLTag ('span', array (\n-\t\t\t'id' => 'hashover-count'\n+\t\t\t'id' => $this->prefix ('count', false),\n+\t\t\t'class' => 'hashover-count'\n \t\t));\n \n \t\t// Add comment count to comment count element\n@@ -947,13 +992,13 @@ public function initialHTML ($hashover_wrapper = true)\n \t\t\tif ($this->commentCounts['total'] > 2) {\n \t\t\t\t// If so, create wrapper element for sort dropdown menu\n \t\t\t\t$sort_wrapper = new HTMLTag ('span', array (\n-\t\t\t\t\t'id' => 'hashover-sort',\n+\t\t\t\t\t'id' => $this->prefix ('sort', false),\n \t\t\t\t\t'class' => 'hashover-select-wrapper hashover-sort-select'\n \t\t\t\t));\n \n \t\t\t\t// Create sort dropdown menu element\n \t\t\t\t$sort_select = new HTMLTag ('select', array (\n-\t\t\t\t\t'id' => 'hashover-sort-select',\n+\t\t\t\t\t'id' => $this->prefix ('sort-select', false),\n \t\t\t\t\t'name' => 'sort',\n \t\t\t\t\t'size' => '1',\n \t\t\t\t\t'title' => $this->locale->text['sort']\n@@ -1042,7 +1087,8 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create element that will hold the comments\n \t\t$sort_div = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-sort-section'\n+\t\t\t'id' => $this->prefix ('sort-section', false),\n+\t\t\t'class' => 'hashover-sort-section'\n \t\t), false);\n \n \t\t// Add comments to HashOver element\n@@ -1064,7 +1110,8 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t// Create end links wrapper element\n \t\t$end_links_wrapper = new HTMLTag ('div', array (\n-\t\t\t'id' => 'hashover-end-links'\n+\t\t\t'id' => $this->prefix ('end-links', false),\n+\t\t\t'class' => 'hashover-end-links'\n \t\t));\n \n \t\t// Hide end links wrapper if comments are to be initially hidden\n@@ -1078,7 +1125,7 @@ public function initialHTML ($hashover_wrapper = true)\n \t\t// Create link back to HashOver homepage (fixme! get a real page!)\n \t\t$homepage_link = new HTMLTag ('a', array (\n \t\t\t'href' => 'http://tildehash.com/?page=hashover',\n-\t\t\t'id' => 'hashover-home-link',\n+\t\t\t'class' => 'hashover-home-link',\n \t\t\t'target' => '_blank',\n \t\t\t'title' => $homepage_link_text,\n \t\t\t'innerHTML' => $homepage_link_text\n@@ -1109,7 +1156,7 @@ public function initialHTML ($hashover_wrapper = true)\n \n \t\t\t\t// Create RSS feed attributes\n \t\t\t\t$rss_link->createAttributes (array (\n-\t\t\t\t\t'id' => 'hashover-rss-link',\n+\t\t\t\t\t'class' => 'hashover-rss-link',\n \t\t\t\t\t'target' => '_blank',\n \t\t\t\t\t'title' => $rss_link_text,\n \t\t\t\t\t'innerHTML' => $rss_link_text\n@@ -1126,7 +1173,7 @@ public function initialHTML ($hashover_wrapper = true)\n \t\t// Create link to HashOver source code\n \t\t$source_link = new HTMLTag ('a', array (\n \t\t\t'href' => $this->setup->getBackendPath ('source-viewer.php'),\n-\t\t\t'id' => 'hashover-source-link',\n+\t\t\t'class' => 'hashover-source-link',\n \t\t\t'rel' => 'hashover-source',\n \t\t\t'target' => '_blank',\n \t\t\t'title' => $source_link_text,\n@@ -1140,7 +1187,7 @@ public function initialHTML ($hashover_wrapper = true)\n \t\t\t// Create link to HashOver JavaScript source code\n \t\t\t$javascript_link = new HTMLTag ('a', array (\n \t\t\t\t'href' => $this->setup->getHttpPath ('comments.php'),\n-\t\t\t\t'id' => 'hashover-javascript-link',\n+\t\t\t\t'class' => 'hashover-javascript-link',\n \t\t\t\t'rel' => 'hashover-javascript',\n \t\t\t\t'target' => '_blank',\n \t\t\t\t'title' => 'JavaScript'"
    },
    {
      "sha": "098250637208d04e3b91359c7b766fc96aede029",
      "filename": "hashover/backend/classes/hashover.php",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/hashover.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/hashover.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/classes/hashover.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -734,6 +734,9 @@ public function displayComments ()\n \t\t// Start UI output with initial HTML\n \t\t$html  = $this->ui->initialHTML ();\n \n+\t\t// Increase instance number\n+\t\t$this->setup->instanceNumber++;\n+\n \t\t// End statistics and add them as code comment\n \t\t$html .= $this->statistics->executionEnd ();\n "
    },
    {
      "sha": "dc129cde0ca3060bf8bf4c91ad4947ce809d489a",
      "filename": "hashover/backend/classes/phpmode.php",
      "status": "modified",
      "additions": 34,
      "deletions": 22,
      "changes": 56,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/phpmode.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/phpmode.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/classes/phpmode.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -72,7 +72,7 @@ protected function replyCheck ($permalink)\n \t\t\t$file = $this->fileFromPermalink ($permalink);\n \n \t\t\t$form = new HTMLTag ('form', array (\n-\t\t\t\t'id' => 'hashover-reply-' . $permalink,\n+\t\t\t\t'id' => $this->ui->prefix ('reply-' . $permalink),\n \t\t\t\t'class' => 'hashover-reply-form',\n \t\t\t\t'method' => 'post',\n \t\t\t\t'action' => $this->setup->getBackendPath ('form-actions.php')\n@@ -103,7 +103,7 @@ protected function editCheck ($comment)\n \t\t\t$subscribed = isset ($comment['subscribed']);\n \n \t\t\t$form = new HTMLTag ('form', array (\n-\t\t\t\t'id' => 'hashover-edit-' . $permalink,\n+\t\t\t\t'id' => $this->ui->prefix ('edit-' . $permalink),\n \t\t\t\t'class' => 'hashover-edit-form',\n \t\t\t\t'method' => 'post',\n \t\t\t\t'action' => $this->setup->getBackendPath ('form-actions.php')\n@@ -180,18 +180,25 @@ protected function findByPermalink ($permalink, $comments)\n \n \tpublic function parseComment (array $comment, $parent = null, $popular = false)\n \t{\n-\t\t$template = array ();\n+\t\t$permalink = $comment['permalink'];\n+\t\t$first_instance = 'hashover-' . $permalink;\n \t\t$name_class = 'hashover-name-plain';\n-\t\t$comment_key = $comment['permalink'];\n-\t\t$permalink = 'hashover-' . $comment['permalink'];\n-\t\t$template['permalink'] = $comment_key;\n \t\t$this->codeTagCount = 0;\n \t\t$this->codeTags = array ();\n \t\t$this->preTagCount = 0;\n \t\t$this->preTags = array ();\n \n+\t\t// Get instantiated prefix\n+\t\t$prefix = $this->ui->prefix ();\n+\n+\t\t// Initial template\n+\t\t$template = array (\n+\t\t\t'hashover' => $prefix,\n+\t\t\t'permalink' => $permalink\n+\t\t);\n+\n \t\t// Text for avatar image alt attribute\n-\t\t$permatext = substr ($comment_key, 1);\n+\t\t$permatext = substr ($permalink, 1);\n \t\t$permatext = explode ('r', $permatext);\n \t\t$permatext = array_pop ($permatext);\n \n@@ -201,7 +208,7 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t// Check if this comment is a popular comment\n \t\tif ($popular === true) {\n \t\t\t// Attempt to get parent comment permalink\n-\t\t\t$parent = $this->getParentPermalink ($comment_key);\n+\t\t\t$parent = $this->getParentPermalink ($permalink);\n \n \t\t\t// Get parent comment by its permalink if it exists\n \t\t\tif ($parent !== null) {\n@@ -247,17 +254,22 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t\t}\n \n \t\t\t\t// If so, display name as a hyperlink\n-\t\t\t\t$name_link = $this->ui->nameElement ('a', $comment_key, $name, $comment['website']);\n+\t\t\t\t$name_link = $this->ui->nameElement ('a', $permalink, $name, $comment['website']);\n \t\t\t} else {\n \t\t\t\t// If not, display name as plain text\n-\t\t\t\t$name_link = $this->ui->nameElement ('span', $comment_key, $name);\n+\t\t\t\t$name_link = $this->ui->nameElement ('span', $permalink, $name);\n \t\t\t}\n \n-\t\t\t// Add \"Top of Thread\" hyperlink to template\n+\t\t\t// Check if comment has a parent\n \t\t\tif ($parent !== null) {\n+\t\t\t\t// If so, create the parent thread permalink\n \t\t\t\t$parent_thread = 'hashover-' . $parent['permalink'];\n+\n+\t\t\t\t// Get the parent's name\n \t\t\t\t$parent_name = Misc::getArrayItem ($parent, 'name') ?: $this->setup->defaultName;\n-\t\t\t\t$template['parent-link'] = $this->ui->parentThreadLink ($parent_thread, $comment_key, $parent_name);\n+\n+\t\t\t\t// Add thread parent hyperlink to template\n+\t\t\t\t$template['parent-link'] = $this->ui->parentThreadLink ($this->setup->filePath, $parent_thread, $permalink, $parent_name);\n \t\t\t}\n \n \t\t\tif (isset ($comment['user-owned'])) {\n@@ -283,10 +295,10 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t// Check if the comment is editable for the user\n \t\t\tif (isset ($comment['editable'])) {\n \t\t\t\t// If so, add \"Edit\" hyperlink to template\n-\t\t\t\tif (!empty ($_GET['hashover-edit']) and $_GET['hashover-edit'] === $comment_key) {\n-\t\t\t\t\t$template['edit-link'] = $this->ui->cancelLink ($permalink, 'edit');\n+\t\t\t\tif (!empty ($_GET['hashover-edit']) and $_GET['hashover-edit'] === $permalink) {\n+\t\t\t\t\t$template['edit-link'] = $this->ui->cancelLink ($first_instance, 'edit');\n \t\t\t\t} else {\n-\t\t\t\t\t$template['edit-link'] = $this->ui->formLink ('', 'edit', $comment_key);\n+\t\t\t\t\t$template['edit-link'] = $this->ui->formLink ($this->setup->filePath, 'edit', $permalink);\n \t\t\t\t}\n \t\t\t}\n \n@@ -300,7 +312,7 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t\t$like_count = $comment['likes'] . ' ' . $this->locale->text['like'][$plural];\n \n \t\t\t\t// Add like count to HTML template\n-\t\t\t\t$template['like-count'] = $this->ui->likeCount ('likes', $comment_key, $like_count);\n+\t\t\t\t$template['like-count'] = $this->ui->likeCount ('likes', $permalink, $like_count);\n \t\t\t}\n \n \t\t\t// Check if dislikes are enabled and the comment's been disliked\n@@ -315,7 +327,7 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t\t$dislike_count = $comment['dislikes'] . ' ' . $this->locale->text['dislike'][$plural];\n \n \t\t\t\t// Add dislike count to HTML template\n-\t\t\t\t$template['dislike-count'] = $this->ui->likeCount ('dislikes', $comment_key, $dislike_count);\n+\t\t\t\t$template['dislike-count'] = $this->ui->likeCount ('dislikes', $permalink, $dislike_count);\n \t\t\t}\n \n \t\t\t// Add name HTML to template\n@@ -327,13 +339,13 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t}\n \n \t\t\t// Add date permalink hyperlink to template\n-\t\t\t$template['date'] = $this->ui->dateLink ('', $permalink, $comment['date']);\n+\t\t\t$template['date'] = $this->ui->dateLink ($this->setup->filePath, $first_instance, $comment['date']);\n \n \t\t\t// Add \"Reply\" hyperlink to template\n-\t\t\tif (!empty ($_GET['hashover-reply']) and $_GET['hashover-reply'] === $comment_key) {\n-\t\t\t\t$template['reply-link'] = $this->ui->cancelLink ($permalink, 'reply', $reply_class);\n+\t\t\tif (!empty ($_GET['hashover-reply']) and $_GET['hashover-reply'] === $permalink) {\n+\t\t\t\t$template['reply-link'] = $this->ui->cancelLink ($first_instance, 'reply', $reply_class);\n \t\t\t} else {\n-\t\t\t\t$template['reply-link'] = $this->ui->formLink ('', 'reply', $comment_key, $reply_class, $reply_title);\n+\t\t\t\t$template['reply-link'] = $this->ui->formLink ($this->setup->filePath, 'reply', $permalink, $reply_class, $reply_title);\n \t\t\t}\n \n \t\t\t// Add edit form HTML to template\n@@ -342,7 +354,7 @@ public function parseComment (array $comment, $parent = null, $popular = false)\n \t\t\t}\n \n \t\t\t// Add reply form HTML to template\n-\t\t\t$template['reply-form'] = $this->replyCheck ($comment_key);\n+\t\t\t$template['reply-form'] = $this->replyCheck ($permalink);\n \n \t\t\t// Add reply count to template\n \t\t\tif (!empty ($comment['replies'])) {"
    },
    {
      "sha": "da2ad10ab66838e114663ace793c42b0d55d0088",
      "filename": "hashover/backend/classes/setup.php",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/setup.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/classes/setup.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/classes/setup.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -20,6 +20,7 @@\n class Setup extends Settings\n {\n \tpublic $usage;\n+\tpublic $instanceNumber = 1;\n \tpublic $isMobile = false;\n \tpublic $remoteAccess = false;\n \tpublic $pageURL;\n@@ -155,6 +156,26 @@ public function getRequest ($key, $default = false)\n \t\treturn $default;\n \t}\n \n+\t// Sets instance number\n+\tpublic function setInstance ($instance = '')\n+\t{\n+\t\t// Request instance if told to\n+\t\tif ($instance === 'request') {\n+\t\t\t$instance = $this->requestData ('instance', '');\n+\t\t}\n+\n+\t\t// Check if given instance is numeric\n+\t\tif (is_numeric ($instance)) {\n+\t\t\t// If so, cast it to an actual integer\n+\t\t\t$this->instanceNumber = (int)($instance);\n+\n+\t\t\treturn true;\n+\t\t}\n+\n+\t\t// Otherwise, throw an exception\n+\t\tthrow new \\Exception ('Instance must be a number.');\n+\t}\n+\n \t// Gets a domain with a port from given URL\n \tprotected function getDomainWithPort ($url = '')\n \t{"
    },
    {
      "sha": "36877c07ca307860e2c2f409d1c0146fc7ed89ca",
      "filename": "hashover/backend/comments-ajax.php",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/comments-ajax.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/backend/comments-ajax.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/backend/comments-ajax.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -32,6 +32,7 @@\n \t$hashover->setup->setPageURL ('request');\n \t$hashover->setup->setPageTitle ('request');\n \t$hashover->setup->setThreadName ('request');\n+\t$hashover->setup->setInstance ('request');\n \n \t// User settings passed during instantiation\n \t$settings = $hashover->setup->getRequest ('settings');"
    },
    {
      "sha": "fd5f616e9f899572c834b67a69b56ce8a7cfe640",
      "filename": "hashover/comments.php",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/comments.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/comments.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/comments.php?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -88,6 +88,9 @@\n \t// Register error message handler method\n \t$javascript->registerFile ('displayerror.js');\n \n+\t// Register instance prefix method\n+\t$javascript->registerFile ('prefix.js');\n+\n \t// Register pre-compiled regular expressions\n \t$javascript->registerFile ('regex.js');\n "
    },
    {
      "sha": "53519eb9a1f06ae7180b87bad658c77ba988d865",
      "filename": "hashover/frontend/addratings.js",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/addratings.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/addratings.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/addratings.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -4,6 +4,9 @@ HashOver.prototype.addRatings = function (comment, template, action, commentKey)\n \t// The opposite action\n \tvar opposite = (action === 'like') ? 'dislike' : 'like';\n \n+\t// Get instantiated prefix\n+\tvar prefix = this.prefix ();\n+\n \t// Check if the comment doesn't belong to the logged in user\n \tif (comment['user-owned'] === undefined) {\n \t\t// Check whether this comment was liked/disliked by the visitor\n@@ -27,6 +30,7 @@ HashOver.prototype.addRatings = function (comment, template, action, commentKey)\n \t\t// Add like/dislike link to HTML template\n \t\ttemplate[action + '-link'] = this.strings.parseTemplate (\n \t\t\tthis.ui[action + '-link'], {\n+\t\t\t\thashover: prefix,\n \t\t\t\tpermalink: commentKey,\n \t\t\t\tclass: className,\n \t\t\t\ttitle: title,\n@@ -48,6 +52,7 @@ HashOver.prototype.addRatings = function (comment, template, action, commentKey)\n \t// Add like count to HTML template\n \ttemplate[action + '-count'] = this.strings.parseTemplate (\n \t\tthis.ui[action + '-count'], {\n+\t\t\thashover: prefix,\n \t\t\tpermalink: commentKey,\n \t\t\ttext: count || ''\n \t\t}"
    },
    {
      "sha": "009a99d6795b02cdeb4ffae3370e2ec9e96dbea2",
      "filename": "hashover/frontend/constructor.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/constructor.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/constructor.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/constructor.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -34,7 +34,7 @@ HashOver.frontendReady = true;\n HashOver.backendReady = false;\n \n // Initial HashOver instance count (constructor.js)\n-HashOver.instanceCount = 0;\n+HashOver.instanceCount = 1;\n \n // Constructor to add shared methods to (constructor.js)\n var HashOverConstructor = HashOver;"
    },
    {
      "sha": "8edb912327bbb0f6f4e376afc440e6c4e97dae69",
      "filename": "hashover/frontend/createthread.js",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/createthread.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/createthread.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/createthread.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -1,5 +1,5 @@\n // Create a new comment thread/section (createthread.js)\n-HashOver.prototype.createThread = function (options)\n+HashOver.prototype.createThread = function (id, options)\n {\n \t// Reference to this object\n \tvar hashover = this;\n@@ -8,7 +8,7 @@ HashOver.prototype.createThread = function (options)\n \tvar args = arguments;\n \n \t// Check if we're on the first instance or if the backend is ready\n-\tif (HashOver.backendReady === true || HashOver.instanceCount === 0) {\n+\tif (HashOver.backendReady === true || HashOver.instanceCount === 1) {\n \t\t// If so, create the thread when the page is ready\n \t\tHashOver.onReady (function () {\n \t\t\tHashOver.instantiator.apply (hashover, args);"
    },
    {
      "sha": "b16b98362f8cc30d99ebd208ee629f6f20ea2ad2",
      "filename": "hashover/frontend/editcomment.js",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/editcomment.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/editcomment.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/editcomment.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -30,7 +30,7 @@ HashOver.prototype.editComment = function (comment)\n \n \t// Create edit form element\n \tvar form = this.createElement ('form', {\n-\t\tid: 'hashover-edit-' + permalink,\n+\t\tid: this.prefix ('edit-' + permalink),\n \t\tclassName: 'hashover-edit-form',\n \t\taction: this.setup['http-backend'] + '/form-actions.php',\n \t\tmethod: 'post'\n@@ -39,6 +39,7 @@ HashOver.prototype.editComment = function (comment)\n \t// Place edit form fields into form\n \tform.innerHTML = this.strings.parseTemplate (\n \t\tthis.ui['edit-form'], {\n+\t\t\thashover: this.prefix (),\n \t\t\tpermalink: permalink,\n \t\t\tfile: file,\n \t\t\tname: name,"
    },
    {
      "sha": "cf6db45c834d20d886932c8d5e543bfa6762dcd1",
      "filename": "hashover/frontend/getbackendqueries.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/getbackendqueries.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/getbackendqueries.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/getbackendqueries.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -30,6 +30,9 @@ HashOver.getBackendQueries = function (options)\n \t\t}\n \t}\n \n+\t// Add instance number to data\n+\tdata.instance = this.instanceCount;\n+\n \t// Use URL and title options if available\n \tdata.url = options.url || this.getURL (options.canonical);\n \tdata.title = options.title || this.getTitle ();"
    },
    {
      "sha": "e12a39d8d11cf8ac90b2b81b0fa1d73c930ee6c2",
      "filename": "hashover/frontend/init.js",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/init.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/init.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/init.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -1,5 +1,5 @@\n // HashOver UI initialization process (init.js)\n-HashOver.prototype.init = function ()\n+HashOver.prototype.init = function (id)\n {\n \t// Store start time\n \tthis.execStart = Date.now ();\n@@ -8,7 +8,7 @@ HashOver.prototype.init = function ()\n \tvar hashover = this;\n \n \t// Get the main HashOver element\n-\tvar mainElement = this.getMainElement ();\n+\tvar mainElement = this.getMainElement (id);\n \n \t// Form events that get the same listeners\n \tvar formEvents = [ 'onclick', 'onsubmit' ];"
    },
    {
      "sha": "b506875345929c74e52658e414872c9ee854a971",
      "filename": "hashover/frontend/instantiator.js",
      "status": "modified",
      "additions": 8,
      "deletions": 5,
      "changes": 13,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/instantiator.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/instantiator.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/instantiator.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -1,15 +1,12 @@\n // Real constructor (instantiator.js)\n-HashOver.instantiator = function (options)\n+HashOver.instantiator = function (id, options)\n {\n \t// Reference to this object\n \tvar hashover = this;\n \n \t// Get backend queries\n \tvar queries = HashOver.getBackendQueries (options);\n \n-\t// Increment HashOver instance count\n-\tHashOver.instanceCount++;\n-\n \t// Backend request path\n \tvar requestPath = HashOver.backendPath + '/comments-ajax.php';\n \n@@ -51,13 +48,19 @@ HashOver.instantiator = function (options)\n \t\t// Thread information from backend\n \t\thashover.instance = json.instance;\n \n+\t\t// Initial number of collapsed comments\n+\t\thashover.instance.collapseLimit = 0;\n+\n \t\t// Backend execution time and memory usage statistics\n \t\thashover.statistics = json.statistics;\n \n \t\t// Initiate HashOver\n-\t\thashover.init ();\n+\t\thashover.init (id);\n \t}, true);\n \n \t// Set instance number to current instance count\n \tthis.instanceNumber = HashOver.instanceCount;\n+\n+\t// Increment HashOver instance count\n+\tHashOver.instanceCount++;\n };"
    },
    {
      "sha": "6f33d59cacaadc010f898964c648d5b2172399b9",
      "filename": "hashover/frontend/loader-constructor.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/loader-constructor.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/loader-constructor.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/loader-constructor.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -23,7 +23,7 @@\n \"use strict\";\n \n // Initial loader constructor (loader-constructor.js)\n-function HashOver (options)\n+function HashOver (id, options)\n {\n \t// Reference to this object\n \tvar hashover = this;"
    },
    {
      "sha": "b0be31b00c0e3a08558a80a2bcbe1f693068dc1a",
      "filename": "hashover/frontend/messages.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/messages.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/messages.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/messages.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -160,7 +160,7 @@ HashOver.prototype.showMessage = function (messageText, type, permalink, error,\n \tthis.openMessage (container);\n \n \t// Instantiated permalink as timeout key\n-\tvar key = permalink;\n+\tvar key = this.prefix (permalink);\n \n \t// Add the comment to message counts\n \tif (this.messageTimeouts[key] === undefined) {"
    },
    {
      "sha": "d14d29a53889f8d55523a5e9ebc673c0460a5664",
      "filename": "hashover/frontend/parsecomment.js",
      "status": "modified",
      "additions": 17,
      "deletions": 5,
      "changes": 22,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/parsecomment.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/parsecomment.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/parsecomment.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -50,7 +50,7 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \tvar hashover = this;\n \n \tvar commentKey = comment.permalink;\n-\tvar permalink = 'hashover-' + commentKey;\n+\tvar permalink = this.prefix (commentKey);\n \tvar nameClass = 'hashover-name-plain';\n \tvar commentDate = comment.date;\n \tvar codeTagCount = 0;\n@@ -60,8 +60,12 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \tvar classes = '';\n \tvar replies = '';\n \n+\t// Get instantiated prefix\n+\tvar prefix = this.prefix ();\n+\n \t// Initial template\n \tvar template = {\n+\t\thashover: prefix,\n \t\tpermalink: commentKey\n \t};\n \n@@ -89,12 +93,12 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t// Check if we have comments to collapse\n \t\tif (collapse === true && this.instance['total-count'] > 0) {\n \t\t\t// If so, check if we've reached the collapse limit\n-\t\t\tif (this.collapseLimit >= this.setup['collapse-limit']) {\n+\t\t\tif (this.instance.collapseLimit >= this.setup['collapse-limit']) {\n \t\t\t\t// If so, append class to indicate collapsed comment\n \t\t\t\tclasses += ' hashover-hidden';\n \t\t\t} else {\n \t\t\t\t// If not, increase collapse limit\n-\t\t\t\tthis.collapseLimit++;\n+\t\t\t\tthis.instance.collapseLimit++;\n \t\t\t}\n \t\t}\n \t}\n@@ -149,6 +153,7 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t\t// And set name as a hyperlink\n \t\t\tvar nameElement = this.strings.parseTemplate (\n \t\t\t\tthis.ui['name-link'], {\n+\t\t\t\t\thashover: prefix,\n \t\t\t\t\thref: website,\n \t\t\t\t\tpermalink: commentKey,\n \t\t\t\t\tname: name\n@@ -158,6 +163,7 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t\t// If not, set name as plain text\n \t\t\tvar nameElement = this.strings.parseTemplate (\n \t\t\t\tthis.ui['name-span'], {\n+\t\t\t\t\thashover: prefix,\n \t\t\t\t\tpermalink: commentKey,\n \t\t\t\t\tname: name\n \t\t\t\t}\n@@ -185,6 +191,8 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t\t// Add thread parent hyperlink to template\n \t\t\ttemplate['parent-link'] = this.strings.parseTemplate (\n \t\t\t\tthis.ui['parent-link'], {\n+\t\t\t\t\thashover: prefix,\n+\t\t\t\t\thref: comment.url || this.instance['file-path'],\n \t\t\t\t\tparent: parentThread,\n \t\t\t\t\tpermalink: commentKey,\n \t\t\t\t\tname: parentName\n@@ -218,6 +226,7 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t\t// If so, add \"Edit\" hyperlink to template\n \t\t\ttemplate['edit-link'] = this.strings.parseTemplate (\n \t\t\t\tthis.ui['edit-link'], {\n+\t\t\t\t\thashover: prefix,\n \t\t\t\t\thref: comment.url || this.instance['file-path'],\n \t\t\t\t\tpermalink: commentKey\n \t\t\t\t}\n@@ -279,15 +288,17 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t\t// Add date from comment as permalink hyperlink to template\n \t\ttemplate.date = this.strings.parseTemplate (\n \t\t\tthis.ui['date-link'], {\n+\t\t\t\thashover: prefix,\n \t\t\t\thref: comment.url || this.instance['file-path'],\n-\t\t\t\tpermalink: permalink,\n+\t\t\t\tpermalink: 'hashover-' + commentKey,\n \t\t\t\tdate: commentDate\n \t\t\t}\n \t\t);\n \n \t\t// Add \"Reply\" hyperlink to template\n \t\ttemplate['reply-link'] = this.strings.parseTemplate (\n \t\t\tthis.ui['reply-link'], {\n+\t\t\t\thashover: prefix,\n \t\t\t\thref: comment.url || this.instance['file-path'],\n \t\t\t\tpermalink: commentKey,\n \t\t\t\tclass: replyClass,\n@@ -440,7 +451,8 @@ HashOverConstructor.prototype.parseComment = function (comment, parent, collapse\n \t// Wrap comment HTML\n \tvar wrapper = this.strings.parseTemplate (\n \t\tthis.ui['comment-wrapper'], {\n-\t\t\tpermalink: permalink,\n+\t\t\thashover: prefix,\n+\t\t\tpermalink: commentKey,\n \t\t\tclass: classes,\n \t\t\thtml: html + replies\n \t\t}"
    },
    {
      "sha": "e1a9cdc2effac6df1f476e56203e8a775de2e1c0",
      "filename": "hashover/frontend/prefix.js",
      "status": "added",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/prefix.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/prefix.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/prefix.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -0,0 +1,19 @@\n+// Returns instantiated pseudo-namespaced ID (prefix.js)\n+HashOverConstructor.prototype.prefix = function (id)\n+{\n+\t// Initial prefix\n+\tvar prefix = 'hashover';\n+\n+\t// Append instance number to prefix\n+\tif (this.instanceNumber > 1) {\n+\t\tprefix += '-' + this.instanceNumber;\n+\t}\n+\n+\t// Return prefixed ID if one is given\n+\tif (id) {\n+\t\treturn prefix + '-' + id;\n+\t}\n+\n+\t// Otherwise, return prefix by itself\n+\treturn prefix;\n+};"
    },
    {
      "sha": "6d4d96538790d5901708fed4d79483fabc748a85",
      "filename": "hashover/frontend/replytocomment.js",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/replytocomment.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/replytocomment.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/replytocomment.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -12,7 +12,7 @@ HashOver.prototype.replyToComment = function (permalink)\n \n \t// Create reply form element\n \tvar form = this.createElement ('form', {\n-\t\tid: 'hashover-reply-' + permalink,\n+\t\tid: this.prefix ('reply-' + permalink),\n \t\tclassName: 'hashover-reply-form',\n \t\taction: this.setup['http-backend'] + '/form-actions.php',\n \t\tmethod: 'post'\n@@ -21,6 +21,7 @@ HashOver.prototype.replyToComment = function (permalink)\n \t// Place reply fields into form\n \tform.innerHTML = this.strings.parseTemplate (\n \t\tthis.ui['reply-form'], {\n+\t\t\thashover: this.prefix (),\n \t\t\tpermalink: permalink,\n \t\t\tfile: file\n \t\t}"
    },
    {
      "sha": "49f04f65511a884c538457defc5dabf05dc70e0e",
      "filename": "hashover/frontend/uncollapseinterfacelink.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/uncollapseinterfacelink.js",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/frontend/uncollapseinterfacelink.js",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/frontend/uncollapseinterfacelink.js?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -18,7 +18,7 @@ HashOver.prototype.uncollapseInterfaceLink = function ()\n \n \t// Create hyperlink to uncollapse the interface\n \tmain.appendChild (this.createElement ('a', {\n-\t\tid: 'hashover-uncollapse-interface-link',\n+\t\tid: this.prefix ('uncollapse-interface-link'),\n \t\tclassName: 'hashover-more-link',\n \t\thref: '#',\n \t\ttitle: text,"
    },
    {
      "sha": "edb5ee22c2391549e095ca4d5f5f00234ae8d6c3",
      "filename": "hashover/themes/1.0-ported/comments.css",
      "status": "modified",
      "additions": 29,
      "deletions": 23,
      "changes": 52,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/1.0-ported/comments.css",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/1.0-ported/comments.css",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/themes/1.0-ported/comments.css?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -25,26 +25,26 @@ conditions, unless such conditions are required by law.\n }\n \n .hashover .hashover-hidden,\n-.hashover #hashover-requiredFields {\n+.hashover .hashover-required-fields {\n \tdisplay: none ! important;\n }\n \n .hashover,\n-#hashover-top-comments,\n-#hashover-sort-section,\n+.hashover-top-comments,\n+.hashover-sort-section,\n .hashover .hashover-inputs {\n \tclear: both;\n }\n \n-.hashover #hashover-form-section,\n-.hashover #hashover-popular-section,\n-.hashover #hashover-comments-section {\n+.hashover .hashover-form-section,\n+.hashover .hashover-popular-section,\n+.hashover .hashover-comments-section {\n \tmargin-bottom: 36px;\n }\n \n .hashover .hashover-dashed-title,\n .hashover .hashover-title,\n-.hashover #hashover-count,\n+.hashover .hashover-count,\n .hashover .hashover-comment-name {\n \tfont-size: 16px;\n \tdisplay: inline-block;\n@@ -58,7 +58,7 @@ conditions, unless such conditions are required by law.\n \twidth: 100%;\n }\n \n-.hashover #hashover-form {\n+.hashover .hashover-form {\n \tposition: relative;\n \toverflow: inherit;\n }\n@@ -90,7 +90,8 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-avatar *,\n .hashover .hashover-avatar a,\n .hashover .hashover-end-links,\n-.hashover .hashover-more-link {\n+.hashover .hashover-more-link,\n+.hashover .hashover-requires-login-message {\n \ttext-align: center;\n }\n \n@@ -140,7 +141,7 @@ conditions, unless such conditions are required by law.\n \twidth: 65px;\n }\n \n-.hashover #hashover-form .hashover-avatar-image {\n+.hashover .hashover-form .hashover-avatar-image {\n \tleft: -66px;\n \ttop: -1px;\n }\n@@ -194,7 +195,7 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-comment code,\n .hashover .hashover-comment label,\n .hashover .hashover-message,\n-.hashover #hashover-more-link {\n+.hashover .hashover-more-link {\n \tbox-sizing: border-box;\n \t-moz-box-sizing: border-box;\n \t-webkit-box-sizing: border-box;\n@@ -205,6 +206,7 @@ conditions, unless such conditions are required by law.\n .hashover form textarea,\n .hashover form .hashover-inputs input,\n .hashover .hashover-balloon,\n+.hashover .hashover-requires-login-message,\n .hashover .hashover-comment input.hashover-delete,\n .hashover img,\n .hashover .hashover-comment pre,\n@@ -214,7 +216,7 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-comment .hashover-form-buttons a,\n .hashover .hashover-comment label,\n .hashover .hashover-main-message,\n-.hashover #hashover-more-link {\n+.hashover .hashover-more-link {\n \tborder-radius: 5px 5px 5px 5px;\n \t-moz-border-radius: 5px 5px 5px 5px;\n \t-webkit-border-radius: 5px 5px 5px 5px;\n@@ -349,11 +351,11 @@ conditions, unless such conditions are required by law.\n \tmargin-top: -1px;\n }\n \n-.hashover #hashover-count {\n+.hashover .hashover-count {\n \tfloat: left;\n }\n \n-.hashover #hashover-sort {\n+.hashover .hashover-select-wrapper {\n \tfloat: right;\n }\n \n@@ -495,12 +497,16 @@ conditions, unless such conditions are required by law.\n \tmargin-left: 52px;\n }\n \n-.hashover .hashover-balloon {\n-\toverflow: hidden;\n-\tmargin-left: 65px;\n+.hashover .hashover-balloon,\n+.hashover .hashover-requires-login-message {\n \tpadding: 6px 8px 8px 8px;\n \tbackground-color: #F6F8FF;\n \tborder: 1px solid #808080 ! important;\n+}\n+\n+.hashover .hashover-balloon {\n+\toverflow: hidden;\n+\tmargin-left: 65px;\n \tmin-height: 45px;\n \ttext-align: left;\n \theight: auto;\n@@ -555,13 +561,13 @@ conditions, unless such conditions are required by law.\n \tpadding-right: 0px;\n }\n \n-.hashover #hashover-form .hashover-comment-name,\n+.hashover .hashover-form .hashover-comment-name,\n .hashover .hashover-comment .hashover-comment-name {\n \tfont-size: 20px;\n \tfont-weight: bold;\n }\n \n-.hashover #hashover-form .hashover-comment-name {\n+.hashover .hashover-form .hashover-comment-name {\n \tdisplay: block;\n \tmargin-bottom: 8px;\n }\n@@ -789,13 +795,13 @@ conditions, unless such conditions are required by law.\n \tcolor: #FF0000;\n }\n \n-.hashover #hashover-end-links {\n+.hashover .hashover-end-links {\n \tborder-top: 1px solid #AAAAAA;\n \tmargin-top: -12px;\n \tpadding: 18px 0px 5px 0px;\n }\n \n-.hashover #hashover-more-link {\n+.hashover .hashover-more-link {\n \tdisplay: block;\n \tpadding: 12px;\n \tmargin-bottom: -16px;\n@@ -806,11 +812,11 @@ conditions, unless such conditions are required by law.\n \tfilter: alpha(opacity=100);\n }\n \n-.hashover #hashover-more-link:hover {\n+.hashover .hashover-more-link:hover {\n \tbackground-color: rgba(210, 210, 255, 0.5);\n }\n \n-.hashover #hashover-more-link.hashover-hide-morelink {\n+.hashover .hashover-more-link.hashover-hide-morelink {\n \topacity: 0.0;\n \tfilter: alpha(opacity=0);\n }"
    },
    {
      "sha": "3207c551f47893e97bd4bc6d1607dbd6109f334a",
      "filename": "hashover/themes/1.0-ported/comments.html",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/1.0-ported/comments.html",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/1.0-ported/comments.html",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/themes/1.0-ported/comments.html?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -5,11 +5,11 @@\n \t\t{name} {thread-link}\n \t</div>\n \n-\t<div id=\"hashover-content-{permalink}\" class=\"hashover-content\">\n+\t<div id=\"{hashover}-content-{permalink}\" class=\"hashover-content\">\n \t\t{comment}\n \t</div>\n \n-\t<span id=\"hashover-placeholder-edit-form-{permalink}\"></span>\n+\t<span id=\"{hashover}-placeholder-edit-form-{permalink}\"></span>\n \n \t<div class=\"hashover-footer\">\n \t\t<span class=\"hashover-date\">\n@@ -27,4 +27,4 @@\n \t</div>\n </div>\n \n-<span id=\"hashover-placeholder-reply-form-{permalink}\"></span>\n+<span id=\"{hashover}-placeholder-reply-form-{permalink}\"></span>"
    },
    {
      "sha": "8b3e88c0a0d8b7120e139adbdfb08ba7f82f3135",
      "filename": "hashover/themes/default-borderless/comments.css",
      "status": "modified",
      "additions": 22,
      "deletions": 18,
      "changes": 40,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default-borderless/comments.css",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default-borderless/comments.css",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/themes/default-borderless/comments.css?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -31,7 +31,7 @@ conditions, unless such conditions are required by law.\n }\n \n .hashover .hashover-hidden,\n-.hashover #hashover-requiredFields,\n+.hashover .hashover-required-fields,\n .hashover .hashover-notice > .hashover-balloon > .hashover-footer,\n .hashover .hashover-first .hashover-balloon,\n .hashover .hashover-first .hashover-avatar:before,\n@@ -40,20 +40,20 @@ conditions, unless such conditions are required by law.\n }\n \n .hashover,\n-#hashover-top-comments,\n-#hashover-sort-section,\n+.hashover-top-comments,\n+.hashover-sort-section,\n .hashover .hashover-inputs {\n \tclear: both;\n }\n \n-.hashover #hashover-form-section,\n-.hashover #hashover-popular-section,\n-.hashover #hashover-comments-section {\n+.hashover .hashover-form-section,\n+.hashover .hashover-popular-section,\n+.hashover .hashover-comments-section {\n \tmargin-bottom: 36px;\n }\n \n .hashover .hashover-title,\n-.hashover #hashover-count,\n+.hashover .hashover-count,\n .hashover .hashover-comment-name {\n \tdisplay: inline-block;\n \tfont-size: 18px;\n@@ -73,6 +73,7 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-inputs input,\n .hashover .hashover-comment textarea,\n .hashover .hashover-comment .hashover-balloon,\n+.hashover .hashover-requires-login-message,\n .hashover .hashover-reply > .hashover-balloon,\n .hashover .hashover-reply-form,\n .hashover .hashover-reply-form .hashover-inputs,\n@@ -90,11 +91,11 @@ conditions, unless such conditions are required by law.\n \tborder-bottom: 1px dashed #AAAAAA;\n }\n \n-.hashover #hashover-message {\n+.hashover .hashover-main-message {\n \tmargin-bottom: 24px;\n }\n \n-.hashover #hashover-message,\n+.hashover .hashover-main-message,\n .hashover .hashover-more-link {\n \t-moz-border-radius: 6px 6px 6px 6px;\n \t-webkit-border-radius: 6px 6px 6px 6px;\n@@ -136,7 +137,8 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-avatar a,\n .hashover .hashover-select-wrapper:before,\n .hashover .hashover-more-link,\n-.hashover .hashover-end-links {\n+.hashover .hashover-end-links,\n+.hashover .hashover-requires-login-message {\n \ttext-align: center;\n }\n \n@@ -194,7 +196,7 @@ conditions, unless such conditions are required by law.\n \tmargin-bottom: 0px;\n }\n \n-.hashover #hashover-form,\n+.hashover .hashover-form,\n .hashover .hashover-comment,\n .hashover .hashover-reply-form,\n .hashover .hashover-message,\n@@ -288,7 +290,7 @@ conditions, unless such conditions are required by law.\n \tposition: relative;\n }\n \n-.hashover #hashover-form .hashover-avatar-image {\n+.hashover .hashover-form .hashover-avatar-image {\n \twidth: 45px;\n \tpadding-right: 10px;\n }\n@@ -357,12 +359,13 @@ conditions, unless such conditions are required by law.\n \n .hashover .hashover-comment > .hashover-balloon,\n .hashover .hashover-edit-form,\n-.hashover #hashover-end-links,\n+.hashover .hashover-end-links,\n .hashover .hashover-border-top {\n \tborder-top: 1px solid #AAAAAA;\n }\n \n-.hashover .hashover-comment > .hashover-balloon {\n+.hashover .hashover-comment > .hashover-balloon,\n+.hashover .hashover-requires-login-message {\n \tpadding: 12px;\n \n \t-moz-border-radius: 6px;\n@@ -529,7 +532,7 @@ conditions, unless such conditions are required by law.\n \tcursor: pointer;\n }\n \n-.hashover #hashover-form .hashover-comment-label,\n+.hashover .hashover-form .hashover-comment-label,\n .hashover .hashover-comment-label:nth-child(2) {\n \tbackground-color: #FCFCFC;\n }\n@@ -599,7 +602,7 @@ conditions, unless such conditions are required by law.\n \tmargin-top: 3px;\n }\n \n-.hashover #hashover-count {\n+.hashover .hashover-count {\n \tfloat: left;\n }\n \n@@ -666,7 +669,8 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-avatar-image *,\n .hashover .hashover-avatar *,\n .hashover .hashover-comment > .hashover-balloon,\n-.hashover .hashover-reply .hashover-header {\n+.hashover .hashover-reply .hashover-header,\n+.hashover .hashover-comment .hashover-inputs {\n \tbackground-color: #FCFCFC;\n }\n \n@@ -1142,7 +1146,7 @@ conditions, unless such conditions are required by law.\n \ttransition: all 150ms linear 0ms;\n }\n \n-.hashover #hashover-end-links {\n+.hashover .hashover-end-links {\n \tmargin-top: -12px;\n \tpadding: 18px 0px 5px 0px;\n }"
    },
    {
      "sha": "648c2f14d83b88eec8ffc519a70fdb32f0b4482f",
      "filename": "hashover/themes/default/comments.css",
      "status": "modified",
      "additions": 22,
      "deletions": 18,
      "changes": 40,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default/comments.css",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default/comments.css",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/themes/default/comments.css?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -31,7 +31,7 @@ conditions, unless such conditions are required by law.\n }\n \n .hashover .hashover-hidden,\n-.hashover #hashover-requiredFields,\n+.hashover .hashover-required-fields,\n .hashover .hashover-notice > .hashover-balloon > .hashover-footer,\n .hashover .hashover-first .hashover-balloon,\n .hashover .hashover-first .hashover-avatar:before,\n@@ -40,20 +40,20 @@ conditions, unless such conditions are required by law.\n }\n \n .hashover,\n-#hashover-top-comments,\n-#hashover-sort-section,\n+.hashover-top-comments,\n+.hashover-sort-section,\n .hashover .hashover-inputs {\n \tclear: both;\n }\n \n-.hashover #hashover-form-section,\n-.hashover #hashover-popular-section,\n-.hashover #hashover-comments-section {\n+.hashover .hashover-form-section,\n+.hashover .hashover-popular-section,\n+.hashover .hashover-comments-section {\n \tmargin-bottom: 36px;\n }\n \n .hashover .hashover-title,\n-.hashover #hashover-count,\n+.hashover .hashover-count,\n .hashover .hashover-comment-name {\n \tdisplay: inline-block;\n \tfont-size: 18px;\n@@ -77,6 +77,7 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-reply > .hashover-balloon,\n .hashover .hashover-reply-form,\n .hashover .hashover-reply .hashover-header,\n+.hashover .hashover-requires-login-message,\n .hashover .hashover-form-footer {\n \tborder: 1px solid #AAAAAA;\n }\n@@ -126,7 +127,8 @@ conditions, unless such conditions are required by law.\n .hashover .hashover-select-wrapper:before,\n .hashover .hashover-disjoined:before,\n .hashover .hashover-more-link,\n-.hashover .hashover-end-links {\n+.hashover .hashover-end-links,\n+.hashover .hashover-requires-login-message {\n \ttext-align: center;\n }\n \n@@ -184,7 +186,7 @@ conditions, unless such conditions are required by law.\n \tmargin-bottom: 0px;\n }\n \n-.hashover #hashover-form,\n+.hashover .hashover-form,\n .hashover .hashover-comment,\n .hashover .hashover-reply-form,\n .hashover .hashover-message,\n@@ -266,7 +268,7 @@ conditions, unless such conditions are required by law.\n \tposition: relative;\n }\n \n-.hashover #hashover-form .hashover-avatar-image {\n+.hashover .hashover-form .hashover-avatar-image {\n \twidth: 45px;\n \tpadding-right: 10px;\n }\n@@ -322,7 +324,7 @@ conditions, unless such conditions are required by law.\n \n .hashover .hashover-comment > .hashover-balloon,\n .hashover .hashover-edit-form,\n-.hashover #hashover-end-links,\n+.hashover .hashover-end-links,\n .hashover .hashover-border-top {\n \tborder-top: 1px solid #AAAAAA;\n }\n@@ -488,7 +490,7 @@ conditions, unless such conditions are required by law.\n \tcursor: pointer;\n }\n \n-.hashover #hashover-form .hashover-comment-label,\n+.hashover .hashover-form .hashover-comment-label,\n .hashover .hashover-comment-label:nth-child(2) {\n \tbackground-color: #FCFCFC;\n }\n@@ -550,7 +552,7 @@ conditions, unless such conditions are required by law.\n \tmargin-top: 3px;\n }\n \n-.hashover #hashover-count {\n+.hashover .hashover-count {\n \tfloat: left;\n }\n \n@@ -614,14 +616,15 @@ conditions, unless such conditions are required by law.\n \tfont-size: 14px;\n }\n \n-.hashover #hashover-form,\n+.hashover .hashover-form,\n .hashover .hashover-comment,\n .hashover .hashover-reply-form {\n \tbackground-color: #F5F5F5;\n }\n \n-#hashover-form .hashover-inputs,\n-.hashover .hashover-comment > .hashover-header {\n+.hashover .hashover-form .hashover-inputs,\n+.hashover .hashover-comment > .hashover-header,\n+.hashover .hashover-requires-login-message {\n \t/* Light blue */\n \tbackground-color: #E5F0FF;\n \n@@ -645,7 +648,8 @@ conditions, unless such conditions are required by law.\n \tmargin-bottom: 12px;\n }\n \n-.hashover .hashover-comment > .hashover-header {\n+.hashover .hashover-comment > .hashover-header,\n+.hashover .hashover-requires-login-message {\n \tpadding: 12px;\n }\n \n@@ -1116,7 +1120,7 @@ conditions, unless such conditions are required by law.\n \ttransition: all 150ms linear 0ms;\n }\n \n-.hashover #hashover-end-links {\n+.hashover .hashover-end-links {\n \tmargin-top: -12px;\n \tpadding: 18px 0px 5px 0px;\n }"
    },
    {
      "sha": "4ad6e591a7fda04980ef902e8522ca413106a3ff",
      "filename": "hashover/themes/default/comments.html",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default/comments.html",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7/hashover/themes/default/comments.html",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/hashover/themes/default/comments.html?ref=01b9f6ecfa4dacffa8bbefa452fb5908fc9fdda7",
      "patch": "@@ -4,7 +4,7 @@\n </div>\n \n <div class=\"hashover-balloon\">\n-\t<div id=\"hashover-content-{permalink}\" class=\"hashover-content\">\n+\t<div id=\"{hashover}-content-{permalink}\" class=\"hashover-content\">\n \t\t{comment}\n \t</div>\n \n@@ -23,11 +23,11 @@\n \t\t</span>\n \t</div>\n \n-\t<span id=\"hashover-placeholder-edit-form-{permalink}\">\n+\t<span id=\"{hashover}-placeholder-edit-form-{permalink}\">\n \t\t{edit-form}\n \t</span>\n </div>\n \n-<span id=\"hashover-placeholder-reply-form-{permalink}\">\n+<span id=\"{hashover}-placeholder-reply-form-{permalink}\">\n \t{reply-form}\n </span>"
    }
  ]
}
