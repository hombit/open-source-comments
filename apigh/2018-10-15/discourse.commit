{
  "sha": "99d1ded3b3a2767617bbee9824e93eb57f135864",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo5OWQxZGVkM2IzYTI3Njc2MTdiYmVlOTgyNGU5M2ViNTdmMTM1ODY0",
  "commit": {
    "author": {
      "name": "Kyle Zhao",
      "email": "kzhao.sw@gmail.com",
      "date": "2018-10-15T15:32:52Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2018-10-15T15:32:52Z"
    },
    "message": "rename route `/javascripts` to `/theme-javascripts` (#6495)",
    "tree": {
      "sha": "4d8b822a120e8df9c65307d5e1e4a07d197bbb60",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/4d8b822a120e8df9c65307d5e1e4a07d197bbb60"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/99d1ded3b3a2767617bbee9824e93eb57f135864",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbxLMkCRBK7hj4Ov3rIwAAdHIIAJl5lj+WvZYgdE89UHUCG/gY\nACJy0NSuykEo1XnRtc9/AZkJ5JPSD2no57nQzeWIb2wDcxhL5UaQHq1zmpV3Xnml\nh0gwzIQVNyBwlYlPMLU1VkfCYcdonkEMpifhKqesLor3N7bVqW+5lvOarEz/WW18\nM2XrSt+VEQp5Vy13Tk/7EiTjwxCADO4NazOo5+1HLfxettNbOXuo6REEngwBsS/p\nKMvTdgBewHOrtpSg25METHNn1WGtlKU4gRn+E3YUZaZiNyu4EXep6XBRld5qWjd2\nlElY5DpbXvHoJwfu/Y+mnHmOdrGKXmV6rBp2dnNI1n3RHjrJzxHAme8f+wjsCUY=\n=gITo\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 4d8b822a120e8df9c65307d5e1e4a07d197bbb60\nparent c1042569912b465468725d26db19700d1e2773cb\nauthor Kyle Zhao <kzhao.sw@gmail.com> 1539617572 -0400\ncommitter GitHub <noreply@github.com> 1539617572 -0400\n\nrename route `/javascripts` to `/theme-javascripts` (#6495)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/99d1ded3b3a2767617bbee9824e93eb57f135864",
  "html_url": "https://github.com/discourse/discourse/commit/99d1ded3b3a2767617bbee9824e93eb57f135864",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/99d1ded3b3a2767617bbee9824e93eb57f135864/comments",
  "author": {
    "login": "xrav3nz",
    "id": 6376558,
    "node_id": "MDQ6VXNlcjYzNzY1NTg=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6376558?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xrav3nz",
    "html_url": "https://github.com/xrav3nz",
    "followers_url": "https://api.github.com/users/xrav3nz/followers",
    "following_url": "https://api.github.com/users/xrav3nz/following{/other_user}",
    "gists_url": "https://api.github.com/users/xrav3nz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xrav3nz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xrav3nz/subscriptions",
    "organizations_url": "https://api.github.com/users/xrav3nz/orgs",
    "repos_url": "https://api.github.com/users/xrav3nz/repos",
    "events_url": "https://api.github.com/users/xrav3nz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xrav3nz/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c1042569912b465468725d26db19700d1e2773cb",
      "url": "https://api.github.com/repos/discourse/discourse/commits/c1042569912b465468725d26db19700d1e2773cb",
      "html_url": "https://github.com/discourse/discourse/commit/c1042569912b465468725d26db19700d1e2773cb"
    }
  ],
  "stats": {
    "total": 18,
    "additions": 9,
    "deletions": 9
  },
  "files": [
    {
      "sha": "bbee8f480aa46855f0e6ec9c78a97478e049c17a",
      "filename": "app/controllers/theme_javascripts_controller.rb",
      "status": "renamed",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/99d1ded3b3a2767617bbee9824e93eb57f135864/app/controllers/theme_javascripts_controller.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/99d1ded3b3a2767617bbee9824e93eb57f135864/app/controllers/theme_javascripts_controller.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/controllers/theme_javascripts_controller.rb?ref=99d1ded3b3a2767617bbee9824e93eb57f135864",
      "patch": "@@ -1,5 +1,5 @@\n # frozen_string_literal: true\n-class JavascriptsController < ApplicationController\n+class ThemeJavascriptsController < ApplicationController\n   DISK_CACHE_PATH = \"#{Rails.root}/tmp/javascript-cache\"\n \n   skip_before_action(",
      "previous_filename": "app/controllers/javascripts_controller.rb"
    },
    {
      "sha": "e11c40feb298b220284d851389290b916a744c8b",
      "filename": "app/models/javascript_cache.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/99d1ded3b3a2767617bbee9824e93eb57f135864/app/models/javascript_cache.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/99d1ded3b3a2767617bbee9824e93eb57f135864/app/models/javascript_cache.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/javascript_cache.rb?ref=99d1ded3b3a2767617bbee9824e93eb57f135864",
      "patch": "@@ -7,7 +7,7 @@ class JavascriptCache < ActiveRecord::Base\n   before_save :update_digest\n \n   def url\n-    \"#{GlobalSetting.cdn_url}#{GlobalSetting.relative_url_root}/javascripts/#{digest}.js\"\n+    \"#{GlobalSetting.cdn_url}#{GlobalSetting.relative_url_root}/theme-javascripts/#{digest}.js\"\n   end\n \n   private"
    },
    {
      "sha": "b1a594471865b793f93c774885c32c1d476b5c7a",
      "filename": "config/nginx.sample.conf",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/99d1ded3b3a2767617bbee9824e93eb57f135864/config/nginx.sample.conf",
      "raw_url": "https://github.com/discourse/discourse/raw/99d1ded3b3a2767617bbee9824e93eb57f135864/config/nginx.sample.conf",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/nginx.sample.conf?ref=99d1ded3b3a2767617bbee9824e93eb57f135864",
      "patch": "@@ -191,7 +191,7 @@ server {\n     # This big block is needed so we can selectively enable\n     # acceleration for backups and avatars\n     # see note about repetition above\n-    location ~ ^/(letter_avatar/|user_avatar|highlight-js|stylesheets|favicon/proxied|service-worker) {\n+    location ~ ^/(letter_avatar/|user_avatar|highlight-js|stylesheets|theme-javascripts|favicon/proxied|service-worker) {\n       proxy_set_header Host $http_host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Request-Start \"t=${msec}\";"
    },
    {
      "sha": "3d072a4691aefb47c44f1c69b7cc332f6d1cee9b",
      "filename": "config/routes.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/99d1ded3b3a2767617bbee9824e93eb57f135864/config/routes.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/99d1ded3b3a2767617bbee9824e93eb57f135864/config/routes.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/routes.rb?ref=99d1ded3b3a2767617bbee9824e93eb57f135864",
      "patch": "@@ -450,7 +450,7 @@\n \n   get \"stylesheets/:name.css.map\" => \"stylesheets#show_source_map\", constraints: { name: /[-a-z0-9_]+/ }\n   get \"stylesheets/:name.css\" => \"stylesheets#show\", constraints: { name: /[-a-z0-9_]+/ }\n-  get \"javascripts/:digest.js\" => \"javascripts#show\", constraints: { digest: /\\h{40}/ }\n+  get \"theme-javascripts/:digest.js\" => \"theme_javascripts#show\", constraints: { digest: /\\h{40}/ }\n \n   post \"uploads\" => \"uploads#create\"\n   post \"uploads/lookup-urls\" => \"uploads#lookup_urls\""
    },
    {
      "sha": "fd186ffc176a77f8150405a71ac9b0f5485f9043",
      "filename": "spec/requests/theme_javascripts_controller_spec.rb",
      "status": "renamed",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/99d1ded3b3a2767617bbee9824e93eb57f135864/spec/requests/theme_javascripts_controller_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/99d1ded3b3a2767617bbee9824e93eb57f135864/spec/requests/theme_javascripts_controller_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/requests/theme_javascripts_controller_spec.rb?ref=99d1ded3b3a2767617bbee9824e93eb57f135864",
      "patch": "@@ -1,7 +1,7 @@\n # frozen_string_literal: true\n require 'rails_helper'\n \n-describe JavascriptsController do\n+describe ThemeJavascriptsController do\n   let(:theme) { Fabricate(:theme) }\n   let(:theme_field) { ThemeField.create!(theme: theme, target_id: 0, name: \"header\", value: \"<a>html</a>\") }\n   let(:javascript_cache) { JavascriptCache.create!(content: 'console.log(\"hello\");', theme_field: theme_field) }\n@@ -11,7 +11,7 @@ def update_digest_and_get(digest)\n       # actually set digest to make sure 404 is raised by router\n       javascript_cache.update_attributes(digest: digest)\n \n-      get \"/javascripts/#{digest}.js\"\n+      get \"/theme-javascripts/#{digest}.js\"\n     end\n \n     it 'only accepts 40-char hexdecimal digest name' do\n@@ -37,18 +37,18 @@ def update_digest_and_get(digest)\n     it 'considers the database record as the source of truth' do\n       clear_disk_cache\n \n-      get \"/javascripts/#{javascript_cache.digest}.js\"\n+      get \"/theme-javascripts/#{javascript_cache.digest}.js\"\n       expect(response.status).to eq(200)\n       expect(response.body).to eq(javascript_cache.content)\n \n       javascript_cache.destroy!\n \n-      get \"/javascripts/#{javascript_cache.digest}.js\"\n+      get \"/theme-javascripts/#{javascript_cache.digest}.js\"\n       expect(response.status).to eq(404)\n     end\n \n     def clear_disk_cache\n-      `rm #{JavascriptsController::DISK_CACHE_PATH}/*`\n+      `rm #{ThemeJavascriptsController::DISK_CACHE_PATH}/*`\n     end\n   end\n end",
      "previous_filename": "spec/requests/javascripts_controller_spec.rb"
    }
  ]
}
