{
  "sha": "d843320c4a438d5e4fbaa524a72a461e0cc1c112",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZDg0MzMyMGM0YTQzOGQ1ZTRmYmFhNTI0YTcyYTQ2MWUwY2MxYzExMg==",
  "commit": {
    "author": {
      "name": "Kim Gardner",
      "email": "kgardnr@gmail.com",
      "date": "2018-10-15T15:50:30Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2018-10-15T15:50:30Z"
    },
    "message": "Merge pull request #1976 from brycekahle/fix-admin-menu-visibility\n\ndo not show admin drawer unless user has access",
    "tree": {
      "sha": "d046b7ab85f4056f36ed7ef41f61b150bce80493",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/d046b7ab85f4056f36ed7ef41f61b150bce80493"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/d843320c4a438d5e4fbaa524a72a461e0cc1c112",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbxLdGCRBK7hj4Ov3rIwAAdHIIAA9gHVPdOFbmvOPuooZiSVA9\nD+Dfv4RjGSe1Bb4FoLduTdNpVFFepYJJNaMh1lDVTvX5/ldHz6P1/dSXerlBxyXR\n4A9fRHTmoBp1yp3TehCHgglEHuPyqST5ivXMQFu/nYpHkfGT0ESWZCZAci26iCX3\nlg+dVzNRwjMLuqjuAUgLC8iBWFzhORrd/QP+GR4+B9jwCwS+DUY2SNiV++tehKur\n4U4sThAvbjzlylRqLlSpptQAcigrYfD3mLw8Zp7hyTClA0cjNFzoCJCXi9k3eskb\nhB/eJ+zthzAlvtfdNmWGVIAtkO8qcQZVijKhqB8RzrQB/CfltXyKYuc8YNn3Kvw=\n=JFTc\n-----END PGP SIGNATURE-----\n",
      "payload": "tree d046b7ab85f4056f36ed7ef41f61b150bce80493\nparent b3749b93328c7cf2eb29c3c729c61e4542770d5c\nparent 0a9664d46460e7d5285c0df452f75d07f26c195b\nauthor Kim Gardner <kgardnr@gmail.com> 1539618630 +0100\ncommitter GitHub <noreply@github.com> 1539618630 +0100\n\nMerge pull request #1976 from brycekahle/fix-admin-menu-visibility\n\ndo not show admin drawer unless user has access"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/d843320c4a438d5e4fbaa524a72a461e0cc1c112",
  "html_url": "https://github.com/coralproject/talk/commit/d843320c4a438d5e4fbaa524a72a461e0cc1c112",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/d843320c4a438d5e4fbaa524a72a461e0cc1c112/comments",
  "author": {
    "login": "kgardnr",
    "id": 1077300,
    "node_id": "MDQ6VXNlcjEwNzczMDA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1077300?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgardnr",
    "html_url": "https://github.com/kgardnr",
    "followers_url": "https://api.github.com/users/kgardnr/followers",
    "following_url": "https://api.github.com/users/kgardnr/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgardnr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgardnr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgardnr/subscriptions",
    "organizations_url": "https://api.github.com/users/kgardnr/orgs",
    "repos_url": "https://api.github.com/users/kgardnr/repos",
    "events_url": "https://api.github.com/users/kgardnr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgardnr/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b3749b93328c7cf2eb29c3c729c61e4542770d5c",
      "url": "https://api.github.com/repos/coralproject/talk/commits/b3749b93328c7cf2eb29c3c729c61e4542770d5c",
      "html_url": "https://github.com/coralproject/talk/commit/b3749b93328c7cf2eb29c3c729c61e4542770d5c"
    },
    {
      "sha": "0a9664d46460e7d5285c0df452f75d07f26c195b",
      "url": "https://api.github.com/repos/coralproject/talk/commits/0a9664d46460e7d5285c0df452f75d07f26c195b",
      "html_url": "https://github.com/coralproject/talk/commit/0a9664d46460e7d5285c0df452f75d07f26c195b"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 15,
    "deletions": 7
  },
  "files": [
    {
      "sha": "2c463b28e30657c405d2cad977c3fba5df65829e",
      "filename": "client/coral-admin/src/components/Drawer.js",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/coralproject/talk/blob/d843320c4a438d5e4fbaa524a72a461e0cc1c112/client/coral-admin/src/components/Drawer.js",
      "raw_url": "https://github.com/coralproject/talk/raw/d843320c4a438d5e4fbaa524a72a461e0cc1c112/client/coral-admin/src/components/Drawer.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/Drawer.js?ref=d843320c4a438d5e4fbaa524a72a461e0cc1c112",
      "patch": "@@ -7,9 +7,9 @@ import t from 'coral-framework/services/i18n';\n import { can } from 'coral-framework/services/perms';\n import cn from 'classnames';\n \n-const CoralDrawer = ({ handleLogout, currentUser }) => (\n-  <Drawer className={cn('talk-admin-drawer-nav', styles.drawer)}>\n-    {currentUser && can(currentUser, 'ACCESS_ADMIN') ? (\n+const CoralDrawer = ({ handleLogout, currentUser }) =>\n+  currentUser && can(currentUser, 'ACCESS_ADMIN') ? (\n+    <Drawer className={cn('talk-admin-drawer-nav', styles.drawer)}>\n       <div>\n         <Navigation className={styles.nav}>\n           {can(currentUser, 'MODERATE_COMMENTS') && (\n@@ -48,9 +48,8 @@ const CoralDrawer = ({ handleLogout, currentUser }) => (\n           <span>{`v${process.env.VERSION}`}</span>\n         </Navigation>\n       </div>\n-    ) : null}\n-  </Drawer>\n-);\n+    </Drawer>\n+  ) : null;\n \n CoralDrawer.propTypes = {\n   handleLogout: PropTypes.func.isRequired,"
    },
    {
      "sha": "4d540a7b49ffcc546a9597fcd3c195d0ecdd6561",
      "filename": "test/e2e/page_objects/admin.js",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/d843320c4a438d5e4fbaa524a72a461e0cc1c112/test/e2e/page_objects/admin.js",
      "raw_url": "https://github.com/coralproject/talk/raw/d843320c4a438d5e4fbaa524a72a461e0cc1c112/test/e2e/page_objects/admin.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/test/e2e/page_objects/admin.js?ref=d843320c4a438d5e4fbaa524a72a461e0cc1c112",
      "patch": "@@ -30,6 +30,10 @@ module.exports = {\n           .waitForElementVisible('@signOutButton')\n           .click('@signOutButton');\n       },\n+      login(user) {\n+        this.expect.section('@login').to.be.visible;\n+        return this.section.login.login(user);\n+      },\n       navigateAndLogin(user) {\n         this.navigate().expect.section('@login').to.be.visible;\n         return this.section.login.login(user);"
    },
    {
      "sha": "4fab8b157c3edcb5ec15459e7d4010b2f4574884",
      "filename": "test/e2e/specs/02_admin.js",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/d843320c4a438d5e4fbaa524a72a461e0cc1c112/test/e2e/specs/02_admin.js",
      "raw_url": "https://github.com/coralproject/talk/raw/d843320c4a438d5e4fbaa524a72a461e0cc1c112/test/e2e/specs/02_admin.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/test/e2e/specs/02_admin.js?ref=d843320c4a438d5e4fbaa524a72a461e0cc1c112",
      "patch": "@@ -20,13 +20,18 @@ module.exports = {\n     client.end();\n   },\n \n+  'Admin goes to login': client => {\n+    const adminPage = client.page.admin();\n+    adminPage.navigate().expect.element('drawerButton').to.not.be.present;\n+  },\n+\n   'Admin logs in': client => {\n     const adminPage = client.page.admin();\n     const {\n       testData: { admin },\n     } = client.globals;\n \n-    adminPage.navigateAndLogin(admin);\n+    adminPage.login(admin);\n   },\n \n   'Admin goes to Stories': client => {"
    }
  ]
}
