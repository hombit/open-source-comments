{
  "sha": "c68dc10b2f1af8dfb60c9913aa13264a123f917e",
  "node_id": "MDY6Q29tbWl0MTA1Nzg5MzY1OmM2OGRjMTBiMmYxYWY4ZGZiNjBjOTkxM2FhMTMyNjRhMTIzZjkxN2U=",
  "commit": {
    "author": {
      "name": "Gregor Aisch",
      "email": "gka@users.noreply.github.com",
      "date": "2018-11-28T01:36:13Z"
    },
    "committer": {
      "name": "Gregor Aisch",
      "email": "gka@users.noreply.github.com",
      "date": "2018-11-28T01:36:13Z"
    },
    "message": "add better class to send-comment button (closes #70)",
    "tree": {
      "sha": "3f49de54824e2c23d5b52bac800f8d7b01a41d5b",
      "url": "https://api.github.com/repos/schn4ck/schnack/git/trees/3f49de54824e2c23d5b52bac800f8d7b01a41d5b"
    },
    "url": "https://api.github.com/repos/schn4ck/schnack/git/commits/c68dc10b2f1af8dfb60c9913aa13264a123f917e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/schn4ck/schnack/commits/c68dc10b2f1af8dfb60c9913aa13264a123f917e",
  "html_url": "https://github.com/schn4ck/schnack/commit/c68dc10b2f1af8dfb60c9913aa13264a123f917e",
  "comments_url": "https://api.github.com/repos/schn4ck/schnack/commits/c68dc10b2f1af8dfb60c9913aa13264a123f917e/comments",
  "author": {
    "login": "gka",
    "id": 617518,
    "node_id": "MDQ6VXNlcjYxNzUxOA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/617518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gka",
    "html_url": "https://github.com/gka",
    "followers_url": "https://api.github.com/users/gka/followers",
    "following_url": "https://api.github.com/users/gka/following{/other_user}",
    "gists_url": "https://api.github.com/users/gka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gka/subscriptions",
    "organizations_url": "https://api.github.com/users/gka/orgs",
    "repos_url": "https://api.github.com/users/gka/repos",
    "events_url": "https://api.github.com/users/gka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gka/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "gka",
    "id": 617518,
    "node_id": "MDQ6VXNlcjYxNzUxOA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/617518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gka",
    "html_url": "https://github.com/gka",
    "followers_url": "https://api.github.com/users/gka/followers",
    "following_url": "https://api.github.com/users/gka/following{/other_user}",
    "gists_url": "https://api.github.com/users/gka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gka/subscriptions",
    "organizations_url": "https://api.github.com/users/gka/orgs",
    "repos_url": "https://api.github.com/users/gka/repos",
    "events_url": "https://api.github.com/users/gka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gka/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b879108fabdb27dbf718f83197c0b71ac3004879",
      "url": "https://api.github.com/repos/schn4ck/schnack/commits/b879108fabdb27dbf718f83197c0b71ac3004879",
      "html_url": "https://github.com/schn4ck/schnack/commit/b879108fabdb27dbf718f83197c0b71ac3004879"
    }
  ],
  "stats": {
    "total": 6,
    "additions": 3,
    "deletions": 3
  },
  "files": [
    {
      "sha": "5557163e9bdb1c2bbbb69ac76b232d0be8753178",
      "filename": "build/client.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/schn4ck/schnack/blob/c68dc10b2f1af8dfb60c9913aa13264a123f917e/build/client.js",
      "raw_url": "https://github.com/schn4ck/schnack/raw/c68dc10b2f1af8dfb60c9913aa13264a123f917e/build/client.js",
      "contents_url": "https://api.github.com/repos/schn4ck/schnack/contents/build/client.js?ref=c68dc10b2f1af8dfb60c9913aa13264a123f917e",
      "patch": "@@ -1 +1 @@\n-!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):n.Schnack=t()}(this,function(){\"use strict\";function n(n){var t,e=\"\";n.user?(e+=\"\\n    \",n.user.admin&&(e+='\\n    <div class=\"schnack-settings\">\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"true\">'+(null==(t=n.partials.UnMute)?\"\":t)+'</button>\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"false\">'+(null==(t=n.partials.Mute)?\"\":t)+\"</button>\\n    </div>\\n    \"),e+='\\n<div class=\"schnack-login-status\">\\n    '+(null==(t=n.partials.LoginStatus.replace(\"%USER%\",n.user.name))?\"\":t)+'\\n</div>\\n<div class=\"schnack-above\">\\n    <div class=\"schnack-form\">\\n        <textarea class=\"schnack-body\" placeholder=\"'+(null==(t=n.partials.PostComment)?\"\":t)+'\"></textarea>\\n        <blockquote class=\"schnack-body\" style=\"display:none\"></blockquote>\\n        <br>\\n        <button class=\"schnack-preview\">'+(null==(t=n.partials.Preview)?\"\":t)+'</button>\\n        <button style=\"display:none\" class=\"schnack-write\">'+(null==(t=n.partials.Edit)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-button\">'+(null==(t=n.partials.SendComment)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-cancel-reply\" style=\"display:none\">'+(null==(t=n.partials.Cancel)?\"\":t)+\"</button>\\n    </div>\\n</div>\\n\"):(e+='\\n<div class=\"schnack-signin\">\\n'+(null==(t=n.partials.SignInVia)?\"\":t)+\"<br>\\n\",n.auth.forEach(function(a,s){e+=\"\\n    \"+(null==(t=s?n.partials.Or:\"\")?\"\":t)+'<button class=\"schnack-signin-'+(null==(t=a.id)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=a.id)?\"\":t)+'\"></i> '+(null==(t=a.name)?\"\":t)+\"</button>\\n\"}),e+=\"\\n\"),e+=\"\\n</div>\\n\";var a=[];return n.replies={},n.comments.forEach(function(t){t.reply_to?(n.replies[t.reply_to]||(n.replies[t.reply_to]=[]),n.replies[t.reply_to].push(t)):a.push(t)}),n.comments=a,e+=\"\\n\"+(null==(t=n.comments_tpl(n))?\"\":t)+'\\n<style type=\"text/css\">\\n.schnack-action > * { pointer-events: none; }\\n</style>\\n'}function t(n){var t,e=\"\";return e+='<ul class=\"schnack-comments\">\\n    ',n.comments.forEach(function(a){e+='\\n        <li id=\"comment-'+(null==(t=a.id)?\"\":t)+'\" data-id=\"'+(null==(t=a.id)?\"\":t)+'\" class=\"schnack-comment',a.approved||a.trusted||(e+=\" schnack-not-approved\"),e+='\">\\n            <div class=\"schnack-comment-inner\">\\n                <div class=\"schnack-dateline\">\\n                    <span class=\"schnack-author\">',a.author_url&&(e+='<a href=\"'+(null==(t=a.author_url)?\"\":t)+'\" target=\"_blank\">'),e+=null==(t=a.display_name||a.name)?\"\":t,a.author_url&&(e+=\"</a>\"),e+=\"</span>\\n                    \",n.user&&n.user.admin&&!a.trusted&&[\"trust\",\"block\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.user_id)?\"\":t)+'\" data-class=\"user\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+='\\n                    <span class=\"schnack-date\"><a href=\"#comment-'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=a.created_at_s)?\"\":t)+'</a></span>\\n                </div>\\n                <blockquote class=\"schnack-body\">\\n                    '+(null==(t=a.comment)?\"\":t)+\"\\n                </blockquote>\\n                \",a.approved||a.trusted?n.user&&(e+='\\n                <button class=\"schnack-reply\" data-reply-to=\"'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=n.partials.Reply)?\"\":t)+\"</button>\\n                \"):(e+='\\n                <div class=\"schnack-awaiting-approval\">\\n                    ',n.user&&n.user.admin&&[\"approve\",\"reject\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.id)?\"\":t)+'\" data-class=\"comment\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+=\"\\n                    \"+(null==(t=n.user.admin?n.partials.AdminApproval:n.partials.WaitingForApproval)?\"\":t)+\"\\n                </div>\\n                \"),e+=\"\\n            </div>\\n            \",n.replies[a.id]&&(n.comments=n.replies[a.id],e+=\"\\n            \"+(null==(t=n.comments_tpl(n))?\"\":t)+\"\\n            \"),e+=\"\\n        </li>\\n    \"}),e+=\"\\n</ul>\\n\"}var e=\"function\"==typeof fetch?fetch.bind():function(n,t){return t=t||{},new Promise(function(e,a){function s(){var n,t=[],e=[],a={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(s,i,o){t.push(i=i.toLowerCase()),e.push([i,o]),n=a[i],a[i]=n?n+\",\"+o:o}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:s,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return e},get:function(n){return a[n.toLowerCase()]},has:function(n){return n.toLowerCase()in a}}}}var i=new XMLHttpRequest;i.open(t.method||\"get\",n,!0);for(var o in t.headers)i.setRequestHeader(o,t.headers[o]);i.withCredentials=\"include\"==t.credentials,i.onload=function(){e(s())},i.onerror=a,i.send(t.body||null)})},a=function(n){return document.querySelector(n)},s=function(n){return document.querySelectorAll(n)},i=function(n){this.options=n,this.options.endpoint=n.host+\"/comments/\"+n.slug,this.initialized=!1,this.firstLoad=!0;var t=new URL(n.host);\"localhost\"!==t.hostname&&(document.domain=t.hostname.split(\".\").slice(1).join(\".\")),this.refresh()};return i.prototype.refresh=function(){var i=this,o=this.options,c=o.target,l=o.slug,r=o.host,u=o.endpoint,d=o.partials;e(u,{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(n){return n.json()}).then(function(o){o.comments_tpl=t,o.partials=d,a(c).innerHTML=n(o);var h=a(c+\" div.schnack-above\"),p=a(c+\" div.schnack-form\"),f=a(c+\" textarea.schnack-body\"),m=a(c+\" .schnack-form blockquote.schnack-body\"),y=window.localStorage.getItem(\"schnack-draft-\"+l);y&&f&&(f.value=y);var v=a(c+\" .schnack-button\"),k=a(c+\" .schnack-preview\"),b=a(c+\" .schnack-write\"),g=a(c+\" .schnack-cancel-reply\"),w=s(c+\" .schnack-reply\");if(v&&(v.addEventListener(\"click\",function(n){var t=f.value;e(u,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t,replyTo:p.dataset.reply})}).then(function(n){return n.json()}).then(function(n){f.value=\"\",window.localStorage.setItem(\"schnack-draft-\"+l,f.value),n.id&&(i.firstLoad=!0,window.location.hash=\"#comment-\"+n.id),i.refresh()})}),k.addEventListener(\"click\",function(n){var t=f.value;f.style.display=\"none\",k.style.display=\"none\",m.style.display=\"block\",b.style.display=\"inline\",e(r+\"/markdown\",{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t})}).then(function(n){return n.json()}).then(function(n){m.innerHTML=n.html})}),b.addEventListener(\"click\",function(n){f.style.display=\"inline\",k.style.display=\"inline\",m.style.display=\"none\",b.style.display=\"none\"}),f.addEventListener(\"keyup\",function(){window.localStorage.setItem(\"schnack-draft-\"+l,f.value)}),w.forEach(function(n){n.addEventListener(\"click\",function(){p.dataset.reply=n.dataset.replyTo,g.style.display=\"inline-block\",n.parentElement.appendChild(p)})}),g.addEventListener(\"click\",function(){h.appendChild(p),delete p.dataset.reply,g.style.display=\"none\"})),o.user){var L=a(\"a.schnack-signout\");L&&L.addEventListener(\"click\",function(n){n.preventDefault(),e(r+\"/signout\",{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(){return i.refresh()})})}else o.auth.forEach(function(n){var t=a(c+\" .schnack-signin-\"+n.id);t&&t.addEventListener(\"click\",function(t){var a=function(t){void 0===t&&(t=\"\");var e=window.open(r+\"/auth/\"+n.id+(t?\"/d/\"+t:\"\"),n.name+\" Sign-In\",\"resizable,scrollbars,status,width=600,height=500\");window.__schnack_wait_for_oauth=function(){e.close(),i.refresh()}};if(\"mastodon\"==n.id){var s=window.prompt(\"Please enter the domain name of the Mastodon instance you want to sign in with:\",\"mastodon.social\");e(\"https://\"+s+\"/api/v1/instance\").then(function(n){return n.json()}).then(function(n){n.uri==s?a(s):alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')}).catch(function(n){alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')})}else a()})});if(o.user&&o.user.admin){if(!i.initialized){var E=document.createElement(\"script\");E.setAttribute(\"src\",r+\"/push.js\"),document.head.appendChild(E),i.initialized=!0}var S=function(n){var t=n.target.dataset;e(r+\"/\"+t.class+\"/\"+t.target+\"/\"+t.action,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:\"\"}).then(function(){return i.refresh()})};document.querySelectorAll(\".schnack-action\").forEach(function(n){n.addEventListener(\"click\",S)})}if(i.firstLoad&&window.location.hash.match(/^#comment-\\d+$/)){var _=document.querySelector(window.location.hash);_.scrollIntoView(),_.classList.add(\"schnack-highlight\"),i.firstLoad=!1}})},i});\n+!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):n.Schnack=t()}(this,function(){\"use strict\";function n(n){var t,e=\"\";n.user?(e+=\"\\n    \",n.user.admin&&(e+='\\n    <div class=\"schnack-settings\">\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"true\">'+(null==(t=n.partials.UnMute)?\"\":t)+'</button>\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"false\">'+(null==(t=n.partials.Mute)?\"\":t)+\"</button>\\n    </div>\\n    \"),e+='\\n<div class=\"schnack-login-status\">\\n    '+(null==(t=n.partials.LoginStatus.replace(\"%USER%\",n.user.name))?\"\":t)+'\\n</div>\\n<div class=\"schnack-above\">\\n    <div class=\"schnack-form\">\\n        <textarea class=\"schnack-body\" placeholder=\"'+(null==(t=n.partials.PostComment)?\"\":t)+'\"></textarea>\\n        <blockquote class=\"schnack-body\" style=\"display:none\"></blockquote>\\n        <br>\\n        <button class=\"schnack-preview\">'+(null==(t=n.partials.Preview)?\"\":t)+'</button>\\n        <button style=\"display:none\" class=\"schnack-write\">'+(null==(t=n.partials.Edit)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-send-comment schnack-button\">'+(null==(t=n.partials.SendComment)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-cancel-reply\" style=\"display:none\">'+(null==(t=n.partials.Cancel)?\"\":t)+\"</button>\\n    </div>\\n</div>\\n\"):(e+='\\n<div class=\"schnack-signin\">\\n'+(null==(t=n.partials.SignInVia)?\"\":t)+\"<br>\\n\",n.auth.forEach(function(a,s){e+=\"\\n    \"+(null==(t=s?n.partials.Or:\"\")?\"\":t)+'<button class=\"schnack-signin-'+(null==(t=a.id)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=a.id)?\"\":t)+'\"></i> '+(null==(t=a.name)?\"\":t)+\"</button>\\n\"}),e+=\"\\n\"),e+=\"\\n</div>\\n\";var a=[];return n.replies={},n.comments.forEach(function(t){t.reply_to?(n.replies[t.reply_to]||(n.replies[t.reply_to]=[]),n.replies[t.reply_to].push(t)):a.push(t)}),n.comments=a,e+=\"\\n\"+(null==(t=n.comments_tpl(n))?\"\":t)+'\\n<style type=\"text/css\">\\n.schnack-action > * { pointer-events: none; }\\n</style>\\n'}function t(n){var t,e=\"\";return e+='<ul class=\"schnack-comments\">\\n    ',n.comments.forEach(function(a){e+='\\n        <li id=\"comment-'+(null==(t=a.id)?\"\":t)+'\" data-id=\"'+(null==(t=a.id)?\"\":t)+'\" class=\"schnack-comment',a.approved||a.trusted||(e+=\" schnack-not-approved\"),e+='\">\\n            <div class=\"schnack-comment-inner\">\\n                <div class=\"schnack-dateline\">\\n                    <span class=\"schnack-author\">',a.author_url&&(e+='<a href=\"'+(null==(t=a.author_url)?\"\":t)+'\" target=\"_blank\">'),e+=null==(t=a.display_name||a.name)?\"\":t,a.author_url&&(e+=\"</a>\"),e+=\"</span>\\n                    \",n.user&&n.user.admin&&!a.trusted&&[\"trust\",\"block\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.user_id)?\"\":t)+'\" data-class=\"user\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+='\\n                    <span class=\"schnack-date\"><a href=\"#comment-'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=a.created_at_s)?\"\":t)+'</a></span>\\n                </div>\\n                <blockquote class=\"schnack-body\">\\n                    '+(null==(t=a.comment)?\"\":t)+\"\\n                </blockquote>\\n                \",a.approved||a.trusted?n.user&&(e+='\\n                <button class=\"schnack-reply\" data-reply-to=\"'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=n.partials.Reply)?\"\":t)+\"</button>\\n                \"):(e+='\\n                <div class=\"schnack-awaiting-approval\">\\n                    ',n.user&&n.user.admin&&[\"approve\",\"reject\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.id)?\"\":t)+'\" data-class=\"comment\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+=\"\\n                    \"+(null==(t=n.user.admin?n.partials.AdminApproval:n.partials.WaitingForApproval)?\"\":t)+\"\\n                </div>\\n                \"),e+=\"\\n            </div>\\n            \",n.replies[a.id]&&(n.comments=n.replies[a.id],e+=\"\\n            \"+(null==(t=n.comments_tpl(n))?\"\":t)+\"\\n            \"),e+=\"\\n        </li>\\n    \"}),e+=\"\\n</ul>\\n\"}var e=\"function\"==typeof fetch?fetch.bind():function(n,t){return t=t||{},new Promise(function(e,a){function s(){var n,t=[],e=[],a={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(s,i,o){t.push(i=i.toLowerCase()),e.push([i,o]),n=a[i],a[i]=n?n+\",\"+o:o}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:s,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return e},get:function(n){return a[n.toLowerCase()]},has:function(n){return n.toLowerCase()in a}}}}var i=new XMLHttpRequest;i.open(t.method||\"get\",n,!0);for(var o in t.headers)i.setRequestHeader(o,t.headers[o]);i.withCredentials=\"include\"==t.credentials,i.onload=function(){e(s())},i.onerror=a,i.send(t.body||null)})},a=function(n){return document.querySelector(n)},s=function(n){return document.querySelectorAll(n)},i=function(n){this.options=n,this.options.endpoint=n.host+\"/comments/\"+n.slug,this.initialized=!1,this.firstLoad=!0;var t=new URL(n.host);\"localhost\"!==t.hostname&&(document.domain=t.hostname.split(\".\").slice(1).join(\".\")),this.refresh()};return i.prototype.refresh=function(){var i=this,o=this.options,c=o.target,l=o.slug,r=o.host,u=o.endpoint,d=o.partials;e(u,{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(n){return n.json()}).then(function(o){o.comments_tpl=t,o.partials=d,a(c).innerHTML=n(o);var h=a(c+\" div.schnack-above\"),p=a(c+\" div.schnack-form\"),f=a(c+\" textarea.schnack-body\"),m=a(c+\" .schnack-form blockquote.schnack-body\"),y=window.localStorage.getItem(\"schnack-draft-\"+l);y&&f&&(f.value=y);var v=a(c+\" .schnack-button\"),k=a(c+\" .schnack-preview\"),b=a(c+\" .schnack-write\"),g=a(c+\" .schnack-cancel-reply\"),w=s(c+\" .schnack-reply\");if(v&&(v.addEventListener(\"click\",function(n){var t=f.value;e(u,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t,replyTo:p.dataset.reply})}).then(function(n){return n.json()}).then(function(n){f.value=\"\",window.localStorage.setItem(\"schnack-draft-\"+l,f.value),n.id&&(i.firstLoad=!0,window.location.hash=\"#comment-\"+n.id),i.refresh()})}),k.addEventListener(\"click\",function(n){var t=f.value;f.style.display=\"none\",k.style.display=\"none\",m.style.display=\"block\",b.style.display=\"inline\",e(r+\"/markdown\",{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t})}).then(function(n){return n.json()}).then(function(n){m.innerHTML=n.html})}),b.addEventListener(\"click\",function(n){f.style.display=\"inline\",k.style.display=\"inline\",m.style.display=\"none\",b.style.display=\"none\"}),f.addEventListener(\"keyup\",function(){window.localStorage.setItem(\"schnack-draft-\"+l,f.value)}),w.forEach(function(n){n.addEventListener(\"click\",function(){p.dataset.reply=n.dataset.replyTo,g.style.display=\"inline-block\",n.parentElement.appendChild(p)})}),g.addEventListener(\"click\",function(){h.appendChild(p),delete p.dataset.reply,g.style.display=\"none\"})),o.user){var L=a(\"a.schnack-signout\");L&&L.addEventListener(\"click\",function(n){n.preventDefault(),e(r+\"/signout\",{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(){return i.refresh()})})}else o.auth.forEach(function(n){var t=a(c+\" .schnack-signin-\"+n.id);t&&t.addEventListener(\"click\",function(t){var a=function(t){void 0===t&&(t=\"\");var e=window.open(r+\"/auth/\"+n.id+(t?\"/d/\"+t:\"\"),n.name+\" Sign-In\",\"resizable,scrollbars,status,width=600,height=500\");window.__schnack_wait_for_oauth=function(){e.close(),i.refresh()}};if(\"mastodon\"==n.id){var s=window.prompt(\"Please enter the domain name of the Mastodon instance you want to sign in with:\",\"mastodon.social\");e(\"https://\"+s+\"/api/v1/instance\").then(function(n){return n.json()}).then(function(n){n.uri==s?a(s):alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')}).catch(function(n){alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')})}else a()})});if(o.user&&o.user.admin){if(!i.initialized){var E=document.createElement(\"script\");E.setAttribute(\"src\",r+\"/push.js\"),document.head.appendChild(E),i.initialized=!0}var S=function(n){var t=n.target.dataset;e(r+\"/\"+t.class+\"/\"+t.target+\"/\"+t.action,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:\"\"}).then(function(){return i.refresh()})};document.querySelectorAll(\".schnack-action\").forEach(function(n){n.addEventListener(\"click\",S)})}if(i.firstLoad&&window.location.hash.match(/^#comment-\\d+$/)){var _=document.querySelector(window.location.hash);_.scrollIntoView(),_.classList.add(\"schnack-highlight\"),i.firstLoad=!1}})},i});"
    },
    {
      "sha": "7fd6f18531cc82726029d100882d73becd096f33",
      "filename": "build/embed.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/schn4ck/schnack/blob/c68dc10b2f1af8dfb60c9913aa13264a123f917e/build/embed.js",
      "raw_url": "https://github.com/schn4ck/schnack/raw/c68dc10b2f1af8dfb60c9913aa13264a123f917e/build/embed.js",
      "contents_url": "https://api.github.com/repos/schn4ck/schnack/contents/build/embed.js?ref=c68dc10b2f1af8dfb60c9913aa13264a123f917e",
      "patch": "@@ -1 +1 @@\n-!function(){\"use strict\";function n(n){var t,e=\"\";n.user?(e+=\"\\n    \",n.user.admin&&(e+='\\n    <div class=\"schnack-settings\">\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"true\">'+(null==(t=n.partials.UnMute)?\"\":t)+'</button>\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"false\">'+(null==(t=n.partials.Mute)?\"\":t)+\"</button>\\n    </div>\\n    \"),e+='\\n<div class=\"schnack-login-status\">\\n    '+(null==(t=n.partials.LoginStatus.replace(\"%USER%\",n.user.name))?\"\":t)+'\\n</div>\\n<div class=\"schnack-above\">\\n    <div class=\"schnack-form\">\\n        <textarea class=\"schnack-body\" placeholder=\"'+(null==(t=n.partials.PostComment)?\"\":t)+'\"></textarea>\\n        <blockquote class=\"schnack-body\" style=\"display:none\"></blockquote>\\n        <br>\\n        <button class=\"schnack-preview\">'+(null==(t=n.partials.Preview)?\"\":t)+'</button>\\n        <button style=\"display:none\" class=\"schnack-write\">'+(null==(t=n.partials.Edit)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-button\">'+(null==(t=n.partials.SendComment)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-cancel-reply\" style=\"display:none\">'+(null==(t=n.partials.Cancel)?\"\":t)+\"</button>\\n    </div>\\n</div>\\n\"):(e+='\\n<div class=\"schnack-signin\">\\n'+(null==(t=n.partials.SignInVia)?\"\":t)+\"<br>\\n\",n.auth.forEach(function(a,s){e+=\"\\n    \"+(null==(t=s?n.partials.Or:\"\")?\"\":t)+'<button class=\"schnack-signin-'+(null==(t=a.id)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=a.id)?\"\":t)+'\"></i> '+(null==(t=a.name)?\"\":t)+\"</button>\\n\"}),e+=\"\\n\"),e+=\"\\n</div>\\n\";var a=[];return n.replies={},n.comments.forEach(function(t){t.reply_to?(n.replies[t.reply_to]||(n.replies[t.reply_to]=[]),n.replies[t.reply_to].push(t)):a.push(t)}),n.comments=a,e+=\"\\n\"+(null==(t=n.comments_tpl(n))?\"\":t)+'\\n<style type=\"text/css\">\\n.schnack-action > * { pointer-events: none; }\\n</style>\\n'}function t(n){var t,e=\"\";return e+='<ul class=\"schnack-comments\">\\n    ',n.comments.forEach(function(a){e+='\\n        <li id=\"comment-'+(null==(t=a.id)?\"\":t)+'\" data-id=\"'+(null==(t=a.id)?\"\":t)+'\" class=\"schnack-comment',a.approved||a.trusted||(e+=\" schnack-not-approved\"),e+='\">\\n            <div class=\"schnack-comment-inner\">\\n                <div class=\"schnack-dateline\">\\n                    <span class=\"schnack-author\">',a.author_url&&(e+='<a href=\"'+(null==(t=a.author_url)?\"\":t)+'\" target=\"_blank\">'),e+=null==(t=a.display_name||a.name)?\"\":t,a.author_url&&(e+=\"</a>\"),e+=\"</span>\\n                    \",n.user&&n.user.admin&&!a.trusted&&[\"trust\",\"block\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.user_id)?\"\":t)+'\" data-class=\"user\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+='\\n                    <span class=\"schnack-date\"><a href=\"#comment-'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=a.created_at_s)?\"\":t)+'</a></span>\\n                </div>\\n                <blockquote class=\"schnack-body\">\\n                    '+(null==(t=a.comment)?\"\":t)+\"\\n                </blockquote>\\n                \",a.approved||a.trusted?n.user&&(e+='\\n                <button class=\"schnack-reply\" data-reply-to=\"'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=n.partials.Reply)?\"\":t)+\"</button>\\n                \"):(e+='\\n                <div class=\"schnack-awaiting-approval\">\\n                    ',n.user&&n.user.admin&&[\"approve\",\"reject\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.id)?\"\":t)+'\" data-class=\"comment\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+=\"\\n                    \"+(null==(t=n.user.admin?n.partials.AdminApproval:n.partials.WaitingForApproval)?\"\":t)+\"\\n                </div>\\n                \"),e+=\"\\n            </div>\\n            \",n.replies[a.id]&&(n.comments=n.replies[a.id],e+=\"\\n            \"+(null==(t=n.comments_tpl(n))?\"\":t)+\"\\n            \"),e+=\"\\n        </li>\\n    \"}),e+=\"\\n</ul>\\n\"}var e=\"function\"==typeof fetch?fetch.bind():function(n,t){return t=t||{},new Promise(function(e,a){function s(){var n,t=[],e=[],a={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(s,i,o){t.push(i=i.toLowerCase()),e.push([i,o]),n=a[i],a[i]=n?n+\",\"+o:o}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:s,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return e},get:function(n){return a[n.toLowerCase()]},has:function(n){return n.toLowerCase()in a}}}}var i=new XMLHttpRequest;i.open(t.method||\"get\",n,!0);for(var o in t.headers)i.setRequestHeader(o,t.headers[o]);i.withCredentials=\"include\"==t.credentials,i.onload=function(){e(s())},i.onerror=a,i.send(t.body||null)})},a=function(n){return document.querySelector(n)},s=function(n){return document.querySelectorAll(n)},i=function(n){this.options=n,this.options.endpoint=n.host+\"/comments/\"+n.slug,this.initialized=!1,this.firstLoad=!0;var t=new URL(n.host);\"localhost\"!==t.hostname&&(document.domain=t.hostname.split(\".\").slice(1).join(\".\")),this.refresh()};i.prototype.refresh=function(){var i=this,o=this.options,c=o.target,l=o.slug,r=o.host,u=o.endpoint,d=o.partials;e(u,{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(n){return n.json()}).then(function(o){o.comments_tpl=t,o.partials=d,a(c).innerHTML=n(o);var h=a(c+\" div.schnack-above\"),p=a(c+\" div.schnack-form\"),m=a(c+\" textarea.schnack-body\"),f=a(c+\" .schnack-form blockquote.schnack-body\"),v=window.localStorage.getItem(\"schnack-draft-\"+l);v&&m&&(m.value=v);var k=a(c+\" .schnack-button\"),y=a(c+\" .schnack-preview\"),b=a(c+\" .schnack-write\"),g=a(c+\" .schnack-cancel-reply\"),w=s(c+\" .schnack-reply\");if(k&&(k.addEventListener(\"click\",function(n){var t=m.value;e(u,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t,replyTo:p.dataset.reply})}).then(function(n){return n.json()}).then(function(n){m.value=\"\",window.localStorage.setItem(\"schnack-draft-\"+l,m.value),n.id&&(i.firstLoad=!0,window.location.hash=\"#comment-\"+n.id),i.refresh()})}),y.addEventListener(\"click\",function(n){var t=m.value;m.style.display=\"none\",y.style.display=\"none\",f.style.display=\"block\",b.style.display=\"inline\",e(r+\"/markdown\",{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t})}).then(function(n){return n.json()}).then(function(n){f.innerHTML=n.html})}),b.addEventListener(\"click\",function(n){m.style.display=\"inline\",y.style.display=\"inline\",f.style.display=\"none\",b.style.display=\"none\"}),m.addEventListener(\"keyup\",function(){window.localStorage.setItem(\"schnack-draft-\"+l,m.value)}),w.forEach(function(n){n.addEventListener(\"click\",function(){p.dataset.reply=n.dataset.replyTo,g.style.display=\"inline-block\",n.parentElement.appendChild(p)})}),g.addEventListener(\"click\",function(){h.appendChild(p),delete p.dataset.reply,g.style.display=\"none\"})),o.user){var S=a(\"a.schnack-signout\");S&&S.addEventListener(\"click\",function(n){n.preventDefault(),e(r+\"/signout\",{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(){return i.refresh()})})}else o.auth.forEach(function(n){var t=a(c+\" .schnack-signin-\"+n.id);t&&t.addEventListener(\"click\",function(t){var a=function(t){void 0===t&&(t=\"\");var e=window.open(r+\"/auth/\"+n.id+(t?\"/d/\"+t:\"\"),n.name+\" Sign-In\",\"resizable,scrollbars,status,width=600,height=500\");window.__schnack_wait_for_oauth=function(){e.close(),i.refresh()}};if(\"mastodon\"==n.id){var s=window.prompt(\"Please enter the domain name of the Mastodon instance you want to sign in with:\",\"mastodon.social\");e(\"https://\"+s+\"/api/v1/instance\").then(function(n){return n.json()}).then(function(n){n.uri==s?a(s):alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')}).catch(function(n){alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')})}else a()})});if(o.user&&o.user.admin){if(!i.initialized){var E=document.createElement(\"script\");E.setAttribute(\"src\",r+\"/push.js\"),document.head.appendChild(E),i.initialized=!0}var L=function(n){var t=n.target.dataset;e(r+\"/\"+t.class+\"/\"+t.target+\"/\"+t.action,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:\"\"}).then(function(){return i.refresh()})};document.querySelectorAll(\".schnack-action\").forEach(function(n){n.addEventListener(\"click\",L)})}if(i.firstLoad&&window.location.hash.match(/^#comment-\\d+$/)){var _=document.querySelector(window.location.hash);_.scrollIntoView(),_.classList.add(\"schnack-highlight\"),i.firstLoad=!1}})},function(){var n=document.querySelector(\"script[data-schnack-target]\");if(!n)return console.warn(\"schnack script tag needs some data attributes\");var t=n.dataset,e=t.schnackSlug,a=new URL(n.getAttribute(\"src\")),s=a.protocol+\"//\"+a.host,o={Preview:\"Preview\",Edit:\"Edit\",SendComment:\"Send comment\",Cancel:\"Cancel\",Or:\"Or\",Mute:\"mute notifications\",UnMute:\"unmute\",PostComment:\"Post a comment. Markdown is supported!\",AdminApproval:\"This comment is still waiting for your approval\",WaitingForApproval:\"Your comment is still waiting for approval by the site owner\",SignInVia:\"To post a comment you need to sign in via\",Reply:\"<i class='icon schnack-icon-reply'></i> reply\",LoginStatus:\"(signed in as <span class='schnack-user'>@%USER%</span> :: <a class='schnack-signout' href='#'>sign out</a>)\"};Object.keys(o).forEach(function(t){n.dataset[\"schnackPartial\"+t]&&(o[t]=n.dataset[\"schnackPartial\"+t])}),new i({target:t.schnackTarget,slug:e,host:s,partials:o})}()}();\n+!function(){\"use strict\";function n(n){var t,e=\"\";n.user?(e+=\"\\n    \",n.user.admin&&(e+='\\n    <div class=\"schnack-settings\">\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"true\">'+(null==(t=n.partials.UnMute)?\"\":t)+'</button>\\n        <button class=\"schnack-action\" data-target=\"notification\" data-class=\"setting\" data-action=\"false\">'+(null==(t=n.partials.Mute)?\"\":t)+\"</button>\\n    </div>\\n    \"),e+='\\n<div class=\"schnack-login-status\">\\n    '+(null==(t=n.partials.LoginStatus.replace(\"%USER%\",n.user.name))?\"\":t)+'\\n</div>\\n<div class=\"schnack-above\">\\n    <div class=\"schnack-form\">\\n        <textarea class=\"schnack-body\" placeholder=\"'+(null==(t=n.partials.PostComment)?\"\":t)+'\"></textarea>\\n        <blockquote class=\"schnack-body\" style=\"display:none\"></blockquote>\\n        <br>\\n        <button class=\"schnack-preview\">'+(null==(t=n.partials.Preview)?\"\":t)+'</button>\\n        <button style=\"display:none\" class=\"schnack-write\">'+(null==(t=n.partials.Edit)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-send-comment schnack-button\">'+(null==(t=n.partials.SendComment)?\"\":t)+'</button>&nbsp;\\n        <button class=\"schnack-cancel-reply\" style=\"display:none\">'+(null==(t=n.partials.Cancel)?\"\":t)+\"</button>\\n    </div>\\n</div>\\n\"):(e+='\\n<div class=\"schnack-signin\">\\n'+(null==(t=n.partials.SignInVia)?\"\":t)+\"<br>\\n\",n.auth.forEach(function(a,s){e+=\"\\n    \"+(null==(t=s?n.partials.Or:\"\")?\"\":t)+'<button class=\"schnack-signin-'+(null==(t=a.id)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=a.id)?\"\":t)+'\"></i> '+(null==(t=a.name)?\"\":t)+\"</button>\\n\"}),e+=\"\\n\"),e+=\"\\n</div>\\n\";var a=[];return n.replies={},n.comments.forEach(function(t){t.reply_to?(n.replies[t.reply_to]||(n.replies[t.reply_to]=[]),n.replies[t.reply_to].push(t)):a.push(t)}),n.comments=a,e+=\"\\n\"+(null==(t=n.comments_tpl(n))?\"\":t)+'\\n<style type=\"text/css\">\\n.schnack-action > * { pointer-events: none; }\\n</style>\\n'}function t(n){var t,e=\"\";return e+='<ul class=\"schnack-comments\">\\n    ',n.comments.forEach(function(a){e+='\\n        <li id=\"comment-'+(null==(t=a.id)?\"\":t)+'\" data-id=\"'+(null==(t=a.id)?\"\":t)+'\" class=\"schnack-comment',a.approved||a.trusted||(e+=\" schnack-not-approved\"),e+='\">\\n            <div class=\"schnack-comment-inner\">\\n                <div class=\"schnack-dateline\">\\n                    <span class=\"schnack-author\">',a.author_url&&(e+='<a href=\"'+(null==(t=a.author_url)?\"\":t)+'\" target=\"_blank\">'),e+=null==(t=a.display_name||a.name)?\"\":t,a.author_url&&(e+=\"</a>\"),e+=\"</span>\\n                    \",n.user&&n.user.admin&&!a.trusted&&[\"trust\",\"block\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.user_id)?\"\":t)+'\" data-class=\"user\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+='\\n                    <span class=\"schnack-date\"><a href=\"#comment-'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=a.created_at_s)?\"\":t)+'</a></span>\\n                </div>\\n                <blockquote class=\"schnack-body\">\\n                    '+(null==(t=a.comment)?\"\":t)+\"\\n                </blockquote>\\n                \",a.approved||a.trusted?n.user&&(e+='\\n                <button class=\"schnack-reply\" data-reply-to=\"'+(null==(t=a.id)?\"\":t)+'\">'+(null==(t=n.partials.Reply)?\"\":t)+\"</button>\\n                \"):(e+='\\n                <div class=\"schnack-awaiting-approval\">\\n                    ',n.user&&n.user.admin&&[\"approve\",\"reject\"].forEach(function(n){e+='\\n                    <button class=\"schnack-action\" data-target=\"'+(null==(t=a.id)?\"\":t)+'\" data-class=\"comment\" data-action=\"'+(null==(t=n)?\"\":t)+'\"><i class=\"icon schnack-icon-'+(null==(t=n)?\"\":t)+'\"></i> <span>'+(null==(t=n)?\"\":t)+\"</span></button>\\n                    \"}),e+=\"\\n                    \"+(null==(t=n.user.admin?n.partials.AdminApproval:n.partials.WaitingForApproval)?\"\":t)+\"\\n                </div>\\n                \"),e+=\"\\n            </div>\\n            \",n.replies[a.id]&&(n.comments=n.replies[a.id],e+=\"\\n            \"+(null==(t=n.comments_tpl(n))?\"\":t)+\"\\n            \"),e+=\"\\n        </li>\\n    \"}),e+=\"\\n</ul>\\n\"}var e=\"function\"==typeof fetch?fetch.bind():function(n,t){return t=t||{},new Promise(function(e,a){function s(){var n,t=[],e=[],a={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(s,i,o){t.push(i=i.toLowerCase()),e.push([i,o]),n=a[i],a[i]=n?n+\",\"+o:o}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:s,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return e},get:function(n){return a[n.toLowerCase()]},has:function(n){return n.toLowerCase()in a}}}}var i=new XMLHttpRequest;i.open(t.method||\"get\",n,!0);for(var o in t.headers)i.setRequestHeader(o,t.headers[o]);i.withCredentials=\"include\"==t.credentials,i.onload=function(){e(s())},i.onerror=a,i.send(t.body||null)})},a=function(n){return document.querySelector(n)},s=function(n){return document.querySelectorAll(n)},i=function(n){this.options=n,this.options.endpoint=n.host+\"/comments/\"+n.slug,this.initialized=!1,this.firstLoad=!0;var t=new URL(n.host);\"localhost\"!==t.hostname&&(document.domain=t.hostname.split(\".\").slice(1).join(\".\")),this.refresh()};i.prototype.refresh=function(){var i=this,o=this.options,c=o.target,l=o.slug,r=o.host,u=o.endpoint,d=o.partials;e(u,{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(n){return n.json()}).then(function(o){o.comments_tpl=t,o.partials=d,a(c).innerHTML=n(o);var h=a(c+\" div.schnack-above\"),p=a(c+\" div.schnack-form\"),m=a(c+\" textarea.schnack-body\"),f=a(c+\" .schnack-form blockquote.schnack-body\"),v=window.localStorage.getItem(\"schnack-draft-\"+l);v&&m&&(m.value=v);var k=a(c+\" .schnack-button\"),y=a(c+\" .schnack-preview\"),b=a(c+\" .schnack-write\"),g=a(c+\" .schnack-cancel-reply\"),w=s(c+\" .schnack-reply\");if(k&&(k.addEventListener(\"click\",function(n){var t=m.value;e(u,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t,replyTo:p.dataset.reply})}).then(function(n){return n.json()}).then(function(n){m.value=\"\",window.localStorage.setItem(\"schnack-draft-\"+l,m.value),n.id&&(i.firstLoad=!0,window.location.hash=\"#comment-\"+n.id),i.refresh()})}),y.addEventListener(\"click\",function(n){var t=m.value;m.style.display=\"none\",y.style.display=\"none\",f.style.display=\"block\",b.style.display=\"inline\",e(r+\"/markdown\",{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:t})}).then(function(n){return n.json()}).then(function(n){f.innerHTML=n.html})}),b.addEventListener(\"click\",function(n){m.style.display=\"inline\",y.style.display=\"inline\",f.style.display=\"none\",b.style.display=\"none\"}),m.addEventListener(\"keyup\",function(){window.localStorage.setItem(\"schnack-draft-\"+l,m.value)}),w.forEach(function(n){n.addEventListener(\"click\",function(){p.dataset.reply=n.dataset.replyTo,g.style.display=\"inline-block\",n.parentElement.appendChild(p)})}),g.addEventListener(\"click\",function(){h.appendChild(p),delete p.dataset.reply,g.style.display=\"none\"})),o.user){var S=a(\"a.schnack-signout\");S&&S.addEventListener(\"click\",function(n){n.preventDefault(),e(r+\"/signout\",{credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}}).then(function(){return i.refresh()})})}else o.auth.forEach(function(n){var t=a(c+\" .schnack-signin-\"+n.id);t&&t.addEventListener(\"click\",function(t){var a=function(t){void 0===t&&(t=\"\");var e=window.open(r+\"/auth/\"+n.id+(t?\"/d/\"+t:\"\"),n.name+\" Sign-In\",\"resizable,scrollbars,status,width=600,height=500\");window.__schnack_wait_for_oauth=function(){e.close(),i.refresh()}};if(\"mastodon\"==n.id){var s=window.prompt(\"Please enter the domain name of the Mastodon instance you want to sign in with:\",\"mastodon.social\");e(\"https://\"+s+\"/api/v1/instance\").then(function(n){return n.json()}).then(function(n){n.uri==s?a(s):alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')}).catch(function(n){alert('We could not find a Mastodon instance at \"'+s+'\". Please try again.')})}else a()})});if(o.user&&o.user.admin){if(!i.initialized){var E=document.createElement(\"script\");E.setAttribute(\"src\",r+\"/push.js\"),document.head.appendChild(E),i.initialized=!0}var L=function(n){var t=n.target.dataset;e(r+\"/\"+t.class+\"/\"+t.target+\"/\"+t.action,{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:\"\"}).then(function(){return i.refresh()})};document.querySelectorAll(\".schnack-action\").forEach(function(n){n.addEventListener(\"click\",L)})}if(i.firstLoad&&window.location.hash.match(/^#comment-\\d+$/)){var _=document.querySelector(window.location.hash);_.scrollIntoView(),_.classList.add(\"schnack-highlight\"),i.firstLoad=!1}})},function(){var n=document.querySelector(\"script[data-schnack-target]\");if(!n)return console.warn(\"schnack script tag needs some data attributes\");var t=n.dataset,e=t.schnackSlug,a=new URL(n.getAttribute(\"src\")),s=a.protocol+\"//\"+a.host,o={Preview:\"Preview\",Edit:\"Edit\",SendComment:\"Send comment\",Cancel:\"Cancel\",Or:\"Or\",Mute:\"mute notifications\",UnMute:\"unmute\",PostComment:\"Post a comment. Markdown is supported!\",AdminApproval:\"This comment is still waiting for your approval\",WaitingForApproval:\"Your comment is still waiting for approval by the site owner\",SignInVia:\"To post a comment you need to sign in via\",Reply:\"<i class='icon schnack-icon-reply'></i> reply\",LoginStatus:\"(signed in as <span class='schnack-user'>@%USER%</span> :: <a class='schnack-signout' href='#'>sign out</a>)\"};Object.keys(o).forEach(function(t){n.dataset[\"schnackPartial\"+t]&&(o[t]=n.dataset[\"schnackPartial\"+t])}),new i({target:t.schnackTarget,slug:e,host:s,partials:o})}()}();"
    },
    {
      "sha": "02a4db9a84c8f4696e39e66327ad8c164663228d",
      "filename": "src/embed/schnack.jst.html",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/schn4ck/schnack/blob/c68dc10b2f1af8dfb60c9913aa13264a123f917e/src/embed/schnack.jst.html",
      "raw_url": "https://github.com/schn4ck/schnack/raw/c68dc10b2f1af8dfb60c9913aa13264a123f917e/src/embed/schnack.jst.html",
      "contents_url": "https://api.github.com/repos/schn4ck/schnack/contents/src/embed/schnack.jst.html?ref=c68dc10b2f1af8dfb60c9913aa13264a123f917e",
      "patch": "@@ -15,7 +15,7 @@\n         <br>\n         <button class=\"schnack-preview\"><%= data.partials.Preview %></button>\n         <button style=\"display:none\" class=\"schnack-write\"><%= data.partials.Edit %></button>&nbsp;\n-        <button class=\"schnack-button\"><%= data.partials.SendComment %></button>&nbsp;\n+        <button class=\"schnack-send-comment schnack-button\"><%= data.partials.SendComment %></button>&nbsp;\n         <button class=\"schnack-cancel-reply\" style=\"display:none\"><%= data.partials.Cancel %></button>\n     </div>\n </div>"
    }
  ]
}
