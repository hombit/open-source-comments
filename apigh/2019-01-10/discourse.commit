{
  "sha": "a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODphOGZmNGE4YTc4M2Y0ZmU5MzliNDZhZGNmZjZmYmNlNTc2MDQ4ZjRl",
  "commit": {
    "author": {
      "name": "Vinoth Kannan",
      "email": "vinothkannan@vinkas.com",
      "date": "2019-01-10T15:49:53Z"
    },
    "committer": {
      "name": "Vinoth Kannan",
      "email": "vinothkannan@vinkas.com",
      "date": "2019-01-10T15:49:53Z"
    },
    "message": "UX: search all categories even if category-chooser is scoped to particular category",
    "tree": {
      "sha": "d662304c74509ab242fb16d779613ad7441cd2ee",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/d662304c74509ab242fb16d779613ad7441cd2ee"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
    "comment_count": 2,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
  "html_url": "https://github.com/discourse/discourse/commit/a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/a8ff4a8a783f4fe939b46adcff6fbce576048f4e/comments",
  "author": {
    "login": "vinothkannans",
    "id": 9372109,
    "node_id": "MDQ6VXNlcjkzNzIxMDk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/9372109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vinothkannans",
    "html_url": "https://github.com/vinothkannans",
    "followers_url": "https://api.github.com/users/vinothkannans/followers",
    "following_url": "https://api.github.com/users/vinothkannans/following{/other_user}",
    "gists_url": "https://api.github.com/users/vinothkannans/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vinothkannans/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vinothkannans/subscriptions",
    "organizations_url": "https://api.github.com/users/vinothkannans/orgs",
    "repos_url": "https://api.github.com/users/vinothkannans/repos",
    "events_url": "https://api.github.com/users/vinothkannans/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vinothkannans/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vinothkannans",
    "id": 9372109,
    "node_id": "MDQ6VXNlcjkzNzIxMDk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/9372109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vinothkannans",
    "html_url": "https://github.com/vinothkannans",
    "followers_url": "https://api.github.com/users/vinothkannans/followers",
    "following_url": "https://api.github.com/users/vinothkannans/following{/other_user}",
    "gists_url": "https://api.github.com/users/vinothkannans/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vinothkannans/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vinothkannans/subscriptions",
    "organizations_url": "https://api.github.com/users/vinothkannans/orgs",
    "repos_url": "https://api.github.com/users/vinothkannans/repos",
    "events_url": "https://api.github.com/users/vinothkannans/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vinothkannans/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "978cc0cfca1100391259a5011e36a7a5bd61fcbd",
      "url": "https://api.github.com/repos/discourse/discourse/commits/978cc0cfca1100391259a5011e36a7a5bd61fcbd",
      "html_url": "https://github.com/discourse/discourse/commit/978cc0cfca1100391259a5011e36a7a5bd61fcbd"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 14,
    "deletions": 1
  },
  "files": [
    {
      "sha": "87dcf59afe52bab6c46b3a1341c2b1bbd075c50b",
      "filename": "app/assets/javascripts/select-kit/components/category-chooser.js.es6",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/a8ff4a8a783f4fe939b46adcff6fbce576048f4e/app/assets/javascripts/select-kit/components/category-chooser.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/a8ff4a8a783f4fe939b46adcff6fbce576048f4e/app/assets/javascripts/select-kit/components/category-chooser.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/components/category-chooser.js.es6?ref=a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
      "patch": "@@ -30,6 +30,12 @@ export default ComboBoxComponent.extend({\n       return computedContent;\n     }\n \n+    if (this.get(\"scopedCategoryId\")) {\n+      computedContent = this.categoriesByScope().map(c =>\n+        this.computeContentItem(c)\n+      );\n+    }\n+\n     const _matchFunction = (f, text) => {\n       return this._normalize(text).indexOf(f) > -1;\n     };\n@@ -111,11 +117,14 @@ export default ComboBoxComponent.extend({\n   },\n \n   computeContent() {\n+    return this.categoriesByScope(this.get(\"scopedCategoryId\"));\n+  },\n+\n+  categoriesByScope(scopedCategoryId = null) {\n     const categories = Discourse.SiteSettings.fixed_category_positions_on_create\n       ? Category.list()\n       : Category.listByActivity();\n \n-    let scopedCategoryId = this.get(\"scopedCategoryId\");\n     if (scopedCategoryId) {\n       const scopedCat = Category.findById(scopedCategoryId);\n       scopedCategoryId ="
    },
    {
      "sha": "ba02fb51a043e411f53916f33f68e9b555110e1d",
      "filename": "test/javascripts/components/category-chooser-test.js.es6",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/a8ff4a8a783f4fe939b46adcff6fbce576048f4e/test/javascripts/components/category-chooser-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/a8ff4a8a783f4fe939b46adcff6fbce576048f4e/test/javascripts/components/category-chooser-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/components/category-chooser-test.js.es6?ref=a8ff4a8a783f4fe939b46adcff6fbce576048f4e",
      "patch": "@@ -71,6 +71,10 @@ componentTest(\"with scopedCategoryId\", {\n       26\n     );\n     assert.equal(this.get(\"subject\").rows().length, 2);\n+\n+    await this.get(\"subject\").fillInFilter(\"dev\");\n+\n+    assert.equal(this.get(\"subject\").rows().length, 3);\n   }\n });\n "
    }
  ]
}
