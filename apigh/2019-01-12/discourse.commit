{
  "sha": "47cbfb14989bcf828c66b211827cb9355214e71a",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo0N2NiZmIxNDk4OWJjZjgyOGM2NmIyMTE4MjdjYjkzNTUyMTRlNzFh",
  "commit": {
    "author": {
      "name": "Penar Musaraj",
      "email": "pmusaraj@gmail.com",
      "date": "2019-01-12T14:59:12Z"
    },
    "committer": {
      "name": "Penar Musaraj",
      "email": "pmusaraj@gmail.com",
      "date": "2019-01-12T14:59:12Z"
    },
    "message": "FEATURE: plugin support for custom icons\n\nPlugins can now add their own SVG sprites in \"plugin-name/svg-icons/\".\n\nExample: save the following as \"plugin-name/svg-icons/plugin-icons.svg\"\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n  <symbol id=\"testplugin-compress\" viewBox=\"0 0 1792 1792\">\n    <path d=\"M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z\"></path>\n  </symbol>\n</svg>\n```\nand then register the icon by adding this in plugin.rb\n```\nregister_svg_icon \"testplugin-compress\"\n```",
    "tree": {
      "sha": "da97ecec02353abfbf6bb681bc14f5c9b1c1645b",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/da97ecec02353abfbf6bb681bc14f5c9b1c1645b"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/47cbfb14989bcf828c66b211827cb9355214e71a",
    "comment_count": 1,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/47cbfb14989bcf828c66b211827cb9355214e71a",
  "html_url": "https://github.com/discourse/discourse/commit/47cbfb14989bcf828c66b211827cb9355214e71a",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/47cbfb14989bcf828c66b211827cb9355214e71a/comments",
  "author": {
    "login": "pmusaraj",
    "id": 368961,
    "node_id": "MDQ6VXNlcjM2ODk2MQ==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/368961?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pmusaraj",
    "html_url": "https://github.com/pmusaraj",
    "followers_url": "https://api.github.com/users/pmusaraj/followers",
    "following_url": "https://api.github.com/users/pmusaraj/following{/other_user}",
    "gists_url": "https://api.github.com/users/pmusaraj/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pmusaraj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pmusaraj/subscriptions",
    "organizations_url": "https://api.github.com/users/pmusaraj/orgs",
    "repos_url": "https://api.github.com/users/pmusaraj/repos",
    "events_url": "https://api.github.com/users/pmusaraj/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pmusaraj/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "pmusaraj",
    "id": 368961,
    "node_id": "MDQ6VXNlcjM2ODk2MQ==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/368961?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pmusaraj",
    "html_url": "https://github.com/pmusaraj",
    "followers_url": "https://api.github.com/users/pmusaraj/followers",
    "following_url": "https://api.github.com/users/pmusaraj/following{/other_user}",
    "gists_url": "https://api.github.com/users/pmusaraj/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pmusaraj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pmusaraj/subscriptions",
    "organizations_url": "https://api.github.com/users/pmusaraj/orgs",
    "repos_url": "https://api.github.com/users/pmusaraj/repos",
    "events_url": "https://api.github.com/users/pmusaraj/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pmusaraj/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "93eb0a0690fc8972c857ac2d7472b5f8d95c7953",
      "url": "https://api.github.com/repos/discourse/discourse/commits/93eb0a0690fc8972c857ac2d7472b5f8d95c7953",
      "html_url": "https://github.com/discourse/discourse/commit/93eb0a0690fc8972c857ac2d7472b5f8d95c7953"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 5,
    "deletions": 2
  },
  "files": [
    {
      "sha": "f4a3335c8d626959df9c934533dfd624d7d4b23d",
      "filename": "lib/svg_sprite/svg_sprite.rb",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/discourse/discourse/blob/47cbfb14989bcf828c66b211827cb9355214e71a/lib/svg_sprite/svg_sprite.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/47cbfb14989bcf828c66b211827cb9355214e71a/lib/svg_sprite/svg_sprite.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/svg_sprite/svg_sprite.rb?ref=47cbfb14989bcf828c66b211827cb9355214e71a",
      "patch": "@@ -185,6 +185,9 @@ module SvgSprite\n \n   FA_ICON_MAP = { 'far fa-' => 'far-', 'fab fa-' => 'fab-', 'fas fa-' => '', 'fa-' => '' }\n \n+  SVG_SPRITE_PATHS = Dir.glob([\"#{Rails.root}/vendor/assets/svg-icons/**/*.svg\",\n+                               \"#{Rails.root}/plugins/*/svg-icons/*.svg\"])\n+\n   def self.svg_sprite_cache\n     @svg_sprite_cache ||= DistributedCache.new('svg_sprite')\n   end\n@@ -229,7 +232,7 @@ def self.bundle\n <svg xmlns='http://www.w3.org/2000/svg' style='display: none;'>\n \"\"\".dup\n \n-    Dir[\"#{Rails.root}/vendor/assets/svg-icons/**/*.svg\"].each do |fname|\n+    SVG_SPRITE_PATHS.each do |fname|\n       svg_file = Nokogiri::XML(File.open(fname)) do |config|\n         config.options = Nokogiri::XML::ParseOptions::NOBLANKS\n       end\n@@ -253,7 +256,7 @@ def self.bundle\n   def self.search(searched_icon)\n     searched_icon = process(searched_icon.dup)\n \n-    Dir[\"#{Rails.root}/vendor/assets/svg-icons/**/*.svg\"].each do |fname|\n+    SVG_SPRITE_PATHS.each do |fname|\n       svg_file = Nokogiri::XML(File.open(fname))\n       svg_filename = \"#{File.basename(fname, \".svg\")}\"\n "
    }
  ]
}
