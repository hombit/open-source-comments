{
  "sha": "39983f9d951c140e4f7f7d25d8d79015bcaecc6b",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODozOTk4M2Y5ZDk1MWMxNDBlNGY3ZjdkMjVkOGQ3OTAxNWJjYWVjYzZi",
  "commit": {
    "author": {
      "name": "Florian Heidenreich",
      "email": "fheidenreich@gmail.com",
      "date": "2019-01-14T10:07:18Z"
    },
    "committer": {
      "name": "Robin Ward",
      "email": "robin.ward@gmail.com",
      "date": "2019-01-14T15:29:00Z"
    },
    "message": "FIX: list staff users within the last month",
    "tree": {
      "sha": "76309568926fe475462cf5bd68d5992e1b3fcb0e",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/76309568926fe475462cf5bd68d5992e1b3fcb0e"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/39983f9d951c140e4f7f7d25d8d79015bcaecc6b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/39983f9d951c140e4f7f7d25d8d79015bcaecc6b",
  "html_url": "https://github.com/discourse/discourse/commit/39983f9d951c140e4f7f7d25d8d79015bcaecc6b",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/39983f9d951c140e4f7f7d25d8d79015bcaecc6b/comments",
  "author": {
    "login": "fheidenreich",
    "id": 2421992,
    "node_id": "MDQ6VXNlcjI0MjE5OTI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/2421992?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fheidenreich",
    "html_url": "https://github.com/fheidenreich",
    "followers_url": "https://api.github.com/users/fheidenreich/followers",
    "following_url": "https://api.github.com/users/fheidenreich/following{/other_user}",
    "gists_url": "https://api.github.com/users/fheidenreich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fheidenreich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fheidenreich/subscriptions",
    "organizations_url": "https://api.github.com/users/fheidenreich/orgs",
    "repos_url": "https://api.github.com/users/fheidenreich/repos",
    "events_url": "https://api.github.com/users/fheidenreich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fheidenreich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "eviltrout",
    "id": 17538,
    "node_id": "MDQ6VXNlcjE3NTM4",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17538?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eviltrout",
    "html_url": "https://github.com/eviltrout",
    "followers_url": "https://api.github.com/users/eviltrout/followers",
    "following_url": "https://api.github.com/users/eviltrout/following{/other_user}",
    "gists_url": "https://api.github.com/users/eviltrout/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eviltrout/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eviltrout/subscriptions",
    "organizations_url": "https://api.github.com/users/eviltrout/orgs",
    "repos_url": "https://api.github.com/users/eviltrout/repos",
    "events_url": "https://api.github.com/users/eviltrout/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eviltrout/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0cb2b7d60380446f1f7151a48932b0a2cdadcf18",
      "url": "https://api.github.com/repos/discourse/discourse/commits/0cb2b7d60380446f1f7151a48932b0a2cdadcf18",
      "html_url": "https://github.com/discourse/discourse/commit/0cb2b7d60380446f1f7151a48932b0a2cdadcf18"
    }
  ],
  "stats": {
    "total": 2,
    "additions": 1,
    "deletions": 1
  },
  "files": [
    {
      "sha": "78f4fb6c74ac131b5f4d80160a62db4bfa6533e6",
      "filename": "lib/tasks/users.rake",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/39983f9d951c140e4f7f7d25d8d79015bcaecc6b/lib/tasks/users.rake",
      "raw_url": "https://github.com/discourse/discourse/raw/39983f9d951c140e4f7f7d25d8d79015bcaecc6b/lib/tasks/users.rake",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/tasks/users.rake?ref=39983f9d951c140e4f7f7d25d8d79015bcaecc6b",
      "patch": "@@ -174,7 +174,7 @@ end\n desc \"List all users which have been staff in the last month\"\n task \"users:list_recent_staff\" => :environment do\n   current_staff_ids = User.human_users.where(\"admin OR moderator\").pluck(:id)\n-  recent_actions = UserHistory.where(\"created_at < ?\", 1.month.ago)\n+  recent_actions = UserHistory.where(\"created_at > ?\", 1.month.ago)\n   recent_admin_ids = recent_actions.where(action: UserHistory.actions[:revoke_admin]).pluck(:target_user_id)\n   recent_moderator_ids = recent_actions.where(action: UserHistory.actions[:revoke_moderation]).pluck(:target_user_id)\n "
    }
  ]
}
