{
  "sha": "a834245683367d1995e3edc5d6317d58962e4e80",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODphODM0MjQ1NjgzMzY3ZDE5OTVlM2VkYzVkNjMxN2Q1ODk2MmU0ZTgw",
  "commit": {
    "author": {
      "name": "Robin Ward",
      "email": "robin.ward@gmail.com",
      "date": "2019-01-22T16:26:52Z"
    },
    "committer": {
      "name": "Robin Ward",
      "email": "robin.ward@gmail.com",
      "date": "2019-01-22T16:26:52Z"
    },
    "message": "FIX: Keep tags when switching to shared draft",
    "tree": {
      "sha": "27320f03c1d24e6a45297343cee6c406c2c16a75",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/27320f03c1d24e6a45297343cee6c406c2c16a75"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/a834245683367d1995e3edc5d6317d58962e4e80",
    "comment_count": 1,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/a834245683367d1995e3edc5d6317d58962e4e80",
  "html_url": "https://github.com/discourse/discourse/commit/a834245683367d1995e3edc5d6317d58962e4e80",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/a834245683367d1995e3edc5d6317d58962e4e80/comments",
  "author": {
    "login": "eviltrout",
    "id": 17538,
    "node_id": "MDQ6VXNlcjE3NTM4",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17538?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eviltrout",
    "html_url": "https://github.com/eviltrout",
    "followers_url": "https://api.github.com/users/eviltrout/followers",
    "following_url": "https://api.github.com/users/eviltrout/following{/other_user}",
    "gists_url": "https://api.github.com/users/eviltrout/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eviltrout/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eviltrout/subscriptions",
    "organizations_url": "https://api.github.com/users/eviltrout/orgs",
    "repos_url": "https://api.github.com/users/eviltrout/repos",
    "events_url": "https://api.github.com/users/eviltrout/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eviltrout/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "eviltrout",
    "id": 17538,
    "node_id": "MDQ6VXNlcjE3NTM4",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17538?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eviltrout",
    "html_url": "https://github.com/eviltrout",
    "followers_url": "https://api.github.com/users/eviltrout/followers",
    "following_url": "https://api.github.com/users/eviltrout/following{/other_user}",
    "gists_url": "https://api.github.com/users/eviltrout/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eviltrout/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eviltrout/subscriptions",
    "organizations_url": "https://api.github.com/users/eviltrout/orgs",
    "repos_url": "https://api.github.com/users/eviltrout/repos",
    "events_url": "https://api.github.com/users/eviltrout/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eviltrout/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f32de88dfcd1930773154588e2c4f2d90f074f4b",
      "url": "https://api.github.com/repos/discourse/discourse/commits/f32de88dfcd1930773154588e2c4f2d90f074f4b",
      "html_url": "https://github.com/discourse/discourse/commit/f32de88dfcd1930773154588e2c4f2d90f074f4b"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 9,
    "deletions": 0
  },
  "files": [
    {
      "sha": "be9902dc4abbbd13d7dabb71ff3bdcbb14e2e77b",
      "filename": "app/assets/javascripts/select-kit/components/composer-actions.js.es6",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/a834245683367d1995e3edc5d6317d58962e4e80/app/assets/javascripts/select-kit/components/composer-actions.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/a834245683367d1995e3edc5d6317d58962e4e80/app/assets/javascripts/select-kit/components/composer-actions.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/select-kit/components/composer-actions.js.es6?ref=a834245683367d1995e3edc5d6317d58962e4e80",
      "patch": "@@ -276,6 +276,7 @@ export default DropdownSelectBoxComponent.extend({\n     options.action = action;\n     options.categoryId = this.get(\"composerModel.categoryId\");\n     options.topicTitle = this.get(\"composerModel.title\");\n+    options.tags = this.get(\"composerModel.tags\");\n     options.skipDraftCheck = true;\n     this._openComposer(options);\n   },"
    },
    {
      "sha": "9ee3868bbcf5b85087ac3b2c58595e95108360b6",
      "filename": "test/javascripts/acceptance/composer-actions-test.js.es6",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/a834245683367d1995e3edc5d6317d58962e4e80/test/javascripts/acceptance/composer-actions-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/a834245683367d1995e3edc5d6317d58962e4e80/test/javascripts/acceptance/composer-actions-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/acceptance/composer-actions-test.js.es6?ref=a834245683367d1995e3edc5d6317d58962e4e80",
      "patch": "@@ -7,6 +7,9 @@ acceptance(\"Composer Actions\", {\n   settings: {\n     enable_whispers: true\n   },\n+  site: {\n+    can_tag_topics: true\n+  },\n   beforeEach() {\n     _clearSnapshots();\n   }\n@@ -131,16 +134,21 @@ QUnit.test(\"shared draft\", async assert => {\n   toggleCheckDraftPopup(true);\n \n   const composerActions = selectKit(\".composer-actions\");\n+  const tags = selectKit(\".mini-tag-chooser\");\n \n   await visit(\"/\");\n   await click(\"#create-topic\");\n \n   await fillIn(\"#reply-title\", \"This is the new text for the title\");\n   await fillIn(\".d-editor-input\", \"This is the new text for the post\");\n+  await tags.expand();\n+  await tags.selectRowByValue(\"monkey\");\n \n   await composerActions.expand();\n   await composerActions.selectRowByValue(\"shared_draft\");\n \n+  assert.equal(tags.header().value(), \"monkey\", \"tags are not reset\");\n+\n   assert.equal(\n     find(\"#reply-control .btn-primary.create .d-button-label\").text(),\n     I18n.t(\"composer.create_shared_draft\")"
    }
  ]
}
