{
  "sha": "645844694afec77425f079857166eba54373b1fc",
  "node_id": "MDY6Q29tbWl0MTA1NjMzMjI6NjQ1ODQ0Njk0YWZlYzc3NDI1ZjA3OTg1NzE2NmViYTU0MzczYjFmYw==",
  "commit": {
    "author": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2019-02-13T17:04:06Z"
    },
    "committer": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2019-02-13T17:04:06Z"
    },
    "message": "Code review again: rename function.",
    "tree": {
      "sha": "62e453d8f6600498c654cc932fe10759ac354b22",
      "url": "https://api.github.com/repos/debiki/talkyard/git/trees/62e453d8f6600498c654cc932fe10759ac354b22"
    },
    "url": "https://api.github.com/repos/debiki/talkyard/git/commits/645844694afec77425f079857166eba54373b1fc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/debiki/talkyard/commits/645844694afec77425f079857166eba54373b1fc",
  "html_url": "https://github.com/debiki/talkyard/commit/645844694afec77425f079857166eba54373b1fc",
  "comments_url": "https://api.github.com/repos/debiki/talkyard/commits/645844694afec77425f079857166eba54373b1fc/comments",
  "author": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a09ea0095595fa3d7787c3b907491a6ccfb94a52",
      "url": "https://api.github.com/repos/debiki/talkyard/commits/a09ea0095595fa3d7787c3b907491a6ccfb94a52",
      "html_url": "https://github.com/debiki/talkyard/commit/a09ea0095595fa3d7787c3b907491a6ccfb94a52"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 2,
    "deletions": 24
  },
  "files": [
    {
      "sha": "aafcf9f6aea193a19e9368774b232844691d4799",
      "filename": "app/controllers/UserController.scala",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/debiki/talkyard/blob/645844694afec77425f079857166eba54373b1fc/app/controllers/UserController.scala",
      "raw_url": "https://github.com/debiki/talkyard/raw/645844694afec77425f079857166eba54373b1fc/app/controllers/UserController.scala",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/app/controllers/UserController.scala?ref=645844694afec77425f079857166eba54373b1fc",
      "patch": "@@ -1112,7 +1112,7 @@ class UserController @Inject()(cc: ControllerComponents, edContext: EdContext)\n     val tourTipsSeenJson = (body \\ \"tourTipsSeen\").asOpt[Vector[JsString]]\n     val tourTipsSeen: Option[immutable.Seq[TourTipsId]] = tourTipsSeenJson.map(_.map(_.value))\n     tourTipsSeen.foreach(_ foreach((id: TourTipsId) => {\n-      anyOkTourTipsIdError(id) foreach EdHttp.throwBadRequest\n+      anyTourTipsIdError(id) foreach EdHttp.throwBadRequest\n     }))\n \n     throwForbiddenIf(anyLastViewedPostNr.isDefined && anyPageId.isEmpty,"
    },
    {
      "sha": "d14843eaab766489c333756d2c09b821cfe08143",
      "filename": "modules/ed-core/src/main/scala/com/debiki/core/package.scala",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/debiki/talkyard/blob/645844694afec77425f079857166eba54373b1fc/modules/ed-core/src/main/scala/com/debiki/core/package.scala",
      "raw_url": "https://github.com/debiki/talkyard/raw/645844694afec77425f079857166eba54373b1fc/modules/ed-core/src/main/scala/com/debiki/core/package.scala",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/modules/ed-core/src/main/scala/com/debiki/core/package.scala?ref=645844694afec77425f079857166eba54373b1fc",
      "patch": "@@ -637,7 +637,7 @@ package object core {\n   type TourTipsId = String\n   type TourTipsSeen = immutable.Seq[TourTipsId]\n \n-  def anyOkTourTipsIdError(id: TourTipsId): Option[ErrorMessageCode] = {\n+  def anyTourTipsIdError(id: TourTipsId): Option[ErrorMessageCode] = {\n     // Better require ids to be variable names, to avoid any surprises later.\n     // The ids are incl in each user info response, so should be short, like 2 or 3 chars.\n     // Maybe later there'll be plugins with their own tours? It'd be good if they can have"
    },
    {
      "sha": "eb14cd82bf01daae7baa45849a66818e62e0f100",
      "filename": "modules/ty-dao-rdb/src/main/resources/db/migration/y2018/db-wip.sql",
      "status": "modified",
      "additions": 0,
      "deletions": 22,
      "changes": 22,
      "blob_url": "https://github.com/debiki/talkyard/blob/645844694afec77425f079857166eba54373b1fc/modules/ty-dao-rdb/src/main/resources/db/migration/y2018/db-wip.sql",
      "raw_url": "https://github.com/debiki/talkyard/raw/645844694afec77425f079857166eba54373b1fc/modules/ty-dao-rdb/src/main/resources/db/migration/y2018/db-wip.sql",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/modules/ty-dao-rdb/src/main/resources/db/migration/y2018/db-wip.sql?ref=645844694afec77425f079857166eba54373b1fc",
      "patch": "@@ -1,25 +1,3 @@\n--- Ooops, don't run tours for old users:\n-update user_stats3 us\n-  set tour_tips_seen ='{\"fa\", \"aa\"}'\n-  where us.user_id >= 100\n-    and exists (\n-    select 1 from users3 u\n-    where u.site_id = us.site_id and u.user_id = us.user_id and u.is_admin);\n-\n-UPDATE 639\n-edm=> select site_id, user_id, tour_tips_seen from user_stats3 where site_id = 3 and user_id = 226;\n- site_id | user_id | tour_tips_seen\n----------+---------+----------------\n-       3 |     226 | {fa,aa}\n-\n--- Looks ok?:\n-select u.site_id, u.user_id, us.tour_tips_seen\n-from users3 u left join user_stats3 us\n-  on u.site_id = us.site_id\n-  and u.user_id = us.user_id\n-where u.user_id > -13 and u.user_id < 109 and u.site_id > 0;\n----------------------\n-\n \n -- v376:  Next time, if all fine:\n alter table users3 drop column email_for_every_new_post;  -- no, [REFACTORNOTFS] rename to mailing_list_mode and set to false everywhere?"
    }
  ]
}
