{
  "sha": "8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
  "node_id": "MDY6Q29tbWl0MTA1NjMzMjI6OGE1ZDYwN2YyYzdkYzkxOTZhNWUzOTQzYjg1YmUxMjRjMmViOWQyYQ==",
  "commit": {
    "author": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2019-03-14T06:13:02Z"
    },
    "committer": {
      "name": "Kaj Magnus Lindberg",
      "email": "kajmagnus3@gmail.com",
      "date": "2019-03-14T07:12:12Z"
    },
    "message": "Simplify site creation: Clearer check-your-email dialog box.",
    "tree": {
      "sha": "caa9b1b39406fb7b58b06bc4e7c4f8b7ed135eef",
      "url": "https://api.github.com/repos/debiki/talkyard/git/trees/caa9b1b39406fb7b58b06bc4e7c4f8b7ed135eef"
    },
    "url": "https://api.github.com/repos/debiki/talkyard/git/commits/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/debiki/talkyard/commits/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
  "html_url": "https://github.com/debiki/talkyard/commit/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
  "comments_url": "https://api.github.com/repos/debiki/talkyard/commits/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/comments",
  "author": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "kajmagnus",
    "id": 7477359,
    "node_id": "MDQ6VXNlcjc0NzczNTk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7477359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kajmagnus",
    "html_url": "https://github.com/kajmagnus",
    "followers_url": "https://api.github.com/users/kajmagnus/followers",
    "following_url": "https://api.github.com/users/kajmagnus/following{/other_user}",
    "gists_url": "https://api.github.com/users/kajmagnus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kajmagnus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kajmagnus/subscriptions",
    "organizations_url": "https://api.github.com/users/kajmagnus/orgs",
    "repos_url": "https://api.github.com/users/kajmagnus/repos",
    "events_url": "https://api.github.com/users/kajmagnus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kajmagnus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "efca6e95e5809aaaed594466d698801eba068acb",
      "url": "https://api.github.com/repos/debiki/talkyard/commits/efca6e95e5809aaaed594466d698801eba068acb",
      "html_url": "https://github.com/debiki/talkyard/commit/efca6e95e5809aaaed594466d698801eba068acb"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 22,
    "deletions": 8
  },
  "files": [
    {
      "sha": "0e21eafe535b6ced10be554ca707581fbcc2340a",
      "filename": "client/app-more/login/create-user-dialog.more.ts",
      "status": "modified",
      "additions": 14,
      "deletions": 7,
      "changes": 21,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-more/login/create-user-dialog.more.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-more/login/create-user-dialog.more.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-more/login/create-user-dialog.more.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -229,7 +229,13 @@ export var CreateUserDialogContent = createClassAndFactory({\n     if (!response.userCreatedAndLoggedIn) {\n       dieIf(response.emailVerifiedAndLoggedIn, 'EdE2TSBZ2');\n       ReactActions.newUserAccountCreated();\n-      getAddressVerificationEmailSentDialog().sayVerifEmailSent();\n+\n+      // Don't show a close button, if creating new site, because people click it\n+      // directly without reading the message about checking their email inbox. Then\n+      // they don't know what to do, and are stuck.\n+      // (Probably this email verif step needs to be totally removed. [SIMPLNEWSITE]\n+      const mayCloseDialog = this.props.loginReason !== LoginReason.BecomeAdmin;\n+      getAddressVerificationEmailSentDialog().sayVerifEmailSent(mayCloseDialog);\n     }\n     else if (this.props.anyReturnToUrl && !eds.isInLoginPopup &&\n         this.props.anyReturnToUrl.search('_RedirFromVerifEmailOnly_') === -1) {\n@@ -428,11 +434,11 @@ const CreateUserResultDialog = createComponent({\n   getInitialState: function () {\n     return { isOpen: false };\n   },\n-  sayVerifEmailSent: function() {\n-    this.setState({ isOpen: true });\n+  sayVerifEmailSent: function(mayClose: boolean) {\n+    this.setState({ isOpen: true, checkEmail: true, isLoggedIn: false, mayClose });\n   },\n   sayWelcomeLoggedIn: function() {\n-    this.setState({ isOpen: true, isLoggedIn: true });\n+    this.setState({ isOpen: true, checkEmail: false, isLoggedIn: true, mayClose: true });\n   },\n   close: function() {\n     this.setState({ isOpen: false });\n@@ -441,12 +447,13 @@ const CreateUserResultDialog = createComponent({\n     const id = this.state.isLoggedIn ? 'te_WelcomeLoggedIn' : 'e2eNeedVerifyEmailDialog';\n     const text = this.state.isLoggedIn ? t.cud.DoneLoggedIn : t.cud.AlmostDone;\n     // Don't show a close-dialog button if there nothing on the page, after dialog closed.\n-    const footer = eds.isInLoginPopup ? null :\n+    const footer = !this.state.mayClose || eds.isInLoginPopup ? null :\n         ModalFooter({},\n           PrimaryButton({ onClick: this.close }, t.Okay));\n     return (\n-      Modal({ show: this.state.isOpen, onHide: this.close, id },\n-        ModalHeader({}, ModalTitle({}, t.Welcome)),\n+      Modal({ show: this.state.isOpen, onHide: this.state.mayClose ? this.close : null, id },\n+        // People don't read the dialog body, so let the title be \"Check your email\".\n+        ModalHeader({}, ModalTitle({}, this.state.checkEmail ? t.CheckYourEmail : t.Welcome)),\n         ModalBody({}, r.p({}, text)),\n         footer));\n   }"
    },
    {
      "sha": "186837bc11da5fa4c5b6101a6da5cff319d13082",
      "filename": "client/app-more/no-page/non-existing-page.more.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-more/no-page/non-existing-page.more.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-more/no-page/non-existing-page.more.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-more/no-page/non-existing-page.more.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -99,6 +99,9 @@ const SignUpAsAdmin = createComponent({\n           \"Then restart the app server: \", r.code({}, \"docker-compose restart app\"))\n       : null;\n \n+    // UX this step needs to be removed, from the create-new-site flow. [SIMPLNEWSITE]\n+    // People get stuck here, when typing their email address and username etc, and\n+    // later on verifying their email address.\n     const loginBtn =\n         PrimaryButton({ id: 't_OwnerSignupB', disabled: !!anyEmailProblem,\n             onClick: () => login.getLoginDialog().openToSignUp(LoginReason.BecomeAdmin) },"
    },
    {
      "sha": "cfd92d8455ba73c698ad70dcbae9a86c98a00421",
      "filename": "client/app-slim/translations.d.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-slim/translations.d.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/client/app-slim/translations.d.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/client/app-slim/translations.d.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -21,6 +21,7 @@ interface TalkyardTranslations {\n   Continue: string;\n   ChangeDots: string;\n   ChatN: string;\n+  CheckYourEmail: string;\n   Close: string;\n   closed: string;\n   Created: string;"
    },
    {
      "sha": "c5de56ccd9b4e6da691b84a7e510abf22fab2c4a",
      "filename": "modules/ty-cla",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": null,
      "raw_url": null,
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/modules/ty-cla?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -1 +1 @@\n-Subproject commit e82a5896d29ef78bf42f384facd5ef4a9f1179ea\n+Subproject commit c5de56ccd9b4e6da691b84a7e510abf22fab2c4a"
    },
    {
      "sha": "db8f2672b1cbe899141f3986d4e6743f42a99232",
      "filename": "translations/en_US/i18n.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/en_US/i18n.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/en_US/i18n.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/translations/en_US/i18n.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -35,6 +35,7 @@ var t_en_US: TalkyardTranslations = t = {\n   ClickToShow: \"Click to show\",\n   ChangeDots: \"Change ...\",\n   ChatN: \"Chat\",\n+  CheckYourEmail: \"Check your email\",\n   Close: \"Close\",\n   closed: \"closed\",\n   Created: \"Created\","
    },
    {
      "sha": "3c4dbbc7506733ebf1d904766ab22f8dc9c9a35b",
      "filename": "translations/pt_BR/i18n.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/pt_BR/i18n.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/pt_BR/i18n.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/translations/pt_BR/i18n.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -35,6 +35,7 @@ var t_pt_BR: TalkyardTranslations = t = {\n   ClickToShow: \"Click to show\",  // MISSING\n   ChangeDots: \"Modificar ...\",\n   ChatN: \"Chat\",\n+  CheckYourEmail: \"Check your email\",  // MISSING\n   Close: \"Fechar\",\n   closed: \"fechado\",\n   Created: \"Criado\","
    },
    {
      "sha": "a94379e493808dd5072f1c8942ce857094ff1828",
      "filename": "translations/sv_SE/i18n.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/debiki/talkyard/blob/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/sv_SE/i18n.ts",
      "raw_url": "https://github.com/debiki/talkyard/raw/8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a/translations/sv_SE/i18n.ts",
      "contents_url": "https://api.github.com/repos/debiki/talkyard/contents/translations/sv_SE/i18n.ts?ref=8a5d607f2c7dc9196a5e3943b85be124c2eb9d2a",
      "patch": "@@ -35,6 +35,7 @@ var t_sv_SE: TalkyardTranslations = t = {\n   ClickToShow: \"Click to show\",\n   ChangeDots: \"Change ...\",\n   ChatN: \"Chat\",\n+  CheckYourEmail: \"Check your email\",  // MISSING\n   Close: \"Close\",\n   closed: \"closed\",\n   Created: \"Created\","
    }
  ]
}
