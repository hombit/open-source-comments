{
  "sha": "1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODoxZjFkMzkwOWU1ZTJhZTFiNDc5NTdjZjMyYzFhOGMyN2Y1NjAwNjIx",
  "commit": {
    "author": {
      "name": "Maja Komel",
      "email": "maja.komel@gmail.com",
      "date": "2019-03-21T16:49:50Z"
    },
    "committer": {
      "name": "RÃ©gis Hanol",
      "email": "regis@hanol.fr",
      "date": "2019-03-21T16:49:50Z"
    },
    "message": "UX: add more tag classes to topic view (#7228)\n\nadds tag classes where there is already category-* class",
    "tree": {
      "sha": "054f49fff6153177aa4f415881c87082d664a472",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/054f49fff6153177aa4f415881c87082d664a472"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
  "html_url": "https://github.com/discourse/discourse/commit/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/comments",
  "author": {
    "login": "majakomel",
    "id": 3431279,
    "node_id": "MDQ6VXNlcjM0MzEyNzk=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/3431279?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/majakomel",
    "html_url": "https://github.com/majakomel",
    "followers_url": "https://api.github.com/users/majakomel/followers",
    "following_url": "https://api.github.com/users/majakomel/following{/other_user}",
    "gists_url": "https://api.github.com/users/majakomel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/majakomel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/majakomel/subscriptions",
    "organizations_url": "https://api.github.com/users/majakomel/orgs",
    "repos_url": "https://api.github.com/users/majakomel/repos",
    "events_url": "https://api.github.com/users/majakomel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/majakomel/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "ZogStriP",
    "id": 362783,
    "node_id": "MDQ6VXNlcjM2Mjc4Mw==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/362783?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ZogStriP",
    "html_url": "https://github.com/ZogStriP",
    "followers_url": "https://api.github.com/users/ZogStriP/followers",
    "following_url": "https://api.github.com/users/ZogStriP/following{/other_user}",
    "gists_url": "https://api.github.com/users/ZogStriP/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ZogStriP/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ZogStriP/subscriptions",
    "organizations_url": "https://api.github.com/users/ZogStriP/orgs",
    "repos_url": "https://api.github.com/users/ZogStriP/repos",
    "events_url": "https://api.github.com/users/ZogStriP/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ZogStriP/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "252e17ea1b9f6674c8b2b677beef6a18f6b7affd",
      "url": "https://api.github.com/repos/discourse/discourse/commits/252e17ea1b9f6674c8b2b677beef6a18f6b7affd",
      "html_url": "https://github.com/discourse/discourse/commit/252e17ea1b9f6674c8b2b677beef6a18f6b7affd"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 18,
    "deletions": 8
  },
  "files": [
    {
      "sha": "2339835f4824706306b2e7e95e586b16b34b0f77",
      "filename": "app/assets/javascripts/discourse/components/add-category-tag-classes.js.es6",
      "status": "renamed",
      "additions": 9,
      "deletions": 5,
      "changes": 14,
      "blob_url": "https://github.com/discourse/discourse/blob/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/components/add-category-tag-classes.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/components/add-category-tag-classes.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/components/add-category-tag-classes.js.es6?ref=1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
      "patch": "@@ -13,20 +13,24 @@ export default Ember.Component.extend({\n       return;\n     }\n     const slug = this.get(\"category.fullSlug\");\n+    const tags = this.get(\"tags\");\n+\n     this._removeClass();\n-    if (slug) {\n-      $(\"body\").addClass(`category-${slug}`);\n-    }\n+\n+    let classes = [];\n+    if (slug) classes.push(`category-${slug}`);\n+    if (tags) tags.forEach(t => classes.push(`tag-${t}`));\n+    if (classes.length > 0) $(\"body\").addClass(classes.join(\" \"));\n   },\n \n-  @observes(\"category.fullSlug\")\n+  @observes(\"category.fullSlug\", \"tags\")\n   refreshClass() {\n     Ember.run.scheduleOnce(\"afterRender\", this, this._updateClass);\n   },\n \n   _removeClass() {\n     $(\"body\").removeClass((_, css) =>\n-      (css.match(/\\bcategory-\\S+/g) || []).join(\" \")\n+      (css.match(/\\b(?:category|tag)-\\S+/g) || []).join(\" \")\n     );\n   },\n ",
      "previous_filename": "app/assets/javascripts/discourse/components/add-category-class.js.es6"
    },
    {
      "sha": "7c6917f401472238d6458c2a29548bd60d583469",
      "filename": "app/assets/javascripts/discourse/components/discourse-topic.js.es6",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/components/discourse-topic.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/components/discourse-topic.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/components/discourse-topic.js.es6?ref=1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
      "patch": "@@ -24,7 +24,8 @@ export default Ember.Component.extend(AddArchetypeClass, Scrolling, {\n     \"topic.is_warning\",\n     \"topic.category.read_restricted:read_restricted\",\n     \"topic.deleted:deleted-topic\",\n-    \"topic.categoryClass\"\n+    \"topic.categoryClass\",\n+    \"topic.tagClasses\"\n   ],\n   menuVisible: true,\n   SHORT_POST: 1200,"
    },
    {
      "sha": "00ec3934e65be1ce05935dd49f308fe99bb1a4b2",
      "filename": "app/assets/javascripts/discourse/models/topic.js.es6",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/models/topic.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/models/topic.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/models/topic.js.es6?ref=1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
      "patch": "@@ -225,6 +225,11 @@ const Topic = RestModel.extend({\n \n   categoryClass: fmt(\"category.fullSlug\", \"category-%@\"),\n \n+  @computed(\"tags\")\n+  tagClasses(tags) {\n+    return tags.map(t => `tag-${t}`).join(\" \");\n+  },\n+\n   @computed(\"url\")\n   shareUrl(url) {\n     const user = Discourse.User.current();"
    },
    {
      "sha": "f45a2e501470b6f3e282eb323ce92d0fa3e250dd",
      "filename": "app/assets/javascripts/discourse/templates/navigation/category.hbs",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/templates/navigation/category.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/templates/navigation/category.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/templates/navigation/category.hbs?ref=1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
      "patch": "@@ -1,5 +1,5 @@\n {{#d-section class=\"navigation-container\"}}\n-  {{add-category-class category=category}}\n+  {{add-category-tag-classes category=category}}\n \n   <section class='category-heading'>\n     {{#if category.uploaded_logo.url}}"
    },
    {
      "sha": "75212e13a789cc1f943e1bba47ada9f45387f5bf",
      "filename": "app/assets/javascripts/discourse/templates/topic.hbs",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/templates/topic.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/1f1d3909e5e2ae1b47957cf32c1a8c27f5600621/app/assets/javascripts/discourse/templates/topic.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/templates/topic.hbs?ref=1f1d3909e5e2ae1b47957cf32c1a8c27f5600621",
      "patch": "@@ -1,6 +1,6 @@\n {{#discourse-topic multiSelect=multiSelect enteredAt=enteredAt topic=model hasScrolled=hasScrolled}}\n   {{#if model}}\n-    {{add-category-class category=model.category}}\n+    {{add-category-tag-classes category=model.category tags=model.tags}}\n     <div class=\"container\">\n       {{discourse-banner user=currentUser banner=site.banner overlay=hasScrolled hide=model.errorLoading}}\n     </div>"
    }
  ]
}
