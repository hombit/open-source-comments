{
  "sha": "0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODowZDM1MzFjMmYxZjFlYTJmNzYyNWQ2OTFiZDBlMzIxOTc2M2UzODhi",
  "commit": {
    "author": {
      "name": "David Taylor",
      "email": "david@taylorhq.com",
      "date": "2019-03-27T13:25:04Z"
    },
    "committer": {
      "name": "David Taylor",
      "email": "david@taylorhq.com",
      "date": "2019-03-27T13:25:04Z"
    },
    "message": "FEATURE: Allow auth providers to define specific icons\n\nPreviously we relied on the provider name matching the name of the icon. Now icon names are explicitly set. Plugin providers which do not define an icon will get the default \"sign-in-alt\" icon",
    "tree": {
      "sha": "9fd19cf94ff2cca47a0be2ae7e3a135697c6abba",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/9fd19cf94ff2cca47a0be2ae7e3a135697c6abba"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
    "comment_count": 1,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
  "html_url": "https://github.com/discourse/discourse/commit/0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/comments",
  "author": {
    "login": "davidtaylorhq",
    "id": 6270921,
    "node_id": "MDQ6VXNlcjYyNzA5MjE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6270921?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davidtaylorhq",
    "html_url": "https://github.com/davidtaylorhq",
    "followers_url": "https://api.github.com/users/davidtaylorhq/followers",
    "following_url": "https://api.github.com/users/davidtaylorhq/following{/other_user}",
    "gists_url": "https://api.github.com/users/davidtaylorhq/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davidtaylorhq/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davidtaylorhq/subscriptions",
    "organizations_url": "https://api.github.com/users/davidtaylorhq/orgs",
    "repos_url": "https://api.github.com/users/davidtaylorhq/repos",
    "events_url": "https://api.github.com/users/davidtaylorhq/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davidtaylorhq/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "davidtaylorhq",
    "id": 6270921,
    "node_id": "MDQ6VXNlcjYyNzA5MjE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6270921?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davidtaylorhq",
    "html_url": "https://github.com/davidtaylorhq",
    "followers_url": "https://api.github.com/users/davidtaylorhq/followers",
    "following_url": "https://api.github.com/users/davidtaylorhq/following{/other_user}",
    "gists_url": "https://api.github.com/users/davidtaylorhq/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davidtaylorhq/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davidtaylorhq/subscriptions",
    "organizations_url": "https://api.github.com/users/davidtaylorhq/orgs",
    "repos_url": "https://api.github.com/users/davidtaylorhq/repos",
    "events_url": "https://api.github.com/users/davidtaylorhq/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davidtaylorhq/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a9798f0c4737788ae0a8af9c39ca5daf88d39e3a",
      "url": "https://api.github.com/repos/discourse/discourse/commits/a9798f0c4737788ae0a8af9c39ca5daf88d39e3a",
      "html_url": "https://github.com/discourse/discourse/commit/a9798f0c4737788ae0a8af9c39ca5daf88d39e3a"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 18,
    "deletions": 21
  },
  "files": [
    {
      "sha": "5f39e062866fac3e51c2d4da796523b2469c3b43",
      "filename": "app/assets/javascripts/discourse-common/lib/icon-library.js.es6",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse-common/lib/icon-library.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse-common/lib/icon-library.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse-common/lib/icon-library.js.es6?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -38,6 +38,7 @@ const REPLACEMENTS = {\n };\n \n // TODO: use lib/svg_sprite/fa4-renames.json here\n+// Note: these should not be edited manually. They define the fa4-fa5 migration\n const fa4Replacements = {\n   \"500px\": \"fab-500px\",\n   \"address-book-o\": \"far-address-book\",\n@@ -167,7 +168,7 @@ const fa4Replacements = {\n   \"eye-slash\": \"far-eye-slash\",\n   eyedropper: \"eye-dropper\",\n   fa: \"fab-font-awesome\",\n-  facebook: \"fab-facebook\",\n+  facebook: \"fab-facebook-f\",\n   \"facebook-f\": \"fab-facebook-f\",\n   \"facebook-official\": \"fab-facebook\",\n   \"facebook-square\": \"fab-facebook-square\","
    },
    {
      "sha": "29bd3b11ecd58d3efdc3428c60bc7159abd00071",
      "filename": "app/assets/javascripts/discourse/models/login-method.js.es6",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse/models/login-method.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse/models/login-method.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/models/login-method.js.es6?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -99,9 +99,7 @@ export function findAll(siteSettings, capabilities, isMobileDevice) {\n   }\n \n   // exclude FA icon for Google, uses custom SVG\n-  methods.forEach(m =>\n-    m.set(\"hasRegularIcon\", m.get(\"name\") === \"google_oauth2\" ? false : true)\n-  );\n+  methods.forEach(m => m.set(\"isGoogle\", m.get(\"name\") === \"google_oauth2\"));\n \n   return methods;\n }"
    },
    {
      "sha": "85ba0d687019405f6ae67ede7e032db54d00efec",
      "filename": "app/assets/javascripts/discourse/templates/components/login-buttons.hbs",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse/templates/components/login-buttons.hbs",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/javascripts/discourse/templates/components/login-buttons.hbs",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/templates/components/login-buttons.hbs?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -1,9 +1,11 @@\n {{#each buttons as |b|}}\n   <button class=\"btn btn-social {{b.name}}\" {{action externalLogin b}}>\n-    {{#if b.hasRegularIcon}}\n-      {{d-icon b.name}}\n-    {{else}}\n+    {{#if b.isGoogle}}\n       <svg class=\"fa d-icon d-icon-custom-google-oauth2 svg-icon\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 48 48\"><defs><path id=\"a\" d=\"M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z\"/></defs><clipPath id=\"b\"><use xlink:href=\"#a\" overflow=\"visible\"/></clipPath><path clip-path=\"url(#b)\" fill=\"#FBBC05\" d=\"M0 37V11l17 13z\"/><path clip-path=\"url(#b)\" fill=\"#EA4335\" d=\"M0 11l17 13 7-6.1L48 14V0H0z\"/><path clip-path=\"url(#b)\" fill=\"#34A853\" d=\"M0 37l30-23 7.9 1L48 0v48H0z\"/><path clip-path=\"url(#b)\" fill=\"#4285F4\" d=\"M48 48L17 24l-4-3 35-10z\"/></svg>\n+    {{else if b.icon}}\n+      {{d-icon b.icon}}\n+    {{else}}\n+      {{d-icon \"sign-in-alt\"}}\n     {{/if}}\n     {{b.title}}\n   </button>"
    },
    {
      "sha": "e1c2741241e262c455572f3611cdab5d6c7b9993",
      "filename": "app/assets/stylesheets/common/components/buttons.scss",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/stylesheets/common/components/buttons.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/assets/stylesheets/common/components/buttons.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/common/components/buttons.scss?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -191,7 +191,6 @@\n     margin-right: 9px;\n     font-size: $font-0;\n   }\n-  &.google,\n   &.google_oauth2 {\n     background: $google;\n     color: #333;\n@@ -238,11 +237,6 @@\n       background: lighten($github, 20%);\n     }\n   }\n-  &.oauth2_basic {\n-    .d-icon {\n-      display: none;\n-    }\n-  }\n }\n \n // Button Sizes"
    },
    {
      "sha": "f2bc5cdbd137ed59bcc364d283a6b52bb71e669a",
      "filename": "app/serializers/auth_provider_serializer.rb",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/serializers/auth_provider_serializer.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/app/serializers/auth_provider_serializer.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/serializers/auth_provider_serializer.rb?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -1,7 +1,8 @@\n class AuthProviderSerializer < ApplicationSerializer\n \n   attributes :name, :custom_url, :pretty_name_override, :title_override, :message_override,\n-             :frame_width, :frame_height, :full_screen_login, :can_connect, :can_revoke\n+             :frame_width, :frame_height, :full_screen_login, :can_connect, :can_revoke,\n+             :icon\n \n   def title_override\n     return SiteSetting.send(object.title_setting) if object.title_setting"
    },
    {
      "sha": "d8705cc0273c6f278c7a67d518a23607c5e3ff2f",
      "filename": "lib/auth/auth_provider.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/auth/auth_provider.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/auth/auth_provider.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/auth/auth_provider.rb?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -8,7 +8,7 @@ def initialize(params = {})\n   def self.auth_attributes\n     [:pretty_name, :title, :message, :frame_width, :frame_height, :authenticator,\n      :pretty_name_setting, :title_setting, :enabled_setting, :full_screen_login, :full_screen_login_setting,\n-     :custom_url, :background_color]\n+     :custom_url, :background_color, :icon]\n   end\n \n   attr_accessor(*auth_attributes)"
    },
    {
      "sha": "96e014db23e342306ce9b578f5f1ea0e8ed9ff44",
      "filename": "lib/discourse.rb",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/discourse.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/discourse.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/discourse.rb?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -215,12 +215,12 @@ def self.assets_digest\n   end\n \n   BUILTIN_AUTH ||= [\n-    Auth::AuthProvider.new(authenticator: Auth::FacebookAuthenticator.new, frame_width: 580, frame_height: 400),\n-    Auth::AuthProvider.new(authenticator: Auth::GoogleOAuth2Authenticator.new, frame_width: 850, frame_height: 500),\n-    Auth::AuthProvider.new(authenticator: Auth::OpenIdAuthenticator.new(\"yahoo\", \"https://me.yahoo.com\", 'enable_yahoo_logins', trusted: true)),\n-    Auth::AuthProvider.new(authenticator: Auth::GithubAuthenticator.new),\n-    Auth::AuthProvider.new(authenticator: Auth::TwitterAuthenticator.new),\n-    Auth::AuthProvider.new(authenticator: Auth::InstagramAuthenticator.new)\n+    Auth::AuthProvider.new(authenticator: Auth::FacebookAuthenticator.new, frame_width: 580, frame_height: 400, icon: \"fab-facebook\"),\n+    Auth::AuthProvider.new(authenticator: Auth::GoogleOAuth2Authenticator.new, frame_width: 850, frame_height: 500), # Custom icon implemented in client\n+    Auth::AuthProvider.new(authenticator: Auth::OpenIdAuthenticator.new(\"yahoo\", \"https://me.yahoo.com\", 'enable_yahoo_logins', trusted: true), icon: \"fab-yahoo\"),\n+    Auth::AuthProvider.new(authenticator: Auth::GithubAuthenticator.new, icon: \"fab-github\"),\n+    Auth::AuthProvider.new(authenticator: Auth::TwitterAuthenticator.new, icon: \"fab-twitter\"),\n+    Auth::AuthProvider.new(authenticator: Auth::InstagramAuthenticator.new, icon: \"fab-instagram\")\n   ]\n \n   def self.auth_providers"
    },
    {
      "sha": "9d9a79a7ce7af945dd343b2a90504b7e6bd298ef",
      "filename": "lib/svg_sprite/svg_sprite.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/svg_sprite/svg_sprite.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/0d3531c2f1f1ea2f7625d691bd0e3219763e388b/lib/svg_sprite/svg_sprite.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/svg_sprite/svg_sprite.rb?ref=0d3531c2f1f1ea2f7625d691bd0e3219763e388b",
      "patch": "@@ -158,6 +158,7 @@ module SvgSprite\n     \"share\",\n     \"shield-alt\",\n     \"shower\",\n+    \"sign-in-alt\",\n     \"sign-out-alt\",\n     \"signal\",\n     \"step-backward\","
    }
  ]
}
