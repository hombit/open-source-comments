{
  "sha": "da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODpkYTBlMzc1MTJhMTAwYmY5ZGFmOWQyNmI1ZjEwZGZkZWFmNTg0MmFh",
  "commit": {
    "author": {
      "name": "Robin Ward",
      "email": "robin.ward@gmail.com",
      "date": "2019-05-01T15:36:48Z"
    },
    "committer": {
      "name": "Robin Ward",
      "email": "robin.ward@gmail.com",
      "date": "2019-05-01T15:37:28Z"
    },
    "message": "FIX: Add test to confirm updating category works.\n\nAlso replaces a missing translation key that 99.9% of users would never\nsee.",
    "tree": {
      "sha": "ee5417d4f48c80d1dfa2a214c232158f4519b783",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/ee5417d4f48c80d1dfa2a214c232158f4519b783"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
  "html_url": "https://github.com/discourse/discourse/commit/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/comments",
  "author": {
    "login": "eviltrout",
    "id": 17538,
    "node_id": "MDQ6VXNlcjE3NTM4",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17538?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eviltrout",
    "html_url": "https://github.com/eviltrout",
    "followers_url": "https://api.github.com/users/eviltrout/followers",
    "following_url": "https://api.github.com/users/eviltrout/following{/other_user}",
    "gists_url": "https://api.github.com/users/eviltrout/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eviltrout/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eviltrout/subscriptions",
    "organizations_url": "https://api.github.com/users/eviltrout/orgs",
    "repos_url": "https://api.github.com/users/eviltrout/repos",
    "events_url": "https://api.github.com/users/eviltrout/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eviltrout/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "eviltrout",
    "id": 17538,
    "node_id": "MDQ6VXNlcjE3NTM4",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17538?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eviltrout",
    "html_url": "https://github.com/eviltrout",
    "followers_url": "https://api.github.com/users/eviltrout/followers",
    "following_url": "https://api.github.com/users/eviltrout/following{/other_user}",
    "gists_url": "https://api.github.com/users/eviltrout/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eviltrout/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eviltrout/subscriptions",
    "organizations_url": "https://api.github.com/users/eviltrout/orgs",
    "repos_url": "https://api.github.com/users/eviltrout/repos",
    "events_url": "https://api.github.com/users/eviltrout/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eviltrout/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7869a10d18c36080069787ace39e66c74d031469",
      "url": "https://api.github.com/repos/discourse/discourse/commits/7869a10d18c36080069787ace39e66c74d031469",
      "html_url": "https://github.com/discourse/discourse/commit/7869a10d18c36080069787ace39e66c74d031469"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 14,
    "deletions": 0
  },
  "files": [
    {
      "sha": "5c4bc894befddae07194eb950f1706a511039511",
      "filename": "config/locales/server.en.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/config/locales/server.en.yml",
      "raw_url": "https://github.com/discourse/discourse/raw/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/config/locales/server.en.yml",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/config/locales/server.en.yml?ref=da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
      "patch": "@@ -4452,6 +4452,8 @@ en:\n         title: \"Delete Spammer\"\n         description: \"Remove the user and all their posts and topics.\"\n         confirm: \"Are you sure you want to delete all that user's posts, topics, and block their IP and email addresses?\"\n+      delete_single:\n+        title: \"Delete\"\n       delete:\n         title: \"Delete...\"\n       delete_and_ignore:"
    },
    {
      "sha": "030ef673da84c0b9280498f01a58227802101e1c",
      "filename": "lib/reviewable/actions.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/discourse/discourse/blob/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/lib/reviewable/actions.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/lib/reviewable/actions.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/reviewable/actions.rb?ref=da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
      "patch": "@@ -15,6 +15,7 @@ def self.common_actions\n       {\n         approve: Action.new(:approve, 'thumbs-up', 'reviewables.actions.approve.title'),\n         reject: Action.new(:reject, 'thumbs-down', 'reviewables.actions.reject.title'),\n+        delete: Action.new(:delete, 'trash-alt', 'reviewables.actions.delete_single.title')\n       }\n     end\n "
    },
    {
      "sha": "fdc51e5814cc23c3de242e452230949b9ec05841",
      "filename": "spec/models/reviewable_spec.rb",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/discourse/discourse/blob/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/spec/models/reviewable_spec.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/da0e37512a100bf9daf9d26b5f10dfdeaf5842aa/spec/models/reviewable_spec.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/spec/models/reviewable_spec.rb?ref=da0e37512a100bf9daf9d26b5f10dfdeaf5842aa",
      "patch": "@@ -55,6 +55,17 @@\n       expect(reviewable.category).to eq(post.topic.category)\n     end\n \n+    it \"will update the category if the topic category changes\" do\n+      post = Fabricate(:post)\n+      moderator = Fabricate(:moderator)\n+      reviewable = PostActionCreator.spam(moderator, post).reviewable\n+      expect(reviewable.category).to eq(post.topic.category)\n+      new_cat = Fabricate(:category)\n+      PostRevisor.new(post).revise!(moderator, category_id: new_cat.id)\n+      expect(post.topic.reload.category).to eq(new_cat)\n+      expect(reviewable.reload.category).to eq(new_cat)\n+    end\n+\n     it \"can create multiple objects with a NULL target\" do\n       r0 = ReviewableQueuedPost.needs_review!(created_by: admin, payload: { raw: 'hello world I am a post' })\n       expect(r0).to be_present"
    }
  ]
}
