{
  "sha": "bfde9bf8c747f336c145baa9a57a529f601d110f",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6YmZkZTliZjhjNzQ3ZjMzNmMxNDViYWE5YTU3YTUyOWY2MDFkMTEwZg==",
  "commit": {
    "author": {
      "name": "Kiwi",
      "email": "vinh@wikiwi.io",
      "date": "2019-05-23T18:42:58Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2019-05-23T18:42:58Z"
    },
    "message": "[CORL-373] Experimental AMP Support (#2324)\n\n* feat: support amp\r\n\r\n* fix: support a custom PORT for amp development",
    "tree": {
      "sha": "6c53f5f1b7c8ce5ba0c70cfb3f555587fb831e10",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/6c53f5f1b7c8ce5ba0c70cfb3f555587fb831e10"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/bfde9bf8c747f336c145baa9a57a529f601d110f",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc5umyCRBK7hj4Ov3rIwAAdHIIAGjp2d8k+a2sX4TZlKVqC3q3\nwocIAyWfvzGWCOQp3fDsQKHqUDnRYJSU9r1FrwOsKqmqPhVkNojZdq4a7mo5bMa2\nP9YYJHrsiA5SaYYBBJEaNWlL5AHnwM/aatbw7q+QrMNEeDXV+Tdmw1ERsb5cSlns\nB+BJONXkyOqtfg4lyssinAJ18P8Ut2aEiTTmqhCrqUQehpW5LuD/ovkp4kV3aMvD\nyztj7yZtPZHfVCMDt3SNJy1KMhGwxrMVyfTITA8uBgrcBQvhI5o1IUUBnU6Fuh10\n329CewjkaeXN/ydy5pZ5f6mks5D5JpJPXCXw463GBpI8T6+gzIokpysvQifExv0=\n=+eRa\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 6c53f5f1b7c8ce5ba0c70cfb3f555587fb831e10\nparent 54f9b2808635e76b2e22d430b4520ffc0fef6198\nauthor Kiwi <vinh@wikiwi.io> 1558636978 +0200\ncommitter GitHub <noreply@github.com> 1558636978 +0200\n\n[CORL-373] Experimental AMP Support (#2324)\n\n* feat: support amp\r\n\r\n* fix: support a custom PORT for amp development\r\n"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/bfde9bf8c747f336c145baa9a57a529f601d110f",
  "html_url": "https://github.com/coralproject/talk/commit/bfde9bf8c747f336c145baa9a57a529f601d110f",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/bfde9bf8c747f336c145baa9a57a529f601d110f/comments",
  "author": {
    "login": "cvle",
    "id": 14221600,
    "node_id": "MDQ6VXNlcjE0MjIxNjAw",
    "avatar_url": "https://avatars2.githubusercontent.com/u/14221600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cvle",
    "html_url": "https://github.com/cvle",
    "followers_url": "https://api.github.com/users/cvle/followers",
    "following_url": "https://api.github.com/users/cvle/following{/other_user}",
    "gists_url": "https://api.github.com/users/cvle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cvle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cvle/subscriptions",
    "organizations_url": "https://api.github.com/users/cvle/orgs",
    "repos_url": "https://api.github.com/users/cvle/repos",
    "events_url": "https://api.github.com/users/cvle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cvle/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "54f9b2808635e76b2e22d430b4520ffc0fef6198",
      "url": "https://api.github.com/repos/coralproject/talk/commits/54f9b2808635e76b2e22d430b4520ffc0fef6198",
      "html_url": "https://github.com/coralproject/talk/commit/54f9b2808635e76b2e22d430b4520ffc0fef6198"
    }
  ],
  "stats": {
    "total": 319,
    "additions": 313,
    "deletions": 6
  },
  "files": [
    {
      "sha": "e5f5e9247a4870afcde9106602e31896eb91c55e",
      "filename": "client/coral-embed/src/Bridge.js",
      "status": "modified",
      "additions": 41,
      "deletions": 6,
      "changes": 47,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/client/coral-embed/src/Bridge.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/client/coral-embed/src/Bridge.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-embed/src/Bridge.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -3,6 +3,7 @@ import URLSearchParams from '@ungap/url-search-params';\n import pym from 'pym.js';\n import EventEmitter from 'eventemitter2';\n import { buildUrl } from 'coral-framework/utils/url';\n+\n import SnackBar from './SnackBar';\n import onIntersect from './onIntersect';\n import {\n@@ -92,6 +93,21 @@ function viewportDimensions() {\n   };\n }\n \n+function parseAMPHash(opts) {\n+  const result = { ...opts };\n+  const query = window.location.hash.length && window.location.hash.substr(1);\n+  if (query) {\n+    const parsed = queryString.parse(query);\n+    if (parsed.asset_url && !result.asset_url) {\n+      result.asset_url = parsed.asset_url;\n+    }\n+    if (parsed.asset_id && !result.asset_id) {\n+      result.asset_id = parsed.asset_id;\n+    }\n+  }\n+  return result;\n+}\n+\n export default class Bridge {\n   constructor(\n     element,\n@@ -110,19 +126,23 @@ export default class Bridge {\n       lazy = process.env.TALK_DEFAULT_LAZY_RENDER === 'TRUE',\n       // Any additional options are extracted to be sent to the embed via the\n       // pym bridge.\n+      amp,\n       ...opts\n     }\n   ) {\n     this.pym = null;\n     this.element = element;\n-    this.opts = opts;\n+    this.amp = amp;\n+    this.lazy = !amp && lazy;\n+\n+    // Parse amp hash.\n+    this.opts = amp ? parseAMPHash(opts) : opts;\n     this.query = buildQuery(this.opts);\n     this.emitter = new EventEmitter({ wildcard: true });\n-    this.snackBar = new SnackBar(snackBarStyles || {});\n+    this.snackBar = amp ? null : new SnackBar(snackBarStyles || {});\n     this.onAuthChanged = onAuthChanged;\n     this.talkBaseUrl = ensureEndSlash(talkBaseUrl);\n     this.talkStaticUrl = ensureEndSlash(talkStaticUrl);\n-    this.lazy = lazy;\n \n     // Store queued operations in a queue that can be processed once the stream\n     // is rendered.\n@@ -179,6 +199,16 @@ export default class Bridge {\n       if (height !== cachedHeight) {\n         this.pym.el.firstChild.style.height = `${height}px`;\n         cachedHeight = height;\n+        if (this.amp) {\n+          window.parent.postMessage(\n+            {\n+              sentinel: 'amp',\n+              type: 'embed-size',\n+              height,\n+            },\n+            '*'\n+          );\n+        }\n       }\n     });\n \n@@ -267,8 +297,10 @@ export default class Bridge {\n     // Setup Pym.\n     this.setupPym();\n \n-    // Attach the snackBar to the pym parent and to the body of the page.\n-    this.snackBar.attach(window.document.body, this.pym);\n+    if (this.snackBar) {\n+      // Attach the snackBar to the pym parent and to the body of the page.\n+      this.snackBar.attach(window.document.body, this.pym);\n+    }\n \n     // If the user clicks outside the embed, then tell the embed.\n     document.addEventListener('click', this.handleClick.bind(this), true);\n@@ -315,7 +347,10 @@ export default class Bridge {\n     this.emitter.removeAllListeners();\n \n     // Remove the snackbar.\n-    this.snackBar.remove();\n+    if (this.snackBar) {\n+      this.snackBar.remove();\n+      this.snackBar = null;\n+    }\n \n     // Remove the pym parent.\n     this.pym.remove();"
    },
    {
      "sha": "e3bbcae630267b78042b74a2e421723ecc4c3d51",
      "filename": "client/coral-embed/src/index.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/client/coral-embed/src/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/client/coral-embed/src/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-embed/src/index.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -56,6 +56,7 @@ export const Talk = {\n    * @param {String} [config.auth_token] - (optional) A jwt representing the session\n    * @param {String} [config.lazy] - (optional) If set the stream will only render lazily\n    * @param {String} [config.talkStaticUrl] - (optional) Static URL used to serve Talk\n+   * @param {Boolean} [config.amp] - (optional) Run Talk in AMP mode\n    * @return {Object}\n    */\n   render: (element, config) => {"
    },
    {
      "sha": "5afd412d3eebf5e01144cd4d977f0c47a8fbe294",
      "filename": "middleware/staticTemplate.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/middleware/staticTemplate.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/middleware/staticTemplate.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/middleware/staticTemplate.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -12,6 +12,8 @@ const {\n   STATIC_ORIGIN,\n } = require('../url');\n \n+const { PORT } = require('../config');\n+\n const { RECAPTCHA_PUBLIC, WEBSOCKET_LIVE_URI } = require('../config');\n \n // Grab TALK_CLIENT_* environment variables.\n@@ -42,6 +44,7 @@ const TEMPLATE_LOCALS = {\n   MOUNT_PATH,\n   STATIC_URL,\n   TALK_CLIENT_ENV,\n+  PORT,\n   data: TALK_CLIENT_ENV,\n };\n "
    },
    {
      "sha": "ca16ecc06ae37941778c6a1d21193b99297e6f12",
      "filename": "routes/dev/amp.js",
      "status": "added",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/dev/amp.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/dev/amp.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/routes/dev/amp.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -0,0 +1,20 @@\n+const express = require('express');\n+const router = express.Router();\n+\n+router.get('/', (req, res) => {\n+  return res.render('dev/amp.njk', {\n+    title: 'Coral Talk AMP',\n+    asset_url: '',\n+    asset_id: '',\n+  });\n+});\n+\n+router.get('/button', (req, res) => {\n+  return res.render('dev/amp-button.njk', {\n+    title: 'Coral Talk AMP',\n+    asset_url: '',\n+    asset_id: '',\n+  });\n+});\n+\n+module.exports = router;"
    },
    {
      "sha": "a25ff176cefe188c915d20d3ac5ce31e49c4637c",
      "filename": "routes/dev/index.js",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/dev/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/dev/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/routes/dev/index.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -19,5 +19,6 @@ router.get('/', staticTemplate, async (req, res) => {\n     });\n   }\n });\n+router.use('/amp', staticTemplate, require('./amp'));\n \n module.exports = router;"
    },
    {
      "sha": "f9f2ab1c1df0b7f5d1113e5ac69b82ae56185dae",
      "filename": "routes/embed/index.js",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/embed/index.js",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/routes/embed/index.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/routes/embed/index.js?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -5,4 +5,8 @@ router.use('/stream', (req, res) => {\n   res.render('embed/stream.njk');\n });\n \n+router.use('/amp', (req, res) => {\n+  res.render('embed/amp.njk');\n+});\n+\n module.exports = router;"
    },
    {
      "sha": "3347f27e5d2ef773cd393b00e65c2a5ebb8fc56b",
      "filename": "views/dev/amp-button.njk",
      "status": "added",
      "additions": 73,
      "deletions": 0,
      "changes": 73,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/views/dev/amp-button.njk",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/views/dev/amp-button.njk",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/views/dev/amp-button.njk?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -0,0 +1,73 @@\n+<!-- ## Introduction -->\n+<!--\n+This is a sample showing how to use Talk with AMP. You need to access\n+this using an URL other than localhost. You can use ngrok to achieve that.\n+-->\n+<!-- -->\n+<!doctype html>\n+<html ⚡>\n+  <head>\n+    <meta charset=\"utf-8\">\n+    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n+    <link rel=\"canonical\" href=\"/dev\">\n+\n+    <!-- ## Setup -->\n+    <script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n+    <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n+\n+    <title>Coral Talk AMP</title>\n+\n+    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n+    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n+\n+    <style amp-custom>\n+      .container {\n+        width: auto;\n+        max-width: 680px;\n+        padding: 0 15px;\n+        margin: auto;\n+      }\n+      .title {\n+        margin-top: 1rem;\n+        margin-bottom: .5rem;\n+        font-size: 2.5rem;\n+        font-weight: 500;\n+        line-height: 1.2;\n+        font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n+      }\n+      .hide{\n+        display:none\n+      }\n+    </style>\n+  </head>\n+  <body>\n+    <div class=\"container\">\n+      <h1 class=\"title\">Coral Talk AMP</h1>\n+      <p>\n+        Ask to go outside and ask to come inside and ask to go outside and ask to\n+        come inside the dog smells bad. Lick butt and make a weird face. Toilet\n+        paper attack claws fluff everywhere meow miao french ciao litterbox. Shake\n+        treat bag immediately regret falling into bathtub or white cat sleeps on a\n+        black shirt so what a cat-ass-trophy! eat owner's food spit up on light\n+        gray carpet instead of adjacent linoleum. Warm up laptop with butt lick\n+        butt fart rainbows until owner yells pee in litter box hiss at cats\n+        scratch the box so loved it, hated it, loved it, hated it but need to\n+        check on human, have not seen in an hour might be dead oh look, human is\n+        alive, hiss at human, feed me.\n+      </p>\n+      <button id=menu on=\"tap:AMP.setState({visible: !visible})\">Show Comments</button>\n+      <div [class]=visible?\"show\":\"hide\" class=\"hide\">\n+        <amp-iframe\n+          width=600 height=140\n+          layout=\"responsive\"\n+          sandbox=\"allow-scripts allow-same-origin allow-modals allow-popups allow-forms\"\n+          resizable\n+          src=\"http://localhost:3000/embed/amp\">\n+          <div placeholder></div>\n+          <div overflow tabindex=0 role=button aria-label=\"Read more\">Read more</div>\n+        </amp-iframe>\n+        </div<\n+    </div>\n+  </body>\n+</html>\n+"
    },
    {
      "sha": "881abf7bc044430b9ec9d4435c4b9207bd816436",
      "filename": "views/dev/amp.njk",
      "status": "added",
      "additions": 151,
      "deletions": 0,
      "changes": 151,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/views/dev/amp.njk",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/views/dev/amp.njk",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/views/dev/amp.njk?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -0,0 +1,151 @@\n+<!-- ## Introduction -->\n+<!--\n+This is a sample showing how to use Talk with AMP. You need to access\n+this using an URL other than localhost. You can use ngrok to achieve that.\n+-->\n+<!-- -->\n+<!doctype html>\n+<html ⚡>\n+  <head>\n+    <meta charset=\"utf-8\">\n+    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n+    <link rel=\"canonical\" href=\"/dev\">\n+\n+    <!-- ## Setup -->\n+    <script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n+\n+    <title>Coral Talk AMP</title>\n+\n+    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n+    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n+\n+    <style amp-custom>\n+      .container {\n+        width: auto;\n+        max-width: 680px;\n+        padding: 0 15px;\n+        margin: auto;\n+      }\n+      .title {\n+        margin-top: 1rem;\n+        margin-bottom: .5rem;\n+        font-size: 2.5rem;\n+        font-weight: 500;\n+        line-height: 1.2;\n+        font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\";\n+      }\n+    </style>\n+  </head>\n+  <body>\n+    <div class=\"container\">\n+      <h1 class=\"title\">Coral Talk AMP</h1>\n+      <p>\n+        Dismember a mouse and then regurgitate parts of it on the family room\n+        floor. Dont wait for the storm to pass, dance in the rain stand in front\n+        of the computer screen, so stares at human while pushing stuff off a table\n+        chew the plant meow hiss at vacuum cleaner. Terrorize the\n+        hundred-and-twenty-pound rottweiler and steal his bed, not sorry chew the\n+        plant. Litter kitter kitty litty little kitten big roar roar feed me rub\n+        whiskers on bare skin act innocent sleep on keyboard, so give me attention\n+        or face the wrath of my claws for demand to be let outside at once, and\n+        expect owner to wait for me as i think about it spread kitty litter all\n+        over house so nya nya nyan. Catty ipsum massacre a bird in the living room\n+        and then look like the cutest and most innocent animal on the planet you\n+        have cat to be kitten me right meow. Hiss and stare at nothing then run\n+        suddenly away refuse to come home when humans are going to bed; stay out\n+        all night then yowl like i am dying at 4am and lick plastic bags. Chase\n+        dog then run away purrr purr littel cat, little cat purr purr and step on\n+        your keyboard while you're gaming and then turn in a circle . Twitch tail\n+        in permanent irritation put butt in owner's face and the dog smells bad\n+        yet attempt to leap between furniture but woefully miscalibrate and\n+        bellyflop onto the floor; what's your problem? i meant to do that now i\n+        shall wash myself intently. Sniff all the things groom forever, stretch\n+        tongue and leave it slightly out, blep, but bring your owner a dead bird\n+        decide to want nothing to do with my owner today for lay on arms while\n+        you're using the keyboard meow meow, i tell my human or scratch. Sleep on\n+        my human's head then cats take over the world bleghbleghvomit my furball\n+        really tie the room together sleep more napping, more napping all the\n+        napping is exhausting. When in doubt, wash drink water out of the faucet,\n+        cats are fats i like to pets them they like to meow back and cat dog hate\n+        mouse eat string barf pillow no baths hate everything yet swat at dog\n+        kitty kitty but you call this cat food. Cough furball into food bowl then\n+        scratch owner for a new one flex claws on the human's belly and purr like\n+        a lawnmower for has closed eyes but still sees you groom yourself 4 hours\n+        - checked, have your beauty sleep 18 hours - checked, be fabulous for the\n+        rest of the day - checked. Freak human out make funny noise mow mow mow\n+        mow mow mow success now attack human flex claws on the human's belly and\n+        purr like a lawnmower or meowwww. Terrorize the hundred-and-twenty-pound\n+        rottweiler and steal his bed, not sorry paw at your fat belly so yowling\n+        nonstop the whole night small kitty warm kitty little balls of fur or eat\n+        owner's food reward the chosen human with a slow blink. Gate keepers of\n+        hell plan steps for world domination for more napping, more napping all\n+        the napping is exhausting give me some of your food give me some of your\n+        food give me some of your food meh, i don't want it so flop over. Make\n+        meme, make cute face ears back wide eyed so sit and stare. Dead stare with\n+        ears cocked furrier and even more furrier hairball. Stand in front of the\n+        computer screen demand to have some of whatever the human is cooking, then\n+        sniff the offering and walk away for catasstrophe, kitty scratches couch\n+        bad kitty. Wack the mini furry mouse intrigued by the shower, and pooping\n+        rainbow while flying in a toasted bread costume in space. Mesmerizing\n+        birds love me! shake treat bag, yet lies down where is my slave? I'm\n+        getting hungry so lick face hiss at owner, pee a lot, and meow repeatedly\n+        scratch at fence purrrrrr eat muffins and poutine until owner comes back.\n+        You have cat to be kitten me right meow sniff other cat's butt and hang\n+        jaw half open thereafter but run outside as soon as door open so munch on\n+        tasty moths or munch on tasty moths, for paw at beetle and eat it before\n+        it gets away. Sit on human. Gnaw the corn cob massacre a bird in the\n+        living room and then look like the cutest and most innocent animal on the\n+        planet for sit on the laptop. Meow scratch leg; meow for can opener to\n+        feed me cat fur is the new black but hide when guests come over, and Gate\n+        keepers of hell. Refuse to come home when humans are going to bed; stay\n+        out all night then yowl like i am dying at 4am cat slap dog in face or eat\n+        a rug and furry furry hairs everywhere oh no human coming lie on counter\n+        don't get off counter for i like fish sit on human they not getting up\n+        ever but meow meow but cuddle no cuddle cuddle love scratch scratch.\n+      </p>\n+      <p>\n+        I show my fluffy belly but it's a trap! if you pet it i will tear up your\n+        hand refuse to drink water except out of someone's glass mice, so cough\n+        hairball, eat toilet paper or curl into a furry donut lick sellotape but\n+        wack the mini furry mouse. When owners are asleep, cry for no apparent\n+        reason. Chase imaginary bugs. Stinky cat reward the chosen human with a\n+        slow blink, or chase dog then run away. Chew on cable scratch the\n+        furniture for you are a captive audience while sitting on the toilet, pet\n+        me for i like cats because they are fat and fluffy and spend all night\n+        ensuring people don't sleep sleep all day. Scoot butt on the rug need to\n+        check on human, have not seen in an hour might be dead oh look, human is\n+        alive, hiss at human, feed me, leave fur on owners clothes, so instantly\n+        break out into full speed gallop across the house for no reason play\n+        riveting piece on synthesizer keyboard and scoot butt on the rug yet meow\n+        meow. Attack dog, run away and pretend to be victim annoy the old grumpy\n+        cat, start a fight and then retreat to wash when i lose or meow go back to\n+        sleep owner brings food and water tries to pet on head, so scratch get\n+        sprayed by water because bad cat. Meowwww pelt around the house and up and\n+        down stairs chasing phantoms drink water out of the faucet meow meow, i\n+        tell my human. Destroy couch.\n+      </p>\n+      <p>\n+        Ask to go outside and ask to come inside and ask to go outside and ask to\n+        come inside the dog smells bad. Lick butt and make a weird face. Toilet\n+        paper attack claws fluff everywhere meow miao french ciao litterbox. Shake\n+        treat bag immediately regret falling into bathtub or white cat sleeps on a\n+        black shirt so what a cat-ass-trophy! eat owner's food spit up on light\n+        gray carpet instead of adjacent linoleum. Warm up laptop with butt lick\n+        butt fart rainbows until owner yells pee in litter box hiss at cats\n+        scratch the box so loved it, hated it, loved it, hated it but need to\n+        check on human, have not seen in an hour might be dead oh look, human is\n+        alive, hiss at human, feed me.\n+      </p>\n+      <amp-iframe\n+        width=600 height=140\n+        layout=\"responsive\"\n+        sandbox=\"allow-scripts allow-same-origin allow-modals allow-popups allow-forms\"\n+        resizable\n+        src=\"http://localhost:{{ PORT }}/embed/amp\">\n+        <div placeholder></div>\n+        <div overflow tabindex=0 role=button aria-label=\"Read more\">Read more</div>\n+      </amp-iframe>\n+    </div>\n+  </body>\n+</html>\n+"
    },
    {
      "sha": "4d26888a716eec489c9f70d510e091650bb358ca",
      "filename": "views/embed/amp.njk",
      "status": "added",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/coralproject/talk/blob/bfde9bf8c747f336c145baa9a57a529f601d110f/views/embed/amp.njk",
      "raw_url": "https://github.com/coralproject/talk/raw/bfde9bf8c747f336c145baa9a57a529f601d110f/views/embed/amp.njk",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/views/embed/amp.njk?ref=bfde9bf8c747f336c145baa9a57a529f601d110f",
      "patch": "@@ -0,0 +1,19 @@\n+<!DOCTYPE html>\n+<html>\n+  <head>\n+    <meta charset=\"utf-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, user-scalable=no\">\n+    <title>Coral Talk Amp Embed</title>\n+  </head>\n+  <body>\n+    <div id='coralStreamEmbed'></div>\n+    <script src=\"{{ resolve('embed.js') }}\"></script>\n+    <script>\n+      window.TalkEmbed = Coral.Talk.render(document.getElementById('coralStreamEmbed'), {\n+        talk: '{{ BASE_URL }}',\n+        auth_token: '',\n+        amp: true,\n+      })\n+    </script>\n+  </body>\n+</html>"
    }
  ]
}
