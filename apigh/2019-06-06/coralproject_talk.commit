{
  "sha": "448b988281004b5878b68af5b321bea704184252",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6NDQ4Yjk4ODI4MTAwNGI1ODc4YjY4YWY1YjMyMWJlYTcwNDE4NDI1Mg==",
  "commit": {
    "author": {
      "name": "Kim Gardner",
      "email": "kgardnr@gmail.com",
      "date": "2019-06-05T19:55:40Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2019-06-05T19:55:40Z"
    },
    "message": "Merge pull request #2327 from coralproject/next-amp-docs\n\nAMP docs",
    "tree": {
      "sha": "5dd4ccb53bc5cc55eabe847d505b8177f87feb94",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/5dd4ccb53bc5cc55eabe847d505b8177f87feb94"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/448b988281004b5878b68af5b321bea704184252",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc+B48CRBK7hj4Ov3rIwAAdHIIAE18D88nymkGBkc1JWyT/L+3\ngHKDu/jx/0TwuuDHzJ+bAiiLtIbbKAY/ahYLF+8Q5pQlZccW4BRVeR9N822vHgy/\n1yX18JtrnTGzEME9KgecSNoKULMbqDNetJaq3bxhsFLJigx9UlT/GFfHToj2hr1+\nLpvXC2h0BKrRIBgBeQRYxJEnksh0NhwEEYaAsTWsPmNRzfeQvF1b0vbxsk1qZQBh\nmgiaXdMYoknLSvyJXvAxfcp3WxLwXdz8DgdPzLNux4KGoi0RRFrUDbxZaTIj18lc\nKo/l4o4fJGnBipRHTD00nHDQV8OPXtc0RcnFjq6X35mj5ZorCaBbMeVyYFnAyDQ=\n=u8av\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 5dd4ccb53bc5cc55eabe847d505b8177f87feb94\nparent b9cf7084eb4dd6159ada0dabd80656a26a110d4d\nparent 7a688495f24997b662a82e26ec185175e7f253fc\nauthor Kim Gardner <kgardnr@gmail.com> 1559764540 +0100\ncommitter GitHub <noreply@github.com> 1559764540 +0100\n\nMerge pull request #2327 from coralproject/next-amp-docs\n\nAMP docs"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/448b988281004b5878b68af5b321bea704184252",
  "html_url": "https://github.com/coralproject/talk/commit/448b988281004b5878b68af5b321bea704184252",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/448b988281004b5878b68af5b321bea704184252/comments",
  "author": {
    "login": "kgardnr",
    "id": 1077300,
    "node_id": "MDQ6VXNlcjEwNzczMDA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1077300?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgardnr",
    "html_url": "https://github.com/kgardnr",
    "followers_url": "https://api.github.com/users/kgardnr/followers",
    "following_url": "https://api.github.com/users/kgardnr/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgardnr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgardnr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgardnr/subscriptions",
    "organizations_url": "https://api.github.com/users/kgardnr/orgs",
    "repos_url": "https://api.github.com/users/kgardnr/repos",
    "events_url": "https://api.github.com/users/kgardnr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgardnr/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b9cf7084eb4dd6159ada0dabd80656a26a110d4d",
      "url": "https://api.github.com/repos/coralproject/talk/commits/b9cf7084eb4dd6159ada0dabd80656a26a110d4d",
      "html_url": "https://github.com/coralproject/talk/commit/b9cf7084eb4dd6159ada0dabd80656a26a110d4d"
    },
    {
      "sha": "7a688495f24997b662a82e26ec185175e7f253fc",
      "url": "https://api.github.com/repos/coralproject/talk/commits/7a688495f24997b662a82e26ec185175e7f253fc",
      "html_url": "https://github.com/coralproject/talk/commit/7a688495f24997b662a82e26ec185175e7f253fc"
    }
  ],
  "stats": {
    "total": 52,
    "additions": 51,
    "deletions": 1
  },
  "files": [
    {
      "sha": "59704449de19ac31f9faa29b7c94e01ccb615fbb",
      "filename": "docs/_config.yml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/448b988281004b5878b68af5b321bea704184252/docs/_config.yml",
      "raw_url": "https://github.com/coralproject/talk/raw/448b988281004b5878b68af5b321bea704184252/docs/_config.yml",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/docs/_config.yml?ref=448b988281004b5878b68af5b321bea704184252",
      "patch": "@@ -120,6 +120,8 @@ sidebar:\n           url: /integrating/translations-i18n/\n         - title: GDPR Compliance\n           url: /integrating/gdpr/\n+        - title: Accelerated Mobile Page\n+          url: /integrating/amp/\n     - title: Product Guide\n       children:\n         - title: How Talk Works"
    },
    {
      "sha": "c6fae41047c9a057ff3f0d0a7fe7fabc6c5dcd91",
      "filename": "docs/package.json",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/448b988281004b5878b68af5b321bea704184252/docs/package.json",
      "raw_url": "https://github.com/coralproject/talk/raw/448b988281004b5878b68af5b321bea704184252/docs/package.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/docs/package.json?ref=448b988281004b5878b68af5b321bea704184252",
      "patch": "@@ -3,7 +3,7 @@\n   \"version\": \"0.0.0\",\n   \"private\": true,\n   \"hexo\": {\n-    \"version\": \"3.7.1\"\n+    \"version\": \"3.8.0\"\n   },\n   \"scripts\": {\n     \"start\": \"hexo serve\","
    },
    {
      "sha": "ee5cb68468307ba0f86ad5f40d7832122dc68041",
      "filename": "docs/source/integrating/amp.md",
      "status": "added",
      "additions": 47,
      "deletions": 0,
      "changes": 47,
      "blob_url": "https://github.com/coralproject/talk/blob/448b988281004b5878b68af5b321bea704184252/docs/source/integrating/amp.md",
      "raw_url": "https://github.com/coralproject/talk/raw/448b988281004b5878b68af5b321bea704184252/docs/source/integrating/amp.md",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/docs/source/integrating/amp.md?ref=448b988281004b5878b68af5b321bea704184252",
      "patch": "@@ -0,0 +1,47 @@\n+---\n+title: Accelerated Mobile Page\n+permalink: /integrating/amp/\n+---\n+\n+[AMP](https://amp.dev/) is a light-weight, stripped down HTML page that aims to improve reader experience. _Talk v4.9.0+_ comes with  [AMP](https://amp.dev/) support. The current caveat however is that _toast notifications_ are not being rendered when viewing inside AMP.\n+\n+# How to integrate\n+Put the following code into your _AMP_ page and replace `$TALK_URL` and `$ASSET_URL` with the\n+corresponding values. You can also pass `asset_id` instead of `asset_url`.\n+\n+```html\n+<amp-iframe\n+  width=600 height=140\n+  layout=\"responsive\"\n+  sandbox=\"allow-scripts allow-same-origin allow-modals allow-popups allow-forms\"\n+  resizable\n+  src=\"https://$TALK_URL/embed/amp#asset_url=$ASSET_URL\">\n+  <div placeholder></div>\n+  <div overflow tabindex=0 role=button aria-label=\"Read more\">Read more</div>\n+</amp-iframe>\n+```\n+\n+## Single Sign-On\n+For SSO integration you need to create a page with the following output and replace `$TALK_URL` and `$AUTH_TOKEN` with the appropriate values. Inject your SSO auth scripts to get the  `$AUTH_TOKEN` for the current user. Integrating with [amp-access](https://amp.dev/documentation/components/amp-access) is recommended which opens a 1st-party popup to not have browsers block your cookies. This page is then used in `src` of `<amp-iframe>` above. It must be accessed over `https` and live in a different domain than the `amp` page.\n+\n+```html\n+<!DOCTYPE html>\n+<html>\n+  <head>\n+    <meta charset=\"utf-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, user-scalable=no\">\n+    <title>Coral Talk Amp Embed</title>\n+  </head>\n+  <body>\n+    <div id='coralStreamEmbed'></div>\n+    <script src=\"https://$TALK_URL/static/embed.js\"></script>\n+    <script>\n+      window.TalkEmbed = Coral.Talk.render(document.getElementById('coralStreamEmbed'), {\n+        talk: '$TALK_URL',\n+        auth_token: '$AUTH_TOKEN',\n+        amp: true,\n+      })\n+    </script>\n+  </body>\n+</html>\n+```"
    },
    {
      "sha": "c694f007b3b683d57d9769f93003be58c9b065b6",
      "filename": "views/embed/amp.njk",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/448b988281004b5878b68af5b321bea704184252/views/embed/amp.njk",
      "raw_url": "https://github.com/coralproject/talk/raw/448b988281004b5878b68af5b321bea704184252/views/embed/amp.njk",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/views/embed/amp.njk?ref=448b988281004b5878b68af5b321bea704184252",
      "patch": "@@ -4,6 +4,7 @@\n     <meta charset=\"utf-8\">\n     <meta name=\"viewport\" content=\"width=device-width, user-scalable=no\">\n     <title>Coral Talk Amp Embed</title>\n+    <style>body { margin: 0; }</style>\n   </head>\n   <body>\n     <div id='coralStreamEmbed'></div>"
    }
  ]
}
