{
  "sha": "2738d11f60164ce7144a138c68143bcaf13a69f0",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODoyNzM4ZDExZjYwMTY0Y2U3MTQ0YTEzOGM2ODE0M2JjYWYxM2E2OWYw",
  "commit": {
    "author": {
      "name": "Arpit Jalan",
      "email": "arpit@techapj.com",
      "date": "2019-06-21T15:17:32Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2019-06-21T15:17:32Z"
    },
    "message": "UX: show like icon on archived posts (#7775)",
    "tree": {
      "sha": "bcb47565837be003fad9fa7c6bbc3733619c2050",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/bcb47565837be003fad9fa7c6bbc3733619c2050"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/2738d11f60164ce7144a138c68143bcaf13a69f0",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdDPUMCRBK7hj4Ov3rIwAAdHIIAHMS8KyqL4iTiqHCl3k1TEoU\n1mhZg9QmQ9qkK8C9TPdV2YEJZtR8XjhVmOrzc5LlzVLR0/l/UdrOesabbnBO0KPq\nFA7qJtfcBSrpJ+gUJp05lB7inaqmTZEueQe63BUc/O0HTDY42m8snY9NmQqyyhfh\nRAlYHHZyddeFvd5yUDjCzOlym/I1Zu/lEwKo05IRk1rRIc6qS7w1NdP2TgXVldQc\n4Tiu2V3epyz9mpQJXLZXwU1DzxKhMLurVfLmaj0weAL+wdOVbpP2BpwpqUCh/LHH\nHZhV08hxHYZuAy8L2J+P8F+qZx69Zf4XGp5kzOxEwU80Vpxg1LIZTMjpVRul4I4=\n=mVUg\n-----END PGP SIGNATURE-----\n",
      "payload": "tree bcb47565837be003fad9fa7c6bbc3733619c2050\nparent feda7e1ddfa26fcfd98b656353362a49a68037d7\nauthor Arpit Jalan <arpit@techapj.com> 1561130252 +0530\ncommitter GitHub <noreply@github.com> 1561130252 +0530\n\nUX: show like icon on archived posts (#7775)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/2738d11f60164ce7144a138c68143bcaf13a69f0",
  "html_url": "https://github.com/discourse/discourse/commit/2738d11f60164ce7144a138c68143bcaf13a69f0",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/2738d11f60164ce7144a138c68143bcaf13a69f0/comments",
  "author": {
    "login": "techAPJ",
    "id": 5732281,
    "node_id": "MDQ6VXNlcjU3MzIyODE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/5732281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/techAPJ",
    "html_url": "https://github.com/techAPJ",
    "followers_url": "https://api.github.com/users/techAPJ/followers",
    "following_url": "https://api.github.com/users/techAPJ/following{/other_user}",
    "gists_url": "https://api.github.com/users/techAPJ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/techAPJ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/techAPJ/subscriptions",
    "organizations_url": "https://api.github.com/users/techAPJ/orgs",
    "repos_url": "https://api.github.com/users/techAPJ/repos",
    "events_url": "https://api.github.com/users/techAPJ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/techAPJ/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "feda7e1ddfa26fcfd98b656353362a49a68037d7",
      "url": "https://api.github.com/repos/discourse/discourse/commits/feda7e1ddfa26fcfd98b656353362a49a68037d7",
      "html_url": "https://github.com/discourse/discourse/commit/feda7e1ddfa26fcfd98b656353362a49a68037d7"
    }
  ],
  "stats": {
    "total": 18,
    "additions": 13,
    "deletions": 5
  },
  "files": [
    {
      "sha": "e3d8c6ba3c52aa8601f81ddbf0d9e83e899dd3bb",
      "filename": "app/assets/javascripts/discourse/widgets/post-menu.js.es6",
      "status": "modified",
      "additions": 8,
      "deletions": 2,
      "changes": 10,
      "blob_url": "https://github.com/discourse/discourse/blob/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/javascripts/discourse/widgets/post-menu.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/javascripts/discourse/widgets/post-menu.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/widgets/post-menu.js.es6?ref=2738d11f60164ce7144a138c68143bcaf13a69f0",
      "patch": "@@ -61,17 +61,23 @@ function likeCount(attrs) {\n         ? \"post.has_likes_title_only_you\"\n         : \"post.has_likes_title_you\"\n       : \"post.has_likes_title\";\n-    const icon = attrs.yours ? \"d-liked\" : \"\";\n+    let icon = attrs.yours ? \"d-liked\" : \"\";\n+    let addContainer = attrs.yours;\n     const additionalClass = attrs.yours ? \"my-likes\" : \"regular-likes\";\n \n+    if (!attrs.showLike) {\n+      icon = attrs.yours ? \"d-liked\" : \"d-unliked\";\n+      addContainer = true;\n+    }\n+\n     return {\n       action: \"toggleWhoLiked\",\n       title,\n       className: `button-count like-count highlight-action ${additionalClass}`,\n       contents: count,\n       icon,\n       iconRight: true,\n-      addContainer: attrs.yours,\n+      addContainer,\n       titleOptions: { count: attrs.liked ? count - 1 : count }\n     };\n   }"
    },
    {
      "sha": "eabd9cd5ec054b1ffe319e5dca1cb1818e9ecd8d",
      "filename": "app/assets/stylesheets/desktop/topic-post.scss",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/discourse/discourse/blob/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/stylesheets/desktop/topic-post.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/stylesheets/desktop/topic-post.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/desktop/topic-post.scss?ref=2738d11f60164ce7144a138c68143bcaf13a69f0",
      "patch": "@@ -65,8 +65,9 @@ nav.post-controls {\n       }\n       margin-left: 0;\n       margin-right: 0;\n-      &.my-likes {\n-        // Like count on my posts\n+      &.my-likes,\n+      &.regular-likes {\n+        // Like count on posts\n         .d-icon {\n           color: $primary-low-mid;\n           padding-left: 0.45em;"
    },
    {
      "sha": "e87327b25ea58749ebe0ba844e361949c0ccde07",
      "filename": "app/assets/stylesheets/mobile/topic-post.scss",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/stylesheets/mobile/topic-post.scss",
      "raw_url": "https://github.com/discourse/discourse/raw/2738d11f60164ce7144a138c68143bcaf13a69f0/app/assets/stylesheets/mobile/topic-post.scss",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/stylesheets/mobile/topic-post.scss?ref=2738d11f60164ce7144a138c68143bcaf13a69f0",
      "patch": "@@ -47,7 +47,8 @@ span.badge-posts {\n           + .create-flag {\n             padding: s(2 2 2 1);\n           }\n-          &.my-likes {\n+          &.my-likes,\n+          &.regular-likes {\n             display: flex;\n             max-width: unset;\n             padding: s(2);"
    }
  ]
}
