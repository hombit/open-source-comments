{
  "sha": "23f17db0c91876d8d899bb579ed111f22f812eb0",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6MjNmMTdkYjBjOTE4NzZkOGQ4OTliYjU3OWVkMTExZjIyZjgxMmViMA==",
  "commit": {
    "author": {
      "name": "Wyatt Johnson",
      "email": "wyattjoh@gmail.com",
      "date": "2019-07-17T14:52:58Z"
    },
    "committer": {
      "name": "Kim Gardner",
      "email": "kgardnr@gmail.com",
      "date": "2019-07-17T14:52:58Z"
    },
    "message": "[CORL-447] Stories Fix (#2408)\n\n* fix: fixes close/open bug\r\n\r\n* fix: fixed version display\r\n\r\n* chore: bumped version",
    "tree": {
      "sha": "05f94e06c5fdfb9c46c186328f21cffe88aca4ff",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/05f94e06c5fdfb9c46c186328f21cffe88aca4ff"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/23f17db0c91876d8d899bb579ed111f22f812eb0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/23f17db0c91876d8d899bb579ed111f22f812eb0",
  "html_url": "https://github.com/coralproject/talk/commit/23f17db0c91876d8d899bb579ed111f22f812eb0",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/23f17db0c91876d8d899bb579ed111f22f812eb0/comments",
  "author": {
    "login": "wyattjoh",
    "id": 633002,
    "node_id": "MDQ6VXNlcjYzMzAwMg==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/633002?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wyattjoh",
    "html_url": "https://github.com/wyattjoh",
    "followers_url": "https://api.github.com/users/wyattjoh/followers",
    "following_url": "https://api.github.com/users/wyattjoh/following{/other_user}",
    "gists_url": "https://api.github.com/users/wyattjoh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wyattjoh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wyattjoh/subscriptions",
    "organizations_url": "https://api.github.com/users/wyattjoh/orgs",
    "repos_url": "https://api.github.com/users/wyattjoh/repos",
    "events_url": "https://api.github.com/users/wyattjoh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wyattjoh/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "kgardnr",
    "id": 1077300,
    "node_id": "MDQ6VXNlcjEwNzczMDA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1077300?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgardnr",
    "html_url": "https://github.com/kgardnr",
    "followers_url": "https://api.github.com/users/kgardnr/followers",
    "following_url": "https://api.github.com/users/kgardnr/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgardnr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgardnr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgardnr/subscriptions",
    "organizations_url": "https://api.github.com/users/kgardnr/orgs",
    "repos_url": "https://api.github.com/users/kgardnr/repos",
    "events_url": "https://api.github.com/users/kgardnr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgardnr/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1385a0b961aab119b080e86d0883a7657ed15b01",
      "url": "https://api.github.com/repos/coralproject/talk/commits/1385a0b961aab119b080e86d0883a7657ed15b01",
      "html_url": "https://github.com/coralproject/talk/commit/1385a0b961aab119b080e86d0883a7657ed15b01"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 20,
    "deletions": 11
  },
  "files": [
    {
      "sha": "aa3f853adc92610ec044f26fda142dcc58cbc4fb",
      "filename": "client/coral-admin/src/actions/stories.js",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/actions/stories.js",
      "raw_url": "https://github.com/coralproject/talk/raw/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/actions/stories.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/actions/stories.js?ref=23f17db0c91876d8d899bb579ed111f22f812eb0",
      "patch": "@@ -64,9 +64,9 @@ export const loadMoreAssets = (query = {}) => (dispatch, _l, { rest2 }) => {\n // Update an asset state\n // Get comments to fill each of the three lists on the mod queue\n export const updateAssetState = (id, closedAt) => (dispatch, _, { rest }) => {\n-  dispatch({ type: UPDATE_ASSET_STATE_REQUEST, id, closedAt });\n+  dispatch({ type: UPDATE_ASSET_STATE_REQUEST });\n   return rest(`/assets/${id}/status`, { method: 'PUT', body: { closedAt } })\n-    .then(() => dispatch({ type: UPDATE_ASSET_STATE_SUCCESS }))\n+    .then(() => dispatch({ type: UPDATE_ASSET_STATE_SUCCESS, id, closedAt }))\n     .catch(error => {\n       console.error(error);\n       const errorMessage = error.translation_key"
    },
    {
      "sha": "3de6c90f115b3c2e686ce916a64ca22e86ce643b",
      "filename": "client/coral-admin/src/components/Header.css",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/components/Header.css",
      "raw_url": "https://github.com/coralproject/talk/raw/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/components/Header.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/components/Header.css?ref=23f17db0c91876d8d899bb579ed111f22f812eb0",
      "patch": "@@ -26,7 +26,8 @@\n   max-width: 1280px;\n   margin: 0 auto;\n   background-color: #696969;\n-  box-shadow: 0 2px 2px 0 rgba(0,0,0,.14), 0 3px 1px -2px rgba(0,0,0,.2), 0 1px 5px 0 rgba(0,0,0,.12);\n+  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\n+    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n }\n \n .header > div {\n@@ -41,7 +42,7 @@\n   position: absolute;\n   top: 0;\n   right: 0;\n-  width: 170px;\n+  width: 200px;\n   height: 100%;\n }\n \n@@ -85,7 +86,7 @@\n   background-color: transparent;\n   transition: background-color 200ms;\n   font-weight: 100;\n-  letter-spacing: .8;\n+  letter-spacing: 0.8;\n \n   &:hover {\n     background-color: #404040;"
    },
    {
      "sha": "c0cb05f00fe6239844f5b6a1d9b2aebfe7d5c88f",
      "filename": "client/coral-admin/src/reducers/stories.js",
      "status": "modified",
      "additions": 13,
      "deletions": 4,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/reducers/stories.js",
      "raw_url": "https://github.com/coralproject/talk/raw/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/reducers/stories.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/reducers/stories.js?ref=23f17db0c91876d8d899bb579ed111f22f812eb0",
      "patch": "@@ -57,12 +57,21 @@ export default function assets(state = initialState, action) {\n         },\n       });\n     }\n-    case actions.UPDATE_ASSET_STATE_REQUEST:\n+    case actions.UPDATE_ASSET_STATE_SUCCESS:\n+      const index = state.assets.edges.findIndex(\n+        ({ node: { id } }) => id === action.id\n+      );\n+      if (index < 0) {\n+        return state;\n+      }\n+\n       return update(state, {\n         assets: {\n-          byId: {\n-            [action.id]: {\n-              closedAt: { $set: action.closedAt },\n+          edges: {\n+            [index]: {\n+              node: {\n+                closedAt: { $set: action.closedAt },\n+              },\n             },\n           },\n         },"
    },
    {
      "sha": "9f73c41e4d44630c1c23e24103e743cc49fea43d",
      "filename": "client/coral-admin/src/routes/Stories/containers/Stories.js",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/routes/Stories/containers/Stories.js",
      "raw_url": "https://github.com/coralproject/talk/raw/23f17db0c91876d8d899bb579ed111f22f812eb0/client/coral-admin/src/routes/Stories/containers/Stories.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/client/coral-admin/src/routes/Stories/containers/Stories.js?ref=23f17db0c91876d8d899bb579ed111f22f812eb0",
      "patch": "@@ -49,7 +49,6 @@ class StoriesContainer extends Component {\n \n     try {\n       await updateAssetState(id, closeStream ? Date.now() : null);\n-      this.fetchAssets();\n     } catch (err) {\n       console.error(err);\n     }"
    },
    {
      "sha": "cbc0d8816de0e900bb21f2db53745dd4f44ec3a6",
      "filename": "package.json",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/23f17db0c91876d8d899bb579ed111f22f812eb0/package.json",
      "raw_url": "https://github.com/coralproject/talk/raw/23f17db0c91876d8d899bb579ed111f22f812eb0/package.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package.json?ref=23f17db0c91876d8d899bb579ed111f22f812eb0",
      "patch": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"talk\",\n-  \"version\": \"4.10.0\",\n+  \"version\": \"4.10.1\",\n   \"description\": \"A better commenting experience from Mozilla, The New York Times, and the Washington Post. https://coralproject.net\",\n   \"main\": \"app.js\",\n   \"private\": true,"
    }
  ]
}
