{
  "sha": "2a207f0da89352c9ff4626e966c8b3e24bc59863",
  "node_id": "MDY6Q29tbWl0MTgwOTYzMjI6MmEyMDdmMGRhODkzNTJjOWZmNDYyNmU5NjZjOGIzZTI0YmM1OTg2Mw==",
  "commit": {
    "author": {
      "name": "Jacob Barkdull",
      "email": "jacobbarkdull@gmail.com",
      "date": "2019-08-18T19:36:47Z"
    },
    "committer": {
      "name": "Jacob Barkdull",
      "email": "jacobbarkdull@gmail.com",
      "date": "2019-08-18T19:36:47Z"
    },
    "message": "Fixed redirect to remote domain",
    "tree": {
      "sha": "23ade28b52b3be4366ae21c86ae930d2bdeee9a7",
      "url": "https://api.github.com/repos/jacobwb/hashover-next/git/trees/23ade28b52b3be4366ae21c86ae930d2bdeee9a7"
    },
    "url": "https://api.github.com/repos/jacobwb/hashover-next/git/commits/2a207f0da89352c9ff4626e966c8b3e24bc59863",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEofOubkBFMHW68fO7nCRq6Ma+3AkFAl1ZqRgACgkQnCRq6Ma+\n3AnoNxAAxudS5Ytzpc36h4y6QDvcJS54x/PtiKqL7J/LLSBt8cT0YhkV93KAWEF2\nwRmmUI1+WC+ReKWTvjq2dH6WknreBAKUeeh+o35UDGThPS1x1cyEiuc5v7De/k9R\nvOwjHFf1ZKGiYqPHiFMBIawXGDHbt06axe7MdBedJpLYn7Bo0EqwZahwwccdeGRs\n7tbnCWFFmtTvooKIzj3mcNhjWKiT7P+CTuLZGh9Qffqo9nLhTfd8o10oTOG19mjP\nEjes8GbvaSBFSLfWktwnw4cMf53IsYKuo5Vyl+cRzMfJzGzOt2WwXugZiSRLU7Qh\nGb/2EFRM8i09xnQmG0s5xqYL2RR4qfJO3lOOKPx+0UJ7OBmeQT7aktTDMNz688GP\nDtB4np8vTG/AgYNnYyP77zjCXuLoVZEtW2mRf/HNNvg39T2JBSRj/pIppPeDdd0/\nVyT5mncaI83SdCa3edmpL/aNsujlAbLDexkg65Bl99c7AwfYNnWpup++FXBP7PhG\nw9mALgt9YekUoBsP4gmXZ5SYIoOSat9uc4BaNDqGzhnM/k4Oa8zN8igxe1IkepGp\nVxD0REFsyqJb8I5YexyWS0NVexaTCVgtfM2kNpSI39V/QO9Qc/6Ko57pgrrD4XnT\nbJR0/49sa0RNp30lL2/+G0Rt1JrSdWl1pswVMJNoGQwplbQvGas=\n=hi68\n-----END PGP SIGNATURE-----",
      "payload": "tree 23ade28b52b3be4366ae21c86ae930d2bdeee9a7\nparent 2b87a084f84b073b208b4157500d16a5ba17dbe3\nauthor Jacob Barkdull <jacobbarkdull@gmail.com> 1566157007 -0700\ncommitter Jacob Barkdull <jacobbarkdull@gmail.com> 1566157007 -0700\n\nFixed redirect to remote domain\n"
    }
  },
  "url": "https://api.github.com/repos/jacobwb/hashover-next/commits/2a207f0da89352c9ff4626e966c8b3e24bc59863",
  "html_url": "https://github.com/jacobwb/hashover-next/commit/2a207f0da89352c9ff4626e966c8b3e24bc59863",
  "comments_url": "https://api.github.com/repos/jacobwb/hashover-next/commits/2a207f0da89352c9ff4626e966c8b3e24bc59863/comments",
  "author": {
    "login": "jacobwb",
    "id": 4677622,
    "node_id": "MDQ6VXNlcjQ2Nzc2MjI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4677622?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacobwb",
    "html_url": "https://github.com/jacobwb",
    "followers_url": "https://api.github.com/users/jacobwb/followers",
    "following_url": "https://api.github.com/users/jacobwb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacobwb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacobwb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacobwb/subscriptions",
    "organizations_url": "https://api.github.com/users/jacobwb/orgs",
    "repos_url": "https://api.github.com/users/jacobwb/repos",
    "events_url": "https://api.github.com/users/jacobwb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacobwb/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jacobwb",
    "id": 4677622,
    "node_id": "MDQ6VXNlcjQ2Nzc2MjI=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4677622?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacobwb",
    "html_url": "https://github.com/jacobwb",
    "followers_url": "https://api.github.com/users/jacobwb/followers",
    "following_url": "https://api.github.com/users/jacobwb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacobwb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacobwb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacobwb/subscriptions",
    "organizations_url": "https://api.github.com/users/jacobwb/orgs",
    "repos_url": "https://api.github.com/users/jacobwb/repos",
    "events_url": "https://api.github.com/users/jacobwb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacobwb/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2b87a084f84b073b208b4157500d16a5ba17dbe3",
      "url": "https://api.github.com/repos/jacobwb/hashover-next/commits/2b87a084f84b073b208b4157500d16a5ba17dbe3",
      "html_url": "https://github.com/jacobwb/hashover-next/commit/2b87a084f84b073b208b4157500d16a5ba17dbe3"
    }
  ],
  "stats": {
    "total": 44,
    "additions": 23,
    "deletions": 21
  },
  "files": [
    {
      "sha": "48253b77f879c6d978ab3c11e3743b7abfcfb22a",
      "filename": "backend/classes/formdata.php",
      "status": "modified",
      "additions": 20,
      "deletions": 20,
      "changes": 40,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/2a207f0da89352c9ff4626e966c8b3e24bc59863/backend/classes/formdata.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/2a207f0da89352c9ff4626e966c8b3e24bc59863/backend/classes/formdata.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/backend/classes/formdata.php?ref=2a207f0da89352c9ff4626e966c8b3e24bc59863",
      "patch": "@@ -60,26 +60,6 @@ public function __construct (Setup $setup)\n \t\t// Attempt to get referer\n \t\t$referer = Misc::getArrayItem ($_SERVER, 'HTTP_REFERER');\n \n-\t\t// Check if we're coming from an admin page\n-\t\tif (preg_match ('/' . $admin_path . '/i', $referer)) {\n-\t\t\t// If so, use it as the kickback URL\n-\t\t\t$this->referer = $_SERVER['HTTP_REFERER'];\n-\t\t} else {\n-\t\t\t// If not, check if posting from remote domain\n-\t\t\tif ($this->remoteAccess === true) {\n-\t\t\t\t// If so, use absolute path\n-\t\t\t\t$this->referer = $setup->pageURL;\n-\t\t\t} else {\n-\t\t\t\t// If not, use relative path\n-\t\t\t\t$this->referer = $setup->filePath;\n-\t\t\t}\n-\n-\t\t\t// Add URL queries to kickback URL\n-\t\t\tif (!empty ($setup->urlQueries)) {\n-\t\t\t\t$this->referer .= '?' . $setup->urlQueries;\n-\t\t\t}\n-\t\t}\n-\n \t\t// Set status\n \t\tif (isset ($request['status'])) {\n \t\t\t$this->data['status'] = $this->forceUTF8 ($request['status']);\n@@ -129,6 +109,26 @@ public function __construct (Setup $setup)\n \t\tif (isset ($request['ajax'])) {\n \t\t\t$this->viaAJAX = true;\n \t\t}\n+\n+\t\t// Check if we're coming from an admin page\n+\t\tif (preg_match ('/' . $admin_path . '/i', $referer)) {\n+\t\t\t// If so, use it as the kickback URL\n+\t\t\t$this->referer = $_SERVER['HTTP_REFERER'];\n+\t\t} else {\n+\t\t\t// If not, check if posting from remote domain\n+\t\t\tif ($this->remoteAccess === true) {\n+\t\t\t\t// If so, use absolute path\n+\t\t\t\t$this->referer = $setup->pageURL;\n+\t\t\t} else {\n+\t\t\t\t// If not, use relative path\n+\t\t\t\t$this->referer = $setup->filePath;\n+\t\t\t}\n+\n+\t\t\t// Add URL queries to kickback URL\n+\t\t\tif (!empty ($setup->urlQueries)) {\n+\t\t\t\t$this->referer .= '?' . $setup->urlQueries;\n+\t\t\t}\n+\t\t}\n \t}\n \n \t// Force a string to UTF-8 encoding and acceptable character range"
    },
    {
      "sha": "5f5a16e5cbd1ba0078963196d30632306afc8ce9",
      "filename": "backend/classes/writecomments.php",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/jacobwb/hashover-next/blob/2a207f0da89352c9ff4626e966c8b3e24bc59863/backend/classes/writecomments.php",
      "raw_url": "https://github.com/jacobwb/hashover-next/raw/2a207f0da89352c9ff4626e966c8b3e24bc59863/backend/classes/writecomments.php",
      "contents_url": "https://api.github.com/repos/jacobwb/hashover-next/contents/backend/classes/writecomments.php?ref=2a207f0da89352c9ff4626e966c8b3e24bc59863",
      "patch": "@@ -22,19 +22,21 @@ class WriteComments extends Secrets\n \tprotected $setup;\n \tprotected $formData;\n \tprotected $thread;\n+\n \tprotected $locale;\n \tprotected $cookies;\n \tprotected $login;\n-\tprotected $metadata;\n \tprotected $crypto;\n \tprotected $avatar;\n \tprotected $templater;\n \tprotected $mail;\n+\n \tprotected $name = '';\n \tprotected $password = '';\n \tprotected $loginHash = '';\n \tprotected $email = '';\n \tprotected $website = '';\n+\n \tprotected $data = array ();\n \tprotected $urls = array ();\n "
    }
  ]
}
