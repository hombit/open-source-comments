{
  "sha": "8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo4Y2E1YWFkMWUyYjE2MTJjMmVmNjgyNGJkNTc0ZWVhOWVmNzFkMzBk",
  "commit": {
    "author": {
      "name": "Dan Ungureanu",
      "email": "dan@ungureanu.me",
      "date": "2019-10-26T09:55:54Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2019-10-26T09:55:54Z"
    },
    "message": "FIX: Reload plugin translations in development (#8243)\n\nThe default locale is :en_US, which is just a thin layer over :en. In\r\nother words, :en_US has the :en locale as a fallback. When \"en.yml\" is\r\nedited, only the :en locale is refreshed and :en_US becomes stale.\r\n\r\nThis commit ensures that there is a dependency on the fallback locales\r\ntoo.",
    "tree": {
      "sha": "bbb1faa6547396c300761d2ebfba9a733239aee3",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/bbb1faa6547396c300761d2ebfba9a733239aee3"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdtBgqCRBK7hj4Ov3rIwAAdHIIAG84Prv8n5JIQJM54iWnPmGV\nFlH/nNC0vmSig9VQHTwEcMmjdaOJWL7WviscyJVTr743Vcp2S1pkeZK63tpDfK/z\nToFTNuwl3DfSbt/09GnjpX4l6RmyteQqQ4j2vz9OTljyHV8u+8O/xzj1yUXQnqNa\nMaPJFteu0k+GeZSxlaZt/2a5/Mf8gvnES9XRguUPHnYNP1EwQrvgWh3asF+ermhD\nJUfE1l2VU56Jc5Yi9+PLdVfEfPrahXHRom4/SywXoykx5qw2NTz4C9enbuN1cGMm\nqpELotcD9QGp5tYC06Y9ECfLxr1WB7SdwspgzEYe2FkRUHQuHG2UxTL22Z7L5CI=\n=7uo+\n-----END PGP SIGNATURE-----\n",
      "payload": "tree bbb1faa6547396c300761d2ebfba9a733239aee3\nparent 4c2d6e19ba8ebdaefbfc4d506571eb6b404a9e72\nauthor Dan Ungureanu <dan@ungureanu.me> 1572083754 +0300\ncommitter GitHub <noreply@github.com> 1572083754 +0300\n\nFIX: Reload plugin translations in development (#8243)\n\nThe default locale is :en_US, which is just a thin layer over :en. In\r\nother words, :en_US has the :en locale as a fallback. When \"en.yml\" is\r\nedited, only the :en locale is refreshed and :en_US becomes stale.\r\n\r\nThis commit ensures that there is a dependency on the fallback locales\r\ntoo."
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d",
  "html_url": "https://github.com/discourse/discourse/commit/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d/comments",
  "author": {
    "login": "udan11",
    "id": 4147664,
    "node_id": "MDQ6VXNlcjQxNDc2NjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4147664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/udan11",
    "html_url": "https://github.com/udan11",
    "followers_url": "https://api.github.com/users/udan11/followers",
    "following_url": "https://api.github.com/users/udan11/following{/other_user}",
    "gists_url": "https://api.github.com/users/udan11/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/udan11/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/udan11/subscriptions",
    "organizations_url": "https://api.github.com/users/udan11/orgs",
    "repos_url": "https://api.github.com/users/udan11/repos",
    "events_url": "https://api.github.com/users/udan11/events{/privacy}",
    "received_events_url": "https://api.github.com/users/udan11/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4c2d6e19ba8ebdaefbfc4d506571eb6b404a9e72",
      "url": "https://api.github.com/repos/discourse/discourse/commits/4c2d6e19ba8ebdaefbfc4d506571eb6b404a9e72",
      "html_url": "https://github.com/discourse/discourse/commit/4c2d6e19ba8ebdaefbfc4d506571eb6b404a9e72"
    }
  ],
  "stats": {
    "total": 8,
    "additions": 5,
    "deletions": 3
  },
  "files": [
    {
      "sha": "798a67fe87bcbdc67fd464b3fbdc01d0d6825388",
      "filename": "lib/js_locale_helper.rb",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/discourse/discourse/blob/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d/lib/js_locale_helper.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d/lib/js_locale_helper.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/lib/js_locale_helper.rb?ref=8ca5aad1e2b1612c2ef6824bd574eea9ef71d30d",
      "patch": "@@ -6,10 +6,12 @@ def self.plugin_client_files(locale_str)\n     Dir[\"#{Rails.root}/plugins/*/config/locales/client.#{locale_str}.yml\"]\n   end\n \n-  def self.reloadable_plugins(locale, ctx)\n+  def self.reloadable_plugins(locale_sym, ctx)\n     return unless Rails.env.development?\n-    plugin_client_files(locale.to_s).each do |file|\n-      ctx.depend_on(file)\n+    I18n.fallbacks[locale_sym].each do |locale|\n+      plugin_client_files(locale.to_s).each do |file|\n+        ctx.depend_on(file)\n+      end\n     end\n   end\n "
    }
  ]
}
