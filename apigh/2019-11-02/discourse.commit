{
  "sha": "8d69944b4ecb4b32672641dda8fd927dbe2354e8",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo4ZDY5OTQ0YjRlY2I0YjMyNjcyNjQxZGRhOGZkOTI3ZGJlMjM1NGU4",
  "commit": {
    "author": {
      "name": "Joffrey JAFFEUX",
      "email": "j.jaffeux@gmail.com",
      "date": "2019-11-02T12:54:41Z"
    },
    "committer": {
      "name": "Vinoth Kannan",
      "email": "vinothkannan@vinkas.com",
      "date": "2019-11-02T12:54:41Z"
    },
    "message": "FIX: update action should be in setting-component mixin (#8287)\n\nThis was causing an exception on some component (eg: value-list in a theme-component setting) which couldn't find an action named update.",
    "tree": {
      "sha": "207f78cff0fff083ef758e4eb7987c8f88f602b6",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/207f78cff0fff083ef758e4eb7987c8f88f602b6"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/8d69944b4ecb4b32672641dda8fd927dbe2354e8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/8d69944b4ecb4b32672641dda8fd927dbe2354e8",
  "html_url": "https://github.com/discourse/discourse/commit/8d69944b4ecb4b32672641dda8fd927dbe2354e8",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/8d69944b4ecb4b32672641dda8fd927dbe2354e8/comments",
  "author": {
    "login": "jjaffeux",
    "id": 339945,
    "node_id": "MDQ6VXNlcjMzOTk0NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/339945?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjaffeux",
    "html_url": "https://github.com/jjaffeux",
    "followers_url": "https://api.github.com/users/jjaffeux/followers",
    "following_url": "https://api.github.com/users/jjaffeux/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjaffeux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjaffeux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjaffeux/subscriptions",
    "organizations_url": "https://api.github.com/users/jjaffeux/orgs",
    "repos_url": "https://api.github.com/users/jjaffeux/repos",
    "events_url": "https://api.github.com/users/jjaffeux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjaffeux/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vinothkannans",
    "id": 9372109,
    "node_id": "MDQ6VXNlcjkzNzIxMDk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/9372109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vinothkannans",
    "html_url": "https://github.com/vinothkannans",
    "followers_url": "https://api.github.com/users/vinothkannans/followers",
    "following_url": "https://api.github.com/users/vinothkannans/following{/other_user}",
    "gists_url": "https://api.github.com/users/vinothkannans/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vinothkannans/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vinothkannans/subscriptions",
    "organizations_url": "https://api.github.com/users/vinothkannans/orgs",
    "repos_url": "https://api.github.com/users/vinothkannans/repos",
    "events_url": "https://api.github.com/users/vinothkannans/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vinothkannans/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2cb805a6832e2d442f729fea80c76442375c6be6",
      "url": "https://api.github.com/repos/discourse/discourse/commits/2cb805a6832e2d442f729fea80c76442375c6be6",
      "html_url": "https://github.com/discourse/discourse/commit/2cb805a6832e2d442f729fea80c76442375c6be6"
    }
  ],
  "stats": {
    "total": 116,
    "additions": 57,
    "deletions": 59
  },
  "files": [
    {
      "sha": "cd768407ff1866abdde7f24bdb772aa4d8f06004",
      "filename": "app/assets/javascripts/admin/components/site-setting.js.es6",
      "status": "modified",
      "additions": 0,
      "deletions": 59,
      "changes": 59,
      "blob_url": "https://github.com/discourse/discourse/blob/8d69944b4ecb4b32672641dda8fd927dbe2354e8/app/assets/javascripts/admin/components/site-setting.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/8d69944b4ecb4b32672641dda8fd927dbe2354e8/app/assets/javascripts/admin/components/site-setting.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/components/site-setting.js.es6?ref=8d69944b4ecb4b32672641dda8fd927dbe2354e8",
      "patch": "@@ -2,8 +2,6 @@ import Component from \"@ember/component\";\n import BufferedContent from \"discourse/mixins/buffered-content\";\n import SiteSetting from \"admin/models/site-setting\";\n import SettingComponent from \"admin/mixins/setting-component\";\n-import showModal from \"discourse/lib/show-modal\";\n-import AboutRoute from \"discourse/routes/about\";\n \n export default Component.extend(BufferedContent, SettingComponent, {\n   updateExistingUsers: null,\n@@ -13,62 +11,5 @@ export default Component.extend(BufferedContent, SettingComponent, {\n     return SiteSetting.update(setting.get(\"setting\"), setting.get(\"value\"), {\n       updateExistingUsers: this.updateExistingUsers\n     });\n-  },\n-\n-  actions: {\n-    update() {\n-      const defaultUserPreferences = [\n-        \"default_email_digest_frequency\",\n-        \"default_include_tl0_in_digests\",\n-        \"default_email_level\",\n-        \"default_email_messages_level\",\n-        \"default_email_mailing_list_mode\",\n-        \"default_email_mailing_list_mode_frequency\",\n-        \"disable_mailing_list_mode\",\n-        \"default_email_previous_replies\",\n-        \"default_email_in_reply_to\",\n-        \"default_other_new_topic_duration_minutes\",\n-        \"default_other_auto_track_topics_after_msecs\",\n-        \"default_other_notification_level_when_replying\",\n-        \"default_other_external_links_in_new_tab\",\n-        \"default_other_enable_quoting\",\n-        \"default_other_enable_defer\",\n-        \"default_other_dynamic_favicon\",\n-        \"default_other_like_notification_frequency\",\n-        \"default_topics_automatic_unpin\",\n-        \"default_categories_watching\",\n-        \"default_categories_tracking\",\n-        \"default_categories_muted\",\n-        \"default_categories_watching_first_post\",\n-        \"default_tags_watching\",\n-        \"default_tags_tracking\",\n-        \"default_tags_muted\",\n-        \"default_tags_watching_first_post\",\n-        \"default_text_size\",\n-        \"default_title_count_mode\"\n-      ];\n-      const key = this.buffered.get(\"setting\");\n-\n-      if (defaultUserPreferences.includes(key)) {\n-        AboutRoute.create()\n-          .model()\n-          .then(result => {\n-            const controller = showModal(\"site-setting-default-categories\", {\n-              model: {\n-                count: result.stats.user_count,\n-                key: key.replace(/_/g, \" \")\n-              },\n-              admin: true\n-            });\n-\n-            controller.set(\"onClose\", () => {\n-              this.updateExistingUsers = controller.updateExistingUsers;\n-              this.send(\"save\");\n-            });\n-          });\n-      } else {\n-        this.send(\"save\");\n-      }\n-    }\n   }\n });"
    },
    {
      "sha": "a8040a63ca3b2221e6b15eacc99a8a8c098137e6",
      "filename": "app/assets/javascripts/admin/mixins/setting-component.js.es6",
      "status": "modified",
      "additions": 57,
      "deletions": 0,
      "changes": 57,
      "blob_url": "https://github.com/discourse/discourse/blob/8d69944b4ecb4b32672641dda8fd927dbe2354e8/app/assets/javascripts/admin/mixins/setting-component.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/8d69944b4ecb4b32672641dda8fd927dbe2354e8/app/assets/javascripts/admin/mixins/setting-component.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/admin/mixins/setting-component.js.es6?ref=8d69944b4ecb4b32672641dda8fd927dbe2354e8",
      "patch": "@@ -3,6 +3,8 @@ import computed from \"ember-addons/ember-computed-decorators\";\n import { categoryLinkHTML } from \"discourse/helpers/category-link\";\n import { on } from \"@ember/object/evented\";\n import Mixin from \"@ember/object/mixin\";\n+import showModal from \"discourse/lib/show-modal\";\n+import AboutRoute from \"discourse/routes/about\";\n \n const CUSTOM_TYPES = [\n   \"bool\",\n@@ -114,6 +116,61 @@ export default Mixin.create({\n   },\n \n   actions: {\n+    update() {\n+      const defaultUserPreferences = [\n+        \"default_email_digest_frequency\",\n+        \"default_include_tl0_in_digests\",\n+        \"default_email_level\",\n+        \"default_email_messages_level\",\n+        \"default_email_mailing_list_mode\",\n+        \"default_email_mailing_list_mode_frequency\",\n+        \"disable_mailing_list_mode\",\n+        \"default_email_previous_replies\",\n+        \"default_email_in_reply_to\",\n+        \"default_other_new_topic_duration_minutes\",\n+        \"default_other_auto_track_topics_after_msecs\",\n+        \"default_other_notification_level_when_replying\",\n+        \"default_other_external_links_in_new_tab\",\n+        \"default_other_enable_quoting\",\n+        \"default_other_enable_defer\",\n+        \"default_other_dynamic_favicon\",\n+        \"default_other_like_notification_frequency\",\n+        \"default_topics_automatic_unpin\",\n+        \"default_categories_watching\",\n+        \"default_categories_tracking\",\n+        \"default_categories_muted\",\n+        \"default_categories_watching_first_post\",\n+        \"default_tags_watching\",\n+        \"default_tags_tracking\",\n+        \"default_tags_muted\",\n+        \"default_tags_watching_first_post\",\n+        \"default_text_size\",\n+        \"default_title_count_mode\"\n+      ];\n+      const key = this.buffered.get(\"setting\");\n+\n+      if (defaultUserPreferences.includes(key)) {\n+        AboutRoute.create()\n+          .model()\n+          .then(result => {\n+            const controller = showModal(\"site-setting-default-categories\", {\n+              model: {\n+                count: result.stats.user_count,\n+                key: key.replace(/_/g, \" \")\n+              },\n+              admin: true\n+            });\n+\n+            controller.set(\"onClose\", () => {\n+              this.updateExistingUsers = controller.updateExistingUsers;\n+              this.send(\"save\");\n+            });\n+          });\n+      } else {\n+        this.send(\"save\");\n+      }\n+    },\n+\n     save() {\n       this._save()\n         .then(() => {"
    }
  ]
}
