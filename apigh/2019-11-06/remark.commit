{
  "sha": "7536e265b22c1c543138309b5843300a2a16413d",
  "node_id": "MDY6Q29tbWl0MTE0ODI5NTAzOjc1MzZlMjY1YjIyYzFjNTQzMTM4MzA5YjU4NDMzMDBhMmExNjQxM2Q=",
  "commit": {
    "author": {
      "name": "Dmitry Verkhoturov",
      "email": "paskal.07@gmail.com",
      "date": "2019-11-06T00:13:25Z"
    },
    "committer": {
      "name": "Umputun",
      "email": "umputun@gmail.com",
      "date": "2019-11-06T00:13:25Z"
    },
    "message": "Change coveralls to use build-in GITHUB_TOKEN (#465)\n\n* change coveralls to use build-in GITHUB_TOKEN (should work in forks)\r\n\r\n* send GITHUB_REF as GIT_BRANCH\r\n\r\n* add debug output\r\n\r\n* change service to github\r\n\r\n* remove debug output\r\n\r\n* move COVERALLS_TOKEN to environment, remove argument",
    "tree": {
      "sha": "7b883fe9b6e084fc406f0d3f779bbec48d3bc63c",
      "url": "https://api.github.com/repos/umputun/remark/git/trees/7b883fe9b6e084fc406f0d3f779bbec48d3bc63c"
    },
    "url": "https://api.github.com/repos/umputun/remark/git/commits/7536e265b22c1c543138309b5843300a2a16413d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/umputun/remark/commits/7536e265b22c1c543138309b5843300a2a16413d",
  "html_url": "https://github.com/umputun/remark/commit/7536e265b22c1c543138309b5843300a2a16413d",
  "comments_url": "https://api.github.com/repos/umputun/remark/commits/7536e265b22c1c543138309b5843300a2a16413d/comments",
  "author": {
    "login": "paskal",
    "id": 712534,
    "node_id": "MDQ6VXNlcjcxMjUzNA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/712534?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paskal",
    "html_url": "https://github.com/paskal",
    "followers_url": "https://api.github.com/users/paskal/followers",
    "following_url": "https://api.github.com/users/paskal/following{/other_user}",
    "gists_url": "https://api.github.com/users/paskal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paskal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paskal/subscriptions",
    "organizations_url": "https://api.github.com/users/paskal/orgs",
    "repos_url": "https://api.github.com/users/paskal/repos",
    "events_url": "https://api.github.com/users/paskal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paskal/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "umputun",
    "id": 535880,
    "node_id": "MDQ6VXNlcjUzNTg4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/535880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/umputun",
    "html_url": "https://github.com/umputun",
    "followers_url": "https://api.github.com/users/umputun/followers",
    "following_url": "https://api.github.com/users/umputun/following{/other_user}",
    "gists_url": "https://api.github.com/users/umputun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/umputun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/umputun/subscriptions",
    "organizations_url": "https://api.github.com/users/umputun/orgs",
    "repos_url": "https://api.github.com/users/umputun/repos",
    "events_url": "https://api.github.com/users/umputun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/umputun/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4c7e454d8688225cbead47578a5e0d656439223e",
      "url": "https://api.github.com/repos/umputun/remark/commits/4c7e454d8688225cbead47578a5e0d656439223e",
      "html_url": "https://github.com/umputun/remark/commit/4c7e454d8688225cbead47578a5e0d656439223e"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 3,
    "deletions": 9
  },
  "files": [
    {
      "sha": "50e04c28016c2efee86d1076f565b14372e3fb31",
      "filename": ".github/workflows/ci-build.yml",
      "status": "modified",
      "additions": 3,
      "deletions": 9,
      "changes": 12,
      "blob_url": "https://github.com/umputun/remark/blob/7536e265b22c1c543138309b5843300a2a16413d/.github/workflows/ci-build.yml",
      "raw_url": "https://github.com/umputun/remark/raw/7536e265b22c1c543138309b5843300a2a16413d/.github/workflows/ci-build.yml",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/.github/workflows/ci-build.yml?ref=7536e265b22c1c543138309b5843300a2a16413d",
      "patch": "@@ -51,17 +51,11 @@ jobs:\n \n     - name: submit coverage\n       run: |\n-        export GIT_BRANCH=\"${GITHUB_REF/refs\\/heads\\//}\"\n-        export GIT_TAG=\"${GITHUB_REF/refs\\/tags\\//}\"\n-\n-        if [[ \"$GIT_TAG\" != \"$GITHUB_REF\" ]]; then\n-          export GIT_BRANCH=$GIT_TAG\n-        fi\n-\n+        export GIT_BRANCH=$GITHUB_REF\n         cd backend\n-        $(go env GOPATH)/bin/goveralls -service=\"GitHub Action\" -coverprofile=$GITHUB_WORKSPACE/profile.cov -repotoken $COVERALLS_TOKEN\n+        $(go env GOPATH)/bin/goveralls -service=\"github\" -coverprofile=$GITHUB_WORKSPACE/profile.cov\n       env:\n-        COVERALLS_TOKEN: ${{secrets.COVERALLS_TOKEN}}\n+        COVERALLS_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n \n     - name: build docker image\n       run: docker build --build-arg SKIP_BACKEND_TEST=true --build-arg CI=github ."
    }
  ]
}
