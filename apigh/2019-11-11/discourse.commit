{
  "sha": "55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo1NWJkZDllNmEyZGMxZGFmZmExZmNhMThlY2FkMzYwZDZiNjRhYjIw",
  "commit": {
    "author": {
      "name": "Dan Ungureanu",
      "email": "dan@ungureanu.me",
      "date": "2019-11-11T16:42:45Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2019-11-11T16:42:45Z"
    },
    "message": "FIX: Do not skip some emails in user search (#8317)\n\nIt used to skip the email addresses containing the plus sign.",
    "tree": {
      "sha": "a46d8467b6a6d1310d0fd3114f298b4fe5990c90",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/a46d8467b6a6d1310d0fd3114f298b4fe5990c90"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdyY+FCRBK7hj4Ov3rIwAAdHIIAIkLXTuFkqNHhEJ6x9YzI19v\nPm5clZg4Nj+MXeHbGLNIuL0CphNQfS3Z5OrKK/LbCOlE0jnaogCUQ4HhmtDRmjfT\nlRAXu48Q2/OWdrGSkc5BLGDSQGJtzbYY+ffDT1IyMOeSygfsODPzMeI/5oZtu/Wc\n7Mx1f2FeNVhpsRQmETsOdqeW37a69cbMdg2imIY7IYEKdP47ckiqJbxkffy50KAT\n71WV6oYykRNMONrovtu+Boo1cw8Ll0+Duj/jx42z0B3DR0Nzclh2xAlwDTWd+I1c\nMXY2uHN/m0iET0cvEjA1WDURNSIKjP57Vt9Ss8sK2KNTvL+/26eLG/4pSm3HWWY=\n=y8+a\n-----END PGP SIGNATURE-----\n",
      "payload": "tree a46d8467b6a6d1310d0fd3114f298b4fe5990c90\nparent 6672dcc985a56a8b357a9fa3590311cecbcff75f\nauthor Dan Ungureanu <dan@ungureanu.me> 1573490565 +0200\ncommitter GitHub <noreply@github.com> 1573490565 +0200\n\nFIX: Do not skip some emails in user search (#8317)\n\nIt used to skip the email addresses containing the plus sign."
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
  "html_url": "https://github.com/discourse/discourse/commit/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20/comments",
  "author": {
    "login": "udan11",
    "id": 4147664,
    "node_id": "MDQ6VXNlcjQxNDc2NjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4147664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/udan11",
    "html_url": "https://github.com/udan11",
    "followers_url": "https://api.github.com/users/udan11/followers",
    "following_url": "https://api.github.com/users/udan11/following{/other_user}",
    "gists_url": "https://api.github.com/users/udan11/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/udan11/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/udan11/subscriptions",
    "organizations_url": "https://api.github.com/users/udan11/orgs",
    "repos_url": "https://api.github.com/users/udan11/repos",
    "events_url": "https://api.github.com/users/udan11/events{/privacy}",
    "received_events_url": "https://api.github.com/users/udan11/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6672dcc985a56a8b357a9fa3590311cecbcff75f",
      "url": "https://api.github.com/repos/discourse/discourse/commits/6672dcc985a56a8b357a9fa3590311cecbcff75f",
      "html_url": "https://github.com/discourse/discourse/commit/6672dcc985a56a8b357a9fa3590311cecbcff75f"
    }
  ],
  "stats": {
    "total": 5,
    "additions": 4,
    "deletions": 1
  },
  "files": [
    {
      "sha": "b1a75ae34e4b26a71d2cfcd5f36b970123887494",
      "filename": "app/assets/javascripts/discourse/lib/user-search.js.es6",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20/app/assets/javascripts/discourse/lib/user-search.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20/app/assets/javascripts/discourse/lib/user-search.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/assets/javascripts/discourse/lib/user-search.js.es6?ref=55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
      "patch": "@@ -136,7 +136,7 @@ function organizeResults(r, options) {\n // will not find me, which is a reasonable compromise\n //\n // we also ignore if we notice a double space or a string that is only a space\n-const ignoreRegex = /([\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,\\/:;<=>?\\[\\]^`{|}~])|\\s\\s|^\\s$/;\n+const ignoreRegex = /([\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*,\\/:;<=>?\\[\\]^`{|}~])|\\s\\s|^\\s$|^[^+]*\\+[^@]*$/;\n \n function skipSearch(term, allowEmails) {\n   if (term.indexOf(\"@\") > -1 && !allowEmails) {"
    },
    {
      "sha": "c93a87564d9be007d7098e6184f33cfb7eb42417",
      "filename": "test/javascripts/lib/user-search-test.js.es6",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/discourse/discourse/blob/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20/test/javascripts/lib/user-search-test.js.es6",
      "raw_url": "https://github.com/discourse/discourse/raw/55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20/test/javascripts/lib/user-search-test.js.es6",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/test/javascripts/lib/user-search-test.js.es6?ref=55bdd9e6a2dc1daffa1fca18ecad360d6b64ab20",
      "patch": "@@ -169,6 +169,9 @@ QUnit.test(\"it skips a search depending on punctuations\", async assert => {\n   // 6 + email\n   assert.equal(results.length, 7);\n \n+  results = await userSearch({ term: \"sam+test@sam.com\", allowEmails: true });\n+  assert.equal(results.length, 7);\n+\n   results = await userSearch({ term: \"sam@sam.com\" });\n   assert.equal(results.length, 0);\n "
    }
  ]
}
