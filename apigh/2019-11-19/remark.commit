{
  "sha": "773da16649da8bc499cbb4c78f33466058e087e1",
  "node_id": "MDY6Q29tbWl0MTE0ODI5NTAzOjc3M2RhMTY2NDlkYThiYzQ5OWNiYjRjNzhmMzM0NjYwNThlMDg3ZTE=",
  "commit": {
    "author": {
      "name": "Dmitry Verkhoturov",
      "email": "paskal.07@gmail.com",
      "date": "2019-11-17T21:47:01Z"
    },
    "committer": {
      "name": "Umputun",
      "email": "umputun@gmail.com",
      "date": "2019-11-17T21:47:01Z"
    },
    "message": "Improve memory store tests reliability (#479)\n\n* remove unnecessary GIT_BRANCH export\r\n\r\n* go mod tidy\r\n\r\n* fix tests naming, improve coverage\r\n\r\n* make flaky TestMemData_FlagListBlocked reliable",
    "tree": {
      "sha": "e313f0a5b0d46cf68be9d66081bc2844f7099998",
      "url": "https://api.github.com/repos/umputun/remark/git/trees/e313f0a5b0d46cf68be9d66081bc2844f7099998"
    },
    "url": "https://api.github.com/repos/umputun/remark/git/commits/773da16649da8bc499cbb4c78f33466058e087e1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/umputun/remark/commits/773da16649da8bc499cbb4c78f33466058e087e1",
  "html_url": "https://github.com/umputun/remark/commit/773da16649da8bc499cbb4c78f33466058e087e1",
  "comments_url": "https://api.github.com/repos/umputun/remark/commits/773da16649da8bc499cbb4c78f33466058e087e1/comments",
  "author": {
    "login": "paskal",
    "id": 712534,
    "node_id": "MDQ6VXNlcjcxMjUzNA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/712534?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paskal",
    "html_url": "https://github.com/paskal",
    "followers_url": "https://api.github.com/users/paskal/followers",
    "following_url": "https://api.github.com/users/paskal/following{/other_user}",
    "gists_url": "https://api.github.com/users/paskal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paskal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paskal/subscriptions",
    "organizations_url": "https://api.github.com/users/paskal/orgs",
    "repos_url": "https://api.github.com/users/paskal/repos",
    "events_url": "https://api.github.com/users/paskal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paskal/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "umputun",
    "id": 535880,
    "node_id": "MDQ6VXNlcjUzNTg4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/535880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/umputun",
    "html_url": "https://github.com/umputun",
    "followers_url": "https://api.github.com/users/umputun/followers",
    "following_url": "https://api.github.com/users/umputun/following{/other_user}",
    "gists_url": "https://api.github.com/users/umputun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/umputun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/umputun/subscriptions",
    "organizations_url": "https://api.github.com/users/umputun/orgs",
    "repos_url": "https://api.github.com/users/umputun/repos",
    "events_url": "https://api.github.com/users/umputun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/umputun/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6f969a0a76acad13a063937bfdcc5f3b987fde77",
      "url": "https://api.github.com/repos/umputun/remark/commits/6f969a0a76acad13a063937bfdcc5f3b987fde77",
      "html_url": "https://github.com/umputun/remark/commit/6f969a0a76acad13a063937bfdcc5f3b987fde77"
    }
  ],
  "stats": {
    "total": 153,
    "additions": 65,
    "deletions": 88
  },
  "files": [
    {
      "sha": "8d280089318d660c786dbb16fab8ce7468b39164",
      "filename": ".github/workflows/ci-build.yml",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/.github/workflows/ci-build.yml",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/.github/workflows/ci-build.yml",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/.github/workflows/ci-build.yml?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -53,7 +53,6 @@ jobs:\n \n     - name: submit coverage\n       run: |\n-        export GIT_BRANCH=$GITHUB_REF\n         cd backend\n         $(go env GOPATH)/bin/goveralls -service=\"github\" -coverprofile=$GITHUB_WORKSPACE/profile.cov\n       env:"
    },
    {
      "sha": "d55b255b304be09b48ced158ec1fc295db39be41",
      "filename": "backend/_example/memory_store/accessor/admin_test.go",
      "status": "modified",
      "additions": 8,
      "deletions": 2,
      "changes": 10,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/admin_test.go",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/admin_test.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/accessor/admin_test.go?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -21,9 +21,9 @@ func TestMemAdmin_Get(t *testing.T) {\n \n \tadm.data = map[string]AdminRec{\n \t\t\"site1\": {\"site1\", []string{\"i11\", \"i12\"}, \"e1\", true, 0},\n-\t\t\"site2\": {\"site2\", []string{\"i21\", \"i22\"}, \"e2\", true, 0},\n-\t\t\"site3\": {\"site3\", []string{\"i21\", \"i22\"}, \"e3\", false, 0},\n \t}\n+\tadm.Set(\"site2\", AdminRec{\"site2\", []string{\"i21\", \"i22\"}, \"e2\", true, 0})\n+\tadm.Set(\"site3\", AdminRec{\"site3\", []string{\"i21\", \"i22\"}, \"e3\", false, 0})\n \n \tadmins, err := ms.Admins(\"site1\")\n \tassert.NoError(t, err)\n@@ -61,4 +61,10 @@ func TestMemAdmin_Get(t *testing.T) {\n \n \tenabled, err = ms.Enabled(\"no-site-in-db\")\n \tassert.EqualError(t, err, \"site no-site-in-db not found\")\n+\n+\terr = ms.OnEvent(\"site1\", admin.EvCreate)\n+\tassert.NoError(t, err)\n+\n+\terr = ms.OnEvent(\"no-site-in-db\", admin.EvCreate)\n+\tassert.Error(t, err)\n }"
    },
    {
      "sha": "866b1064c6b8b8f4a4cd01cfe72e15862a7376fc",
      "filename": "backend/_example/memory_store/accessor/data.go",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/data.go",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/data.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/accessor/data.go?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -280,7 +280,7 @@ func (m *MemData) ListFlags(req engine.FlagRequest) (res []interface{}, err erro\n \treturn nil, errors.Errorf(\"flag %s not listable\", req.Flag)\n }\n \n-// Delete post(s) by id or by userID\n+// Delete post(s), user, comment, or everything\n func (m *MemData) Delete(req engine.DeleteRequest) error {\n \n \tm.Lock()"
    },
    {
      "sha": "44e3fcaf73045e9ee2d54139c3f4b236737a42fb",
      "filename": "backend/_example/memory_store/accessor/data_test.go",
      "status": "modified",
      "additions": 46,
      "deletions": 25,
      "changes": 71,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/data_test.go",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/accessor/data_test.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/accessor/data_test.go?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -20,7 +20,7 @@ import (\n \t\"github.com/umputun/remark/backend/app/store/engine\"\n )\n \n-func TestMem_CreateAndFind(t *testing.T) {\n+func TestMemData_CreateAndFind(t *testing.T) {\n \tm := prepMem(t) // adds two comments\n \n \treq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}, Sort: \"time\"}\n@@ -29,7 +29,6 @@ func TestMem_CreateAndFind(t *testing.T) {\n \trequire.Equal(t, 2, len(res))\n \tassert.Equal(t, `some text, <a href=\"http://radio-t.com\">link</a>`, res[0].Text)\n \tassert.Equal(t, \"user1\", res[0].User.ID)\n-\tt.Log(res[0].ID)\n \n \t_, err = m.Create(store.Comment{ID: res[0].ID, Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}})\n \trequire.NotNil(t, err)\n@@ -44,7 +43,7 @@ func TestMem_CreateAndFind(t *testing.T) {\n \trequire.Equal(t, 1, len(res))\n }\n \n-func TestMem_CreateFailedReadOnly(t *testing.T) {\n+func TestMemData_CreateFailedReadOnly(t *testing.T) {\n \tb := prepMem(t)\n \tcomment := store.Comment{\n \t\tID:        \"id-ro\",\n@@ -72,7 +71,7 @@ func TestMem_CreateFailedReadOnly(t *testing.T) {\n \tassert.NoError(t, err)\n }\n \n-func TestMem_Get(t *testing.T) {\n+func TestMemData_Get(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}, Sort: \"time\"}\n \tres, err := b.Find(req)\n@@ -90,7 +89,7 @@ func TestMem_Get(t *testing.T) {\n \tassert.EqualError(t, err, `not found`)\n }\n \n-func TestMem_Update(t *testing.T) {\n+func TestMemData_Update(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}, Sort: \"time\"}\n \tres, err := b.Find(req)\n@@ -119,7 +118,7 @@ func TestMem_Update(t *testing.T) {\n \tassert.EqualError(t, err, `not found`)\n }\n \n-func TestMem_FindLast(t *testing.T) {\n+func TestMemData_FindLast(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{SiteID: \"radio-t\"}, Sort: \"-time\"}\n \tres, err := b.Find(req)\n@@ -139,7 +138,7 @@ func TestMem_FindLast(t *testing.T) {\n \tassert.Equal(t, 0, len(res))\n }\n \n-func TestMem_FindLastSince(t *testing.T) {\n+func TestMemData_FindLastSince(t *testing.T) {\n \tb := prepMem(t)\n \tts := time.Date(2017, 12, 20, 15, 18, 21, 0, time.Local)\n \treq := engine.FindRequest{Locator: store.Locator{SiteID: \"radio-t\"}, Sort: \"-time\", Since: ts}\n@@ -160,7 +159,7 @@ func TestMem_FindLastSince(t *testing.T) {\n \tassert.Equal(t, 0, len(res))\n }\n \n-func TestMem_FindForUser(t *testing.T) {\n+func TestMemData_FindForUser(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{SiteID: \"radio-t\"}, Sort: \"-time\", UserID: \"user1\", Limit: 5}\n \tres, err := b.Find(req)\n@@ -191,7 +190,7 @@ func TestMem_FindForUser(t *testing.T) {\n \tassert.Equal(t, 0, len(res), \"no comments\")\n }\n \n-func TestMem_FindForUserPagination(t *testing.T) {\n+func TestMemData_FindForUserPagination(t *testing.T) {\n \tb := NewMemData()\n \n \tc := store.Comment{\n@@ -246,7 +245,7 @@ func TestMem_FindForUserPagination(t *testing.T) {\n \tassert.Equal(t, 0, len(res))\n }\n \n-func TestMem_CountPost(t *testing.T) {\n+func TestMemData_CountPost(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}}\n \tc, err := b.Count(req)\n@@ -262,9 +261,13 @@ func TestMem_CountPost(t *testing.T) {\n \tc, err = b.Count(req)\n \tassert.NoError(t, err)\n \tassert.Equal(t, 0, c)\n+\n+\tc, err = b.Count(engine.FindRequest{})\n+\tassert.Error(t, err)\n+\tassert.Equal(t, 0, c)\n }\n \n-func TestMem_CountUser(t *testing.T) {\n+func TestMemData_CountUser(t *testing.T) {\n \tb := prepMem(t)\n \treq := engine.FindRequest{Locator: store.Locator{SiteID: \"radio-t\"}, UserID: \"user1\"}\n \tc, err := b.Count(req)\n@@ -282,7 +285,7 @@ func TestMem_CountUser(t *testing.T) {\n \tassert.Equal(t, 0, c)\n }\n \n-func TestMem_InfoPost(t *testing.T) {\n+func TestMemData_InfoPost(t *testing.T) {\n \tb := prepMem(t)\n \tts := func(min int) time.Time { return time.Date(2017, 12, 20, 15, 18, min, 0, time.Local).In(time.UTC) }\n \n@@ -321,6 +324,9 @@ func TestMem_InfoPost(t *testing.T) {\n \t_, err = b.Info(req)\n \trequire.NotNil(t, err)\n \n+\t_, err = b.Info(engine.InfoRequest{})\n+\trequire.Error(t, err)\n+\n \tfr := engine.FlagRequest{Flag: engine.ReadOnly,\n \t\tLocator: store.Locator{URL: \"https://radio-t.com/2\", SiteID: \"radio-t\"}, Update: engine.FlagTrue}\n \t_, err = b.Flag(fr)\n@@ -332,7 +338,7 @@ func TestMem_InfoPost(t *testing.T) {\n \t\tReadOnly: true}}, r)\n }\n \n-func TestMem_InfoList(t *testing.T) {\n+func TestMemData_InfoList(t *testing.T) {\n \tb := prepMem(t)\n \t// add one more for https://radio-t.com/2\n \tcomment := store.Comment{\n@@ -375,7 +381,7 @@ func TestMem_InfoList(t *testing.T) {\n \tassert.Equal(t, []store.PostInfo{}, res)\n }\n \n-func TestMem_FlagBlockedUser(t *testing.T) {\n+func TestMemData_FlagBlockedUser(t *testing.T) {\n \n \tb := prepMem(t)\n \treq := engine.FlagRequest{Locator: store.Locator{SiteID: \"radio-t\"}, UserID: \"user1\"}\n@@ -408,7 +414,7 @@ func TestMem_FlagBlockedUser(t *testing.T) {\n \tassert.False(t, val, \"user1 unblocked\")\n }\n \n-func TestMem_FlagReadOnlyPost(t *testing.T) {\n+func TestMemData_FlagReadOnlyPost(t *testing.T) {\n \n \tb := prepMem(t)\n \treq := engine.FlagRequest{Locator: store.Locator{SiteID: \"radio-t\", URL: \"url-1\"}, Flag: engine.ReadOnly}\n@@ -440,7 +446,7 @@ func TestMem_FlagReadOnlyPost(t *testing.T) {\n \tassert.False(t, val, \"url-1 writable\")\n }\n \n-func TestMem_FlagVerified(t *testing.T) {\n+func TestMemData_FlagVerified(t *testing.T) {\n \n \tb := prepMem(t)\n \tisVerified := func(site, user string) bool {\n@@ -475,7 +481,7 @@ func TestMem_FlagVerified(t *testing.T) {\n \tassert.NoError(t, setVerified(\"radio-t\", \"u3\", engine.FlagFalse))\n }\n \n-func TestMem_FlagListVerified(t *testing.T) {\n+func TestMemData_FlagListVerified(t *testing.T) {\n \n \tb := prepMem(t)\n \ttoIDs := func(inp []interface{}) (res []string) {\n@@ -508,9 +514,13 @@ func TestMem_FlagListVerified(t *testing.T) {\n \tids, err = b.ListFlags(engine.FlagRequest{Flag: engine.Verified, Locator: store.Locator{SiteID: \"radio-t-bad\"}})\n \tassert.NoError(t, err)\n \tassert.Equal(t, 0, len(ids))\n+\n+\tids, err = b.ListFlags(engine.FlagRequest{})\n+\tassert.Error(t, err)\n+\tassert.Equal(t, 0, len(ids))\n }\n \n-func TestMem_FlagListBlocked(t *testing.T) {\n+func TestMemData_FlagListBlocked(t *testing.T) {\n \n \tb := prepMem(t)\n \tsetBlocked := func(site, user string, status engine.FlagStatus, ttl time.Duration) error {\n@@ -537,9 +547,12 @@ func TestMem_FlagListBlocked(t *testing.T) {\n \tassert.NoError(t, err)\n \n \tblockedList := toBlocked(vv)\n+\tvar blockedIds []string\n+\tfor _, x := range blockedList {\n+\t\tblockedIds = append(blockedIds, x.ID)\n+\t}\n \trequire.Equal(t, 2, len(blockedList), b.metaUsers)\n-\tassert.Equal(t, \"user1\", blockedList[0].ID)\n-\tassert.Equal(t, \"user2\", blockedList[1].ID)\n+\tassert.ElementsMatch(t, []string{\"user1\", \"user2\"}, blockedIds)\n \tt.Logf(\"%+v\", blockedList)\n \n \t// check block expiration\n@@ -555,7 +568,7 @@ func TestMem_FlagListBlocked(t *testing.T) {\n \tassert.Equal(t, 0, len(vv))\n }\n \n-func TestMem_DeleteComment(t *testing.T) {\n+func TestMemData_DeleteComment(t *testing.T) {\n \n \tb := prepMem(t)\n \treqReq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}, Sort: \"time\"}\n@@ -603,9 +616,17 @@ func TestMem_DeleteComment(t *testing.T) {\n \tdelReq.Locator = store.Locator{URL: \"https://radio-t.com/bad\", SiteID: \"radio-t\"}\n \terr = b.Delete(delReq)\n \tassert.EqualError(t, err, `not found`)\n+\n+\terr = b.Delete(engine.DeleteRequest{Locator: store.Locator{SiteID: \"bad\"}})\n+\tassert.Error(t, err)\n+}\n+\n+func TestMemData_Close(t *testing.T) {\n+\tb := prepMem(t)\n+\tassert.NoError(t, b.Close())\n }\n \n-func TestMem_DeleteHard(t *testing.T) {\n+func TestMemData_DeleteHard(t *testing.T) {\n \n \tb := prepMem(t)\n \treqReq := engine.FindRequest{Locator: store.Locator{URL: \"https://radio-t.com\", SiteID: \"radio-t\"}, Sort: \"time\"}\n@@ -626,7 +647,7 @@ func TestMem_DeleteHard(t *testing.T) {\n \tassert.Equal(t, store.User{Name: \"deleted\", ID: \"deleted\", Picture: \"\", Admin: false, Blocked: false, IP: \"\"}, res[0].User)\n }\n \n-func TestMem_DeleteAll(t *testing.T) {\n+func TestMemData_DeleteAll(t *testing.T) {\n \tb := prepMem(t)\n \tdelReq := engine.DeleteRequest{Locator: store.Locator{SiteID: \"radio-t\"}}\n \terr := b.Delete(delReq)\n@@ -637,7 +658,7 @@ func TestMem_DeleteAll(t *testing.T) {\n \tassert.Equal(t, 0, len(comments), \"nothing left\")\n }\n \n-func TestBoltAdmin_DeleteUserHard(t *testing.T) {\n+func TestMemAdmin_DeleteUserHard(t *testing.T) {\n \tb := prepMem(t)\n \terr := b.Delete(engine.DeleteRequest{Locator: store.Locator{SiteID: \"radio-t\"}, UserID: \"user1\",\n \t\tDeleteMode: store.HardDelete})\n@@ -662,7 +683,7 @@ func TestBoltAdmin_DeleteUserHard(t *testing.T) {\n \tassert.Equal(t, 0, len(comments), \"nothing left\")\n }\n \n-func TestBoltAdmin_DeleteUserSoft(t *testing.T) {\n+func TestMemAdmin_DeleteUserSoft(t *testing.T) {\n \n \tb := prepMem(t)\n \terr := b.Delete(engine.DeleteRequest{Locator: store.Locator{SiteID: \"radio-t\"}, UserID: \"user1\","
    },
    {
      "sha": "73c87ea92b4d719dc117e7070886515601ef13d9",
      "filename": "backend/_example/memory_store/go.sum",
      "status": "modified",
      "additions": 4,
      "deletions": 55,
      "changes": 59,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/go.sum",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/go.sum",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/go.sum?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -2,10 +2,8 @@ cloud.google.com/go v0.26.0/go.mod h1:aQUYkXzVsufM+DwF1aE+0xfcU+56JwCaLick0ClmMT\n cloud.google.com/go v0.34.0/go.mod h1:aQUYkXzVsufM+DwF1aE+0xfcU+56JwCaLick0ClmMTw=\n cloud.google.com/go v0.38.0/go.mod h1:990N+gfupTy94rShfmMCWGDn0LpTmnzTp2qbd1dvSRU=\n cloud.google.com/go v0.40.0/go.mod h1:Tk58MuI9rbLMKlAjeO/bDnteAx7tX2gJIXw4T5Jwlro=\n-cloud.google.com/go v0.41.0/go.mod h1:OauMR7DV8fzvZIl2qg6rkaIhD/vmgk4iwEw/h6ercmg=\n cloud.google.com/go v0.44.1/go.mod h1:iSa0KzasP4Uvy3f1mN/7PiObzGgflwredwwASm/v6AU=\n cloud.google.com/go v0.44.2/go.mod h1:60680Gw3Yr4ikxnPRS/oxxkBccT6SA1yMk63TGekxKY=\n-cloud.google.com/go v0.44.3/go.mod h1:60680Gw3Yr4ikxnPRS/oxxkBccT6SA1yMk63TGekxKY=\n cloud.google.com/go v0.45.1/go.mod h1:RpBamKRgapWJb87xiFSdk4g1CME7QZg3uwTez+TSTjc=\n cloud.google.com/go v0.46.3/go.mod h1:a6bKKbmY7er1mI7TEI4lsAkts/mkhTSZK8w33B4RAg0=\n cloud.google.com/go v0.47.0/go.mod h1:5p3Ky/7f3N10VBkhuR5LFtddroTiMyjZV/Kj5qOQFxU=\n@@ -26,15 +24,12 @@ github.com/andybalholm/cascadia v1.0.0 h1:hOCXnnZ5A+3eVDX8pvgl4kofXv2ELss0bKcqRy\n github.com/andybalholm/cascadia v1.0.0/go.mod h1:GsXiBklL0woXo1j/WYWtSYYC4ouU9PqHO0sqidkEA4Y=\n github.com/andybalholm/cascadia v1.1.0 h1:BuuO6sSfQNFRu1LppgbD25Hr2vLYW25JvxHs5zzsLTo=\n github.com/andybalholm/cascadia v1.1.0/go.mod h1:GsXiBklL0woXo1j/WYWtSYYC4ouU9PqHO0sqidkEA4Y=\n-github.com/boltdb/bolt v1.3.1/go.mod h1:clJnj/oiGkjum5o1McbSZDSLxVThjynRyGBgiAx27Ps=\n github.com/chzyer/logex v1.1.10/go.mod h1:+Ywpsq7O8HXn0nuIou7OrIPyXbp3wmkHB+jjWRnGsAI=\n github.com/chzyer/readline v0.0.0-20180603132655-2972be24d48e/go.mod h1:nSuG5e5PlCu98SY8svDHJxuZscDgtXS6KTTbou5AhLI=\n github.com/chzyer/test v0.0.0-20180213035817-a1ea475d72b1/go.mod h1:Q3SI9o4m/ZMnBNeIyt5eFwwo7qiLfzFZmjNmxjkiQlU=\n github.com/client9/misspell v0.3.4/go.mod h1:qj6jICC3Q7zFZvVWo7KLAzC3yx5G7kyvSDkc90ppPyw=\n-github.com/coreos/bbolt v1.3.0/go.mod h1:iRUV2dpdMOn7Bo10OQBFzIJO9kkE559Wcmn+qkEiiKk=\n github.com/coreos/bbolt v1.3.3 h1:n6AiVyVRKQFNb6mJlwESEvvLoDyiTzXX7ORAUlkeBdY=\n github.com/coreos/bbolt v1.3.3/go.mod h1:iRUV2dpdMOn7Bo10OQBFzIJO9kkE559Wcmn+qkEiiKk=\n-github.com/creack/pty v1.1.7/go.mod h1:lj5s0c3V2DBrqTV7llrYr5NG6My20zk30Fl46Y7DoTY=\n github.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\n github.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=\n github.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=\n@@ -50,41 +45,19 @@ github.com/fsnotify/fsnotify v1.4.7/go.mod h1:jwhsz4b93w/PPRr/qN1Yymfu8t87LnFCMo\n github.com/gavv/httpexpect v0.0.0-20180803094507-bdde30871313/go.mod h1:x+9tiU1YnrOvnB725RkpoLv1M62hOWzwo5OXotisrKc=\n github.com/gavv/httpexpect v2.0.0+incompatible/go.mod h1:x+9tiU1YnrOvnB725RkpoLv1M62hOWzwo5OXotisrKc=\n github.com/gavv/monotime v0.0.0-20171021193802-6f8212e8d10d/go.mod h1:vmp8DIyckQMXOPl0AQVHt+7n5h7Gb7hS6CUydiV8QeA=\n-github.com/gavv/monotime v0.0.0-20190418164738-30dba4353424/go.mod h1:vmp8DIyckQMXOPl0AQVHt+7n5h7Gb7hS6CUydiV8QeA=\n-github.com/globalsign/mgo v0.0.0-20180615134936-113d3961e731/go.mod h1:xkRDCp4j0OGD1HRkm4kmhM+pmpv3AKq5SU7GMg4oO/Q=\n-github.com/globalsign/mgo v0.0.0-20181015135952-eeefdecb41b8 h1:DujepqpGd1hyOd7aW59XpK7Qymp8iy83xq74fLr21is=\n-github.com/globalsign/mgo v0.0.0-20181015135952-eeefdecb41b8/go.mod h1:xkRDCp4j0OGD1HRkm4kmhM+pmpv3AKq5SU7GMg4oO/Q=\n-github.com/go-chi/chi v4.0.1+incompatible/go.mod h1:eB3wogJHnLi3x/kFX2A+IbTBlXxmMeXJVKy9tTv1XzQ=\n github.com/go-chi/chi v4.0.2+incompatible h1:maB6vn6FqCxrpz4FqWdh4+lwpyZIQS7YEAUcHlgXVRs=\n github.com/go-chi/chi v4.0.2+incompatible/go.mod h1:eB3wogJHnLi3x/kFX2A+IbTBlXxmMeXJVKy9tTv1XzQ=\n github.com/go-chi/cors v1.0.0/go.mod h1:K2Yje0VW/SJzxiyMYu6iPQYa7hMjQX2i/F491VChg1I=\n github.com/go-chi/render v1.0.1 h1:4/5tis2cKaNdnv9zFLfXzcquC9HbeZgCnxGnKrltBS8=\n github.com/go-chi/render v1.0.1/go.mod h1:pq4Rr7HbnsdaeHagklXub+p6Wd16Af5l9koip1OvJns=\n github.com/go-gl/glfw v0.0.0-20190409004039-e6da0acd62b1/go.mod h1:vR7hzQXu2zJy9AVAgeJqvqgH9Q5CA+iKCZ2gyEVpxRU=\n-github.com/go-pkgz/auth v0.4.1/go.mod h1:CWtB8dHmOv+TfF3MUzKwk/YwTLepC2TaDL05A+pFVBM=\n-github.com/go-pkgz/auth v0.7.2/go.mod h1:ibOpZYISiaOvAHe2bsKj2s3v4AkMam2WxxIFn+zhulo=\n-github.com/go-pkgz/auth v0.8.0/go.mod h1:MBNrhig13KG0iXz/0d+30lnFUgzTxncUlaQ8suH/2p8=\n-github.com/go-pkgz/auth v0.8.1/go.mod h1:MBNrhig13KG0iXz/0d+30lnFUgzTxncUlaQ8suH/2p8=\n-github.com/go-pkgz/auth v0.8.2/go.mod h1:MBNrhig13KG0iXz/0d+30lnFUgzTxncUlaQ8suH/2p8=\n-github.com/go-pkgz/auth v0.8.3/go.mod h1:Ij9y6oBzfsvutSGWSGwh9C4WyU4hOfxB6rTlj4xBwGE=\n github.com/go-pkgz/auth v0.9.0/go.mod h1:8Kiold3xA9VUiYZwMyMhwBgiGImZFoL/EmtO9lSIQxo=\n-github.com/go-pkgz/auth/_example v0.0.0-20190722170031-705d3f732438/go.mod h1:rvZtFFkmm3p+E0CHmfUqTGKweCVg2ddsRUrEEPB1iaE=\n-github.com/go-pkgz/auth/_example v0.0.0-20190823054154-cc9c87832e19/go.mod h1:M9HLEzuiKQQ+rwGA9bAzmUDguCJi2HyGwKkxb5ouGJU=\n github.com/go-pkgz/jrpc v0.1.0 h1:hNg/IyfEqJcSWOKkuHw0ZwcuGc9TDp7QZREsD2ycmiM=\n github.com/go-pkgz/jrpc v0.1.0/go.mod h1:JxZsvoBklA50DNhELVJnJ567Rt+KrMH9rR3u515wvE8=\n-github.com/go-pkgz/lcw v0.3.1/go.mod h1:k+PY1CkCMTLXILtFoJOyK65Qqi9rkoTYunFH1vE/C0I=\n-github.com/go-pkgz/lcw v0.4.0/go.mod h1:CSdQRQthxJQ4iDD4wTPPuWFbFdknJzwJ8WXu1nfxb10=\n github.com/go-pkgz/lcw v0.5.0/go.mod h1:CSdQRQthxJQ4iDD4wTPPuWFbFdknJzwJ8WXu1nfxb10=\n-github.com/go-pkgz/lgr v0.2.2/go.mod h1:hBM1NM/SoYdlrykgdgJWGrZ/TM/XaZIjRbJfx7NkMm8=\n-github.com/go-pkgz/lgr v0.6.2/go.mod h1:hBM1NM/SoYdlrykgdgJWGrZ/TM/XaZIjRbJfx7NkMm8=\n github.com/go-pkgz/lgr v0.6.3 h1:n9pGk2paBV8w/Y/FVEq5MkwDmP33dnUPKbY4CyyygwM=\n github.com/go-pkgz/lgr v0.6.3/go.mod h1:hBM1NM/SoYdlrykgdgJWGrZ/TM/XaZIjRbJfx7NkMm8=\n-github.com/go-pkgz/mongo v1.0.0/go.mod h1:R9si/F2aJsjz4MUxhzuppIHY8yLV3YCeuCpgcI50cu4=\n-github.com/go-pkgz/mongo v1.1.2 h1:2Vqn3CWQJkkx4gxxDiQUitAW2FN/CH26lKHkipmpKcc=\n-github.com/go-pkgz/mongo v1.1.2/go.mod h1:0NkWnzpiUxoL5fYZuttCtJrpC67oNDidfYxcdPqHTf0=\n-github.com/go-pkgz/repeater v1.1.2/go.mod h1:QfNR/a+xqjs+f9wSxWqOQlw9aQhmKlUaSwXCiZ+Ko2w=\n github.com/go-pkgz/repeater v1.1.3/go.mod h1:hVTavuO5x3Gxnu8zW7d6sQBfAneKV8X2FjU48kGfpKw=\n-github.com/go-pkgz/rest v1.2.0/go.mod h1:COazNj35u3RXAgQNBr6neR599tYP3URiOpsu9p0rOtk=\n github.com/go-pkgz/rest v1.4.1 h1:DmaVLPH2O7yLehrWOW0uz01d2mVHz9fBR/iuTiPRzaw=\n github.com/go-pkgz/rest v1.4.1/go.mod h1:COazNj35u3RXAgQNBr6neR599tYP3URiOpsu9p0rOtk=\n github.com/go-pkgz/syncs v1.1.1/go.mod h1:bt9lxWRRJ9vOCMGc8Big8ttjYHLKP88ofj1y38UlaHE=\n@@ -104,12 +77,10 @@ github.com/google/btree v0.0.0-20180813153112-4030bb1f1f0c/go.mod h1:lNA+9X1NB3Z\n github.com/google/btree v1.0.0/go.mod h1:lNA+9X1NB3Zf8V7Ke586lFgjr2dZNuvo3lPJSGZ5JPQ=\n github.com/google/go-cmp v0.2.0/go.mod h1:oXzfMopK8JAjlY9xF4vHSVASa0yLyX7SntLO5aqRK0M=\n github.com/google/go-cmp v0.3.0/go.mod h1:8QqcDgzrUqlUb/G2PQTWiueGozuR1884gddMywk6iLU=\n-github.com/google/go-cmp v0.3.1/go.mod h1:8QqcDgzrUqlUb/G2PQTWiueGozuR1884gddMywk6iLU=\n github.com/google/go-querystring v1.0.0/go.mod h1:odCYkC5MyYFN7vkCjXpyrEuKhc/BUO6wN/zVPAxq5ck=\n github.com/google/martian v2.1.0+incompatible/go.mod h1:9I4somxYTbIHy5NJKHRl3wXiIaQGbYVAs8BPL6v8lEs=\n github.com/google/pprof v0.0.0-20181206194817-3ea8567a2e57/go.mod h1:zfwlbNMJ+OItoe0UupaVj+oy1omPYYDuagoSzA8v9mc=\n github.com/google/pprof v0.0.0-20190515194954-54271f7e092f/go.mod h1:zfwlbNMJ+OItoe0UupaVj+oy1omPYYDuagoSzA8v9mc=\n-github.com/google/pprof v0.0.0-20190723021845-34ac40c74b70/go.mod h1:zfwlbNMJ+OItoe0UupaVj+oy1omPYYDuagoSzA8v9mc=\n github.com/google/renameio v0.1.0/go.mod h1:KWCgfxg9yswjAJkECMjeO8J8rahYeXnNhOm40UhjYkI=\n github.com/google/uuid v1.1.1/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=\n github.com/googleapis/gax-go/v2 v2.0.4/go.mod h1:0Wqv26UfaUD9n4G6kQubkQ+KchISgw+vpHVxEJEs9eg=\n@@ -140,9 +111,10 @@ github.com/klauspost/compress v1.4.0/go.mod h1:RyIbtBH6LamlWaDj8nUwkbUhJ87Yi3uG0\n github.com/klauspost/compress v1.7.6/go.mod h1:RyIbtBH6LamlWaDj8nUwkbUhJ87Yi3uG0guNDohfE1A=\n github.com/klauspost/cpuid v0.0.0-20180405133222-e7e905edc00e/go.mod h1:Pj4uuM528wm8OyEC2QMXAi2YiTZ96dNQPGgoMS4s3ek=\n github.com/klauspost/cpuid v1.2.1/go.mod h1:Pj4uuM528wm8OyEC2QMXAi2YiTZ96dNQPGgoMS4s3ek=\n+github.com/kr/pretty v0.1.0 h1:L/CwN0zerZDmRFUapSPitk6f+Q3+0za1rQkzVuMiMFI=\n github.com/kr/pretty v0.1.0/go.mod h1:dAy3ld7l9f0ibDNOQOHHMYYIIbhfbHSm3C4ZsoJORNo=\n github.com/kr/pty v1.1.1/go.mod h1:pFQYn66WHrOpPYNljwOMqo10TkYh1fy3cYio2l3bCsQ=\n-github.com/kr/pty v1.1.8/go.mod h1:O1sed60cT9XZ5uDucP5qwvh+TE3NnUj51EiZO/lmSfw=\n+github.com/kr/text v0.1.0 h1:45sCR5RtlFHMR4UwH9sdQ5TC8v0qDQCHnXt+kaKSTVE=\n github.com/kr/text v0.1.0/go.mod h1:4Jbv+DJW3UT/LiOwJeYQe1efqtUx/iVham/4vfdArNI=\n github.com/kyokomi/emoji v2.1.0+incompatible/go.mod h1:mZ6aGCD7yk8j6QY6KICwnZ2pxoszVseX1DNoGtU2tBA=\n github.com/mattn/go-colorable v0.0.9/go.mod h1:9vuHe8Xs5qXnSaW/c/ABM9alt+Vo+STaOChaDxuIBZU=\n@@ -181,7 +153,6 @@ github.com/smartystreets/assertions v1.0.1/go.mod h1:kHHU4qYBaI3q23Pp3VPrmWhuIUr\n github.com/smartystreets/goconvey v0.0.0-20181108003508-044398e4856c/go.mod h1:XDJAKZRPZ1CvBcN2aX5YOUTYGHki24fSF0Iv48Ibg0s=\n github.com/smartystreets/goconvey v0.0.0-20190731233626-505e41936337/go.mod h1:syvi0/a8iFYH4r/RixwvyeAJjdLS9QV7WQ/tjFTllLA=\n github.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\n-github.com/stretchr/objx v0.1.1/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\n github.com/stretchr/objx v0.2.0 h1:Hbg2NidpLE8veEBkEZTL3CvlkUIVzuU9jDplZO54c48=\n github.com/stretchr/objx v0.2.0/go.mod h1:qt09Ya8vawLte6SNmTgCsAVtYtaKzEcn8ATUoHMkEqE=\n github.com/stretchr/testify v1.2.2/go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=\n@@ -199,7 +170,6 @@ github.com/tidwall/match v1.0.1/go.mod h1:LujAq0jyVjBy028G1WhWfIzbpQfMO8bBZ6Tyb0\n github.com/tidwall/pretty v1.0.0/go.mod h1:XNkn88O1ChpSDQmQeStsy+sBenx6DDtFZJxhVysOjyk=\n github.com/tidwall/rtree v0.0.0-20180113144539-6cd427091e0e/go.mod h1:/h+UnNGt0IhNNJLkGikcdcJqm66zGD/uJGMRxK/9+Ao=\n github.com/tidwall/tinyqueue v0.0.0-20180302190814-1e39f5511563/go.mod h1:mLqSmt7Dv/CNneF2wfcChfN1rvapyQr01LGKnKex0DQ=\n-github.com/umputun/remark v1.4.0 h1:rJf4ndpvRDS7tOrtIpVkacItTxF5pVpXvDqtb1dX40M=\n github.com/valyala/bytebufferpool v1.0.0/go.mod h1:6bBcMArwyJ5K/AmCkWv1jt77kVWyCJ6HpOuEn7z0Csc=\n github.com/valyala/fasthttp v1.0.0/go.mod h1:4vX61m6KN+xDduDNwXrhIAVZaZaZiQ1luJk8LWSxF3s=\n github.com/valyala/fasthttp v1.4.0/go.mod h1:4vX61m6KN+xDduDNwXrhIAVZaZaZiQ1luJk8LWSxF3s=\n@@ -225,21 +195,15 @@ go.opencensus.io v0.22.0/go.mod h1:+kGneAE2xo2IficOXnaByMWTGM9T73dGwxeWcUqIpI8=\n golang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=\n golang.org/x/crypto v0.0.0-20190510104115-cbcb75029529/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\n golang.org/x/crypto v0.0.0-20190605123033-f99c8df09eb5/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\n-golang.org/x/crypto v0.0.0-20190701094942-4def268fd1a4/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\n-golang.org/x/crypto v0.0.0-20190820162420-60c769a6c586/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\n golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550/go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=\n golang.org/x/exp v0.0.0-20190121172915-509febef88a4/go.mod h1:CJ0aWSM057203Lf6IL+f9T1iT9GByDxfZKAQTCR3kQA=\n golang.org/x/exp v0.0.0-20190306152737-a1d7652674e8/go.mod h1:CJ0aWSM057203Lf6IL+f9T1iT9GByDxfZKAQTCR3kQA=\n golang.org/x/exp v0.0.0-20190510132918-efd6b22b2522/go.mod h1:ZjyILWgesfNpC6sMxTJOJm9Kp84zZh5NQWvqDGG3Qr8=\n-golang.org/x/exp v0.0.0-20190731235908-ec7cb31e5a56/go.mod h1:JhuoJpWY28nO4Vef9tZUw9qufEGTyX1+7lmHxV5q5G4=\n golang.org/x/exp v0.0.0-20190829153037-c13cbed26979/go.mod h1:86+5VVa7VpoJ4kLfm080zCjGlMRFzhUhsZKEZO7MGek=\n golang.org/x/exp v0.0.0-20191002040644-a1355ae1e2c3/go.mod h1:NOZ3BPKG0ec/BKJQgnvsSFpcKLM5xXVWnvZS97DWHgE=\n-golang.org/x/image v0.0.0-20181116024801-cd38e8056d9b/go.mod h1:ux5Hcp/YLpHSI86hEcLt0YII63i6oz57MZXIpbrjZUs=\n golang.org/x/image v0.0.0-20190227222117-0694c2d4d067/go.mod h1:kZ7UVZpmo3dzQBMxlp+ypCbDeSB+sBbTgSJuh5dn5js=\n golang.org/x/image v0.0.0-20190523035834-f03afa92d3ff/go.mod h1:kZ7UVZpmo3dzQBMxlp+ypCbDeSB+sBbTgSJuh5dn5js=\n-golang.org/x/image v0.0.0-20190703141733-d6a02ce849c9/go.mod h1:FeLwcggjj3mMvU+oOTbSwawSJRM1uh48EjtB4UJZlP0=\n golang.org/x/image v0.0.0-20190802002840-cff245a6509b/go.mod h1:FeLwcggjj3mMvU+oOTbSwawSJRM1uh48EjtB4UJZlP0=\n-golang.org/x/image v0.0.0-20190823064033-3a9bac650e44/go.mod h1:FeLwcggjj3mMvU+oOTbSwawSJRM1uh48EjtB4UJZlP0=\n golang.org/x/image v0.0.0-20191009234506-e7c1f5e7dbb8/go.mod h1:FeLwcggjj3mMvU+oOTbSwawSJRM1uh48EjtB4UJZlP0=\n golang.org/x/lint v0.0.0-20181026193005-c67002cb31c3/go.mod h1:UVdnD1Gm6xHRNCYTkRU2/jEulfH38KcIWyp/GAMgvoE=\n golang.org/x/lint v0.0.0-20190227174305-5b3e6a55c961/go.mod h1:wehouNa3lNwaWXcvxsM5YxQ5yQlVC4a0KAMCusXpPoU=\n@@ -250,7 +214,6 @@ golang.org/x/lint v0.0.0-20190909230951-414d861bb4ac/go.mod h1:6SW0HCj/g11FgYtHl\n golang.org/x/lint v0.0.0-20190930215403-16217165b5de/go.mod h1:6SW0HCj/g11FgYtHlgUYUwCkIfeOF89ocIRzGO/8vkc=\n golang.org/x/mobile v0.0.0-20190312151609-d3739f865fa6/go.mod h1:z+o9i4GpDbdi3rU15maQ/Ox0txvL9dWGYEHz965HBQE=\n golang.org/x/mobile v0.0.0-20190719004257-d2bd2a29d028/go.mod h1:E/iHnbuqvinMTCcRqshq8CkpyQDoeVncDDYHnLhea+o=\n-golang.org/x/mobile v0.0.0-20190814143026-e8b3e6111d02/go.mod h1:z5wpDCy2wbnXyFdvEuY3LhY9gBUL86/IOILm+Hsjx+E=\n golang.org/x/mod v0.0.0-20190513183733-4bf6d317e70e/go.mod h1:mXi4GBBbnImb6dmsKGUJ2LatrhH/nqhxcFungHvyanc=\n golang.org/x/mod v0.1.0/go.mod h1:0QHyrYULN0/3qlju5TqG8bIK38QM8yzMo5ekMj3DlcY=\n golang.org/x/net v0.0.0-20180218175443-cbe0f9307d01/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n@@ -261,7 +224,6 @@ golang.org/x/net v0.0.0-20180911220305-26e67e76b6c3/go.mod h1:mL1N/T3taQHkDXs73r\n golang.org/x/net v0.0.0-20181114220301-adae6a3d119a/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n golang.org/x/net v0.0.0-20181217023233-e147a9138326/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n golang.org/x/net v0.0.0-20181220203305-927f97764cc3/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n-golang.org/x/net v0.0.0-20190107210223-45ffb0cd1ba0/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n golang.org/x/net v0.0.0-20190108225652-1e06a53dbb7e/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n golang.org/x/net v0.0.0-20190213061140-3a22650c66bd/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=\n golang.org/x/net v0.0.0-20190311183353-d8887717615a/go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=\n@@ -273,12 +235,9 @@ golang.org/x/net v0.0.0-20190611141213-3f473d35a33a/go.mod h1:z5CRVTTTmAJ677TzLL\n golang.org/x/net v0.0.0-20190620200207-3b0461eec859/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=\n golang.org/x/net v0.0.0-20190724013045-ca1201d0de80 h1:Ao/3l156eZf2AW5wK8a7/smtodRU+gha3+BeqJ69lRk=\n golang.org/x/net v0.0.0-20190724013045-ca1201d0de80/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=\n-golang.org/x/net v0.0.0-20190813141303-74dc4d7220e7 h1:fHDIZ2oxGnUZRN6WgWFCbYBjH9uqVPRCUVUDhs0wnbA=\n-golang.org/x/net v0.0.0-20190813141303-74dc4d7220e7/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=\n golang.org/x/net v0.0.0-20191027093000-83d349e8ac1a h1:Yu34BogBivvmu7SAzHHaB9nZWH5D1C+z3F1jyIaYZSQ=\n golang.org/x/net v0.0.0-20191027093000-83d349e8ac1a/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=\n golang.org/x/oauth2 v0.0.0-20180821212333-d2e6202438be/go.mod h1:N/0e6XlmueqKjAGxoOufVs8QHGRruUQn6yWY3a++T0U=\n-golang.org/x/oauth2 v0.0.0-20181203162652-d668ce993890/go.mod h1:N/0e6XlmueqKjAGxoOufVs8QHGRruUQn6yWY3a++T0U=\n golang.org/x/oauth2 v0.0.0-20190226205417-e64efc72b421/go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=\n golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45/go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=\n golang.org/x/sync v0.0.0-20180314180146-1d60e4601c6f/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=\n@@ -289,7 +248,6 @@ golang.org/x/sync v0.0.0-20190423024810-112230192c58/go.mod h1:RxMgew5VJxzue5/jJ\n golang.org/x/sync v0.0.0-20190911185100-cd5d95a43a6e/go.mod h1:RxMgew5VJxzue5/jJTE5uejpjVlOe/izrB70Jof72aM=\n golang.org/x/sys v0.0.0-20180830151530-49385e6e1522/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n golang.org/x/sys v0.0.0-20180909124046-d0be0721c37e/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n-golang.org/x/sys v0.0.0-20190109145017-48ac38b7c8cb/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n golang.org/x/sys v0.0.0-20190204203706-41f3e6584952/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n golang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n golang.org/x/sys v0.0.0-20190222072716-a9d3bda3a223/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=\n@@ -300,10 +258,8 @@ golang.org/x/sys v0.0.0-20190507160741-ecd444e8653b/go.mod h1:h1NjWce9XRLGQEsW7w\n golang.org/x/sys v0.0.0-20190606165138-5da285871e9c/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n golang.org/x/sys v0.0.0-20190610200419-93c9922d18ae/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n golang.org/x/sys v0.0.0-20190624142023-c5567b49c5d0/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n-golang.org/x/sys v0.0.0-20190626221950-04f50cda93cb/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n-golang.org/x/sys v0.0.0-20190801041406-cbf593c0f2f3 h1:4y9KwBHBgBNwDbtu44R5o1fdOCQUEXhbk/P4A9WmJq0=\n-golang.org/x/sys v0.0.0-20190801041406-cbf593c0f2f3/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n golang.org/x/sys v0.0.0-20190813064441-fde4db37ae7a/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n+golang.org/x/sys v0.0.0-20191026070338-33540a1f6037 h1:YyJpGZS1sBuBCzLAR1VEpK193GlqGZbnPFnPV/5Rsb4=\n golang.org/x/sys v0.0.0-20191026070338-33540a1f6037/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=\n golang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\n golang.org/x/text v0.3.1-0.20180807135948-17ff2d5776d2/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=\n@@ -323,14 +279,10 @@ golang.org/x/tools v0.0.0-20190312170243-e65039ee4138/go.mod h1:LCzVGOaR6xXOjkQ3\n golang.org/x/tools v0.0.0-20190328211700-ab21143f2384/go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=\n golang.org/x/tools v0.0.0-20190425150028-36563e24a262/go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=\n golang.org/x/tools v0.0.0-20190506145303-2d16b83fe98c/go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=\n-golang.org/x/tools v0.0.0-20190524140312-2c0ae7006135/go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=\n golang.org/x/tools v0.0.0-20190606124116-d0a3d012864b/go.mod h1:/rFqwRUd4F7ZHNgwSSTFct+R/Kf4OFW1sUzUTQQTgfc=\n golang.org/x/tools v0.0.0-20190621195816-6e04913cbbac/go.mod h1:/rFqwRUd4F7ZHNgwSSTFct+R/Kf4OFW1sUzUTQQTgfc=\n-golang.org/x/tools v0.0.0-20190624190245-7f2218787638/go.mod h1:/rFqwRUd4F7ZHNgwSSTFct+R/Kf4OFW1sUzUTQQTgfc=\n golang.org/x/tools v0.0.0-20190628153133-6cdbf07be9d0/go.mod h1:/rFqwRUd4F7ZHNgwSSTFct+R/Kf4OFW1sUzUTQQTgfc=\n-golang.org/x/tools v0.0.0-20190808195139-e713427fea3f/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n golang.org/x/tools v0.0.0-20190816200558-6889da9d5479/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n-golang.org/x/tools v0.0.0-20190822191935-b1e2c8edcefd/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n golang.org/x/tools v0.0.0-20190911174233-4f2ddba30aff/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n golang.org/x/tools v0.0.0-20190927191325-030b2cf1153e/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n golang.org/x/tools v0.0.0-20191010171213-8abd42400456/go.mod h1:b+2E5dAYhXwXZwtnZ6UAqBI28+e2cm9otk0dWdXHAEo=\n@@ -351,16 +303,15 @@ google.golang.org/genproto v0.0.0-20190418145605-e7d98fc518a7/go.mod h1:VzzqZJRn\n google.golang.org/genproto v0.0.0-20190425155659-357c62f0e4bb/go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5/KpmUdxsrq26oE=\n google.golang.org/genproto v0.0.0-20190502173448-54afdca5d873/go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5/KpmUdxsrq26oE=\n google.golang.org/genproto v0.0.0-20190530194941-fb225487d101/go.mod h1:z3L6/3dTEVtUr6QSP8miRzeRqwQOioJ9I66odjN4I7s=\n-google.golang.org/genproto v0.0.0-20190626174449-989357319d63/go.mod h1:z3L6/3dTEVtUr6QSP8miRzeRqwQOioJ9I66odjN4I7s=\n google.golang.org/genproto v0.0.0-20190801165951-fa694d86fc64/go.mod h1:DMBHOl98Agz4BDEuKkezgsaosCRResVns1a3J2ZsMNc=\n google.golang.org/genproto v0.0.0-20190819201941-24fa4b261c55/go.mod h1:DMBHOl98Agz4BDEuKkezgsaosCRResVns1a3J2ZsMNc=\n google.golang.org/genproto v0.0.0-20190911173649-1774047e7e51/go.mod h1:IbNlFCBrqXvoKpeg0TB2l7cyZUmoaFKYIwrEpbDKLA8=\n google.golang.org/genproto v0.0.0-20191009194640-548a555dbc03/go.mod h1:n3cpQtvxv34hfy77yVDNjmbRyujviMdxYliBSkLhpCc=\n google.golang.org/grpc v1.19.0/go.mod h1:mqu4LbDTu4XGKhr4mRzUsmM4RtVoemTSY81AxZiDr8c=\n google.golang.org/grpc v1.20.1/go.mod h1:10oTOabMzJvdu6/UiuZezV6QK5dSlG84ov/aaiqXj38=\n google.golang.org/grpc v1.21.1/go.mod h1:oYelfM1adQP15Ek0mdvEgi9Df8B9CZIaU1084ijfRaM=\n-google.golang.org/grpc v1.23.0/go.mod h1:Y5yQAOtifL1yxbo5wqy6BxZv8vAUGQwXBOALyacEbxg=\n gopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\n+gopkg.in/check.v1 v1.0.0-20180628173108-788fd7840127 h1:qIbj1fsPNlZgppZ+VLlY7N33q108Sa+fhmuc+sWQYwY=\n gopkg.in/check.v1 v1.0.0-20180628173108-788fd7840127/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=\n gopkg.in/errgo.v2 v2.1.0/go.mod h1:hNsd1EY+bozCKY1Ytp96fpM3vjJbqLJn88ws8XvfDNI=\n gopkg.in/fsnotify.v1 v1.4.7/go.mod h1:Tz8NjZHkW78fSQdbUxIjBTcgA1z1m8ZHf0WmKUhAMys=\n@@ -375,7 +326,5 @@ gopkg.in/yaml.v2 v2.2.4/go.mod h1:hI93XBmqTisBFMUTm0b8Fm+jr3Dg1NNxqwp+5A1VGuI=\n honnef.co/go/tools v0.0.0-20190102054323-c2f93a96b099/go.mod h1:rf3lG4BRIbNafJWhAfAdb/ePZxsR/4RtNHQocxwk9r4=\n honnef.co/go/tools v0.0.0-20190106161140-3f1c8253044a/go.mod h1:rf3lG4BRIbNafJWhAfAdb/ePZxsR/4RtNHQocxwk9r4=\n honnef.co/go/tools v0.0.0-20190418001031-e561f6794a2a/go.mod h1:rf3lG4BRIbNafJWhAfAdb/ePZxsR/4RtNHQocxwk9r4=\n-honnef.co/go/tools v0.0.0-20190523083050-ea95bdfd59fc/go.mod h1:rf3lG4BRIbNafJWhAfAdb/ePZxsR/4RtNHQocxwk9r4=\n-honnef.co/go/tools v0.0.1-2019.2.2/go.mod h1:a3bituU0lyd329TUQxRnasdCoJDkEUEAqEt0JzvZhAg=\n honnef.co/go/tools v0.0.1-2019.2.3/go.mod h1:a3bituU0lyd329TUQxRnasdCoJDkEUEAqEt0JzvZhAg=\n rsc.io/binaryregexp v0.2.0/go.mod h1:qTv7/COck+e2FymRvadv62gMdZztPaShugOCi3I+8D8="
    },
    {
      "sha": "8335faae457dbb1ef07bf599b3c8c0659c104395",
      "filename": "backend/_example/memory_store/server/rpc.go",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/server/rpc.go",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/server/rpc.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/server/rpc.go?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -129,7 +129,7 @@ func (s *RPC) listFlagsHndl(id uint64, params json.RawMessage) (rr jrpc.Response\n \treturn jrpc.EncodeResponse(id, flags, err)\n }\n \n-// deleteHndl remove comment(s)\n+// deleteHndl delete post(s), user, comment, or everything\n func (s *RPC) deleteHndl(id uint64, params json.RawMessage) (rr jrpc.Response) {\n \treq := engine.DeleteRequest{}\n \tif err := json.Unmarshal(params, &req); err != nil {"
    },
    {
      "sha": "fc6b6e98cf60b32c9047df1b03e5b40846cf049d",
      "filename": "backend/_example/memory_store/server/rpc_test.go",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/umputun/remark/blob/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/server/rpc_test.go",
      "raw_url": "https://github.com/umputun/remark/raw/773da16649da8bc499cbb4c78f33466058e087e1/backend/_example/memory_store/server/rpc_test.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/_example/memory_store/server/rpc_test.go?ref=773da16649da8bc499cbb4c78f33466058e087e1",
      "patch": "@@ -14,12 +14,13 @@ import (\n \t\"time\"\n \n \t\"github.com/go-pkgz/jrpc\"\n+\tlog \"github.com/go-pkgz/lgr\"\n \t\"github.com/stretchr/testify/assert\"\n \t\"github.com/stretchr/testify/require\"\n-\n \t\"github.com/umputun/remark/backend/app/store\"\n \t\"github.com/umputun/remark/backend/app/store/admin\"\n \t\"github.com/umputun/remark/backend/app/store/engine\"\n+\n \t\"github.com/umputun/remark/memory_store/accessor\"\n )\n \n@@ -344,9 +345,10 @@ func prepTestStore(t *testing.T) (s *RPC, port int, teardown func()) {\n \tadm.Set(\"test-site-disabled\", admRecDisabled)\n \n \tgo func() {\n-\t\tt.Log(s.Run(port))\n+\t\tlog.Printf(\"%v\", s.Run(port))\n \t}()\n-\ttime.Sleep(time.Millisecond * 10)\n+\n+\ttime.Sleep(time.Millisecond * 50) // wait for server to start\n \n \treturn s, port, func() {\n \t\trequire.NoError(t, s.Shutdown())"
    }
  ]
}
