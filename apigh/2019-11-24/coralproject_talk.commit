{
  "sha": "f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZjFjZGNiMTQ5YmJmYjgyODI3ODBkZjdhM2U0ZDQ2MDJmZDBlOWU5Ng==",
  "commit": {
    "author": {
      "name": "Nick Funk",
      "email": "nick.funk@outlook.com",
      "date": "2019-11-22T23:50:52Z"
    },
    "committer": {
      "name": "Wyatt Johnson",
      "email": "wyattjoh@gmail.com",
      "date": "2019-11-22T23:50:52Z"
    },
    "message": "[CORL-625] Create link details in the moderation card details tabs (#2721)\n\n* Create link details in the moderation card details tabs\r\n\r\nCORL-625\r\n\r\n* Use getURLWithCommentID and getLocationOrigin to generate URLs\r\n\r\nCORL-625",
    "tree": {
      "sha": "217fb39b11e99795edb59bcb273cf7a2d96549b1",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/217fb39b11e99795edb59bcb273cf7a2d96549b1"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
  "html_url": "https://github.com/coralproject/talk/commit/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/comments",
  "author": {
    "login": "nick-funk",
    "id": 5751504,
    "node_id": "MDQ6VXNlcjU3NTE1MDQ=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5751504?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nick-funk",
    "html_url": "https://github.com/nick-funk",
    "followers_url": "https://api.github.com/users/nick-funk/followers",
    "following_url": "https://api.github.com/users/nick-funk/following{/other_user}",
    "gists_url": "https://api.github.com/users/nick-funk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nick-funk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nick-funk/subscriptions",
    "organizations_url": "https://api.github.com/users/nick-funk/orgs",
    "repos_url": "https://api.github.com/users/nick-funk/repos",
    "events_url": "https://api.github.com/users/nick-funk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nick-funk/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "wyattjoh",
    "id": 633002,
    "node_id": "MDQ6VXNlcjYzMzAwMg==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/633002?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wyattjoh",
    "html_url": "https://github.com/wyattjoh",
    "followers_url": "https://api.github.com/users/wyattjoh/followers",
    "following_url": "https://api.github.com/users/wyattjoh/following{/other_user}",
    "gists_url": "https://api.github.com/users/wyattjoh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wyattjoh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wyattjoh/subscriptions",
    "organizations_url": "https://api.github.com/users/wyattjoh/orgs",
    "repos_url": "https://api.github.com/users/wyattjoh/repos",
    "events_url": "https://api.github.com/users/wyattjoh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wyattjoh/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bf89fc2b3e77fddfe50d497e493063fe4898fe41",
      "url": "https://api.github.com/repos/coralproject/talk/commits/bf89fc2b3e77fddfe50d497e493063fe4898fe41",
      "html_url": "https://github.com/coralproject/talk/commit/bf89fc2b3e77fddfe50d497e493063fe4898fe41"
    }
  ],
  "stats": {
    "total": 128,
    "additions": 123,
    "deletions": 5
  },
  "files": [
    {
      "sha": "984d48138ac9c926f06ebd10303ea4db10ccbf12",
      "filename": "src/core/client/admin/components/ModerateCard/LinkDetailsContainer.css",
      "status": "added",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/coralproject/talk/blob/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.css",
      "raw_url": "https://github.com/coralproject/talk/raw/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.css?ref=f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
      "patch": "@@ -0,0 +1,16 @@\n+.label {\n+  font-size: calc(16rem / var(--rem-base));\n+  font-weight: var(--font-weight-regular);\n+  font-family: var(--font-family-sans-serif);\n+  color: var(--palette-text-primary);\n+}\n+\n+.buttonContainer {\n+  display: inline-block;\n+  padding-right: var(--spacing-2);\n+}\n+\n+.button {\n+  border-bottom-left-radius: 0px;\n+  border-bottom-right-radius: 0px;\n+}"
    },
    {
      "sha": "e0701d61bbdf687f5c7d786eea96e501e41c5efb",
      "filename": "src/core/client/admin/components/ModerateCard/LinkDetailsContainer.tsx",
      "status": "added",
      "additions": 88,
      "deletions": 0,
      "changes": 88,
      "blob_url": "https://github.com/coralproject/talk/blob/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/LinkDetailsContainer.tsx?ref=f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
      "patch": "@@ -0,0 +1,88 @@\n+import { Localized } from \"fluent-react/compat\";\n+import React, { FunctionComponent } from \"react\";\n+import CopyToClipboard from \"react-copy-to-clipboard\";\n+\n+import { getURLWithCommentID } from \"coral-framework/helpers\";\n+import { graphql, withFragmentContainer } from \"coral-framework/lib/relay\";\n+import { getLocationOrigin } from \"coral-framework/utils\";\n+import { Button, Icon } from \"coral-ui/components\";\n+\n+import { LinkDetailsContainer_comment } from \"coral-admin/__generated__/LinkDetailsContainer_comment.graphql\";\n+import { LinkDetailsContainer_settings } from \"coral-admin/__generated__/LinkDetailsContainer_settings.graphql\";\n+\n+import styles from \"./LinkDetailsContainer.css\";\n+\n+interface Props {\n+  comment: LinkDetailsContainer_comment;\n+  settings: LinkDetailsContainer_settings;\n+}\n+\n+const LinkDetailsContainer: FunctionComponent<Props> = ({\n+  comment,\n+  settings,\n+}) => {\n+  return (\n+    <>\n+      <div className={styles.label}>\n+        <Localized id=\"moderate-linkDetails-label\">\n+          Copy link to this comment\n+        </Localized>\n+      </div>\n+      <div className={styles.buttonContainer}>\n+        <CopyToClipboard\n+          text={getURLWithCommentID(comment.story.url, comment.id)}\n+        >\n+          <Button\n+            color=\"primary\"\n+            variant=\"filled\"\n+            size=\"small\"\n+            className={styles.button}\n+          >\n+            <Icon size=\"md\">link</Icon>\n+            <Localized id=\"moderate-in-stream-link-copy\">\n+              <span>In Stream</span>\n+            </Localized>\n+          </Button>\n+        </CopyToClipboard>\n+      </div>\n+      <div className={styles.buttonContainer}>\n+        <CopyToClipboard\n+          text={`${getLocationOrigin()}/admin/moderate/comment/${comment.id}`}\n+        >\n+          <Button\n+            color=\"primary\"\n+            variant=\"filled\"\n+            size=\"small\"\n+            className={styles.button}\n+          >\n+            <Icon size=\"md\">link</Icon>\n+            <Localized id=\"moderate-in-moderation-link-copy\">\n+              <span>In Moderation</span>\n+            </Localized>\n+          </Button>\n+        </CopyToClipboard>\n+      </div>\n+    </>\n+  );\n+};\n+\n+const enhanced = withFragmentContainer<Props>({\n+  comment: graphql`\n+    fragment LinkDetailsContainer_comment on Comment {\n+      id\n+      story {\n+        id\n+        url\n+      }\n+    }\n+  `,\n+  settings: graphql`\n+    fragment LinkDetailsContainer_settings on Settings {\n+      organization {\n+        url\n+      }\n+    }\n+  `,\n+})(LinkDetailsContainer);\n+\n+export default enhanced;"
    },
    {
      "sha": "5ffb17e8c6e6ad1c204ed196803306b8d43fdfd8",
      "filename": "src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "status": "modified",
      "additions": 12,
      "deletions": 5,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/ModerateCardDetailsContainer.tsx?ref=f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
      "patch": "@@ -10,6 +10,7 @@ import { ModerateCardDetailsContainer_settings as SettingsData } from \"coral-adm\n \n import CommentRevisionContainer from \"./CommentRevisionContainer\";\n import FlagDetailsContainer from \"./FlagDetailsContainer\";\n+import LinkDetailsContainer from \"./LinkDetailsContainer\";\n \n import styles from \"./ModerateCardDetailsContainer.css\";\n \n@@ -61,11 +62,15 @@ const ModerateCardDetailsContainer: FunctionComponent<Props> = ({\n         )}\n       </TabBar>\n       {activeTab === \"DETAILS\" && (\n-        <FlagDetailsContainer\n-          comment={comment}\n-          settings={settings}\n-          onUsernameClick={onUsernameClick}\n-        />\n+        <>\n+          <LinkDetailsContainer comment={comment} settings={settings} />\n+          <hr />\n+          <FlagDetailsContainer\n+            comment={comment}\n+            settings={settings}\n+            onUsernameClick={onUsernameClick}\n+          />\n+        </>\n       )}\n       {activeTab === \"HISTORY\" && (\n         <CommentRevisionContainer comment={comment} settings={settings} />\n@@ -79,12 +84,14 @@ const enhanced = withFragmentContainer<Props>({\n     fragment ModerateCardDetailsContainer_comment on Comment {\n       ...FlagDetailsContainer_comment\n       ...CommentRevisionContainer_comment\n+      ...LinkDetailsContainer_comment\n     }\n   `,\n   settings: graphql`\n     fragment ModerateCardDetailsContainer_settings on Settings {\n       ...FlagDetailsContainer_settings\n       ...CommentRevisionContainer_settings\n+      ...LinkDetailsContainer_settings\n     }\n   `,\n })(ModerateCardDetailsContainer);"
    },
    {
      "sha": "1b76e3efb94c98a87d30776439ec2664e6fe8336",
      "filename": "src/core/client/admin/test/fixtures.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/test/fixtures.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/core/client/admin/test/fixtures.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/fixtures.ts?ref=f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
      "patch": "@@ -449,6 +449,7 @@ export const stories = createFixtures<GQLStory>([\n     isClosed: false,\n     status: GQLSTORY_STATUS.OPEN,\n     createdAt: \"2018-11-29T16:01:51.897Z\",\n+    url: \"\",\n     metadata: {\n       author: \"Vin Hoa\",\n       title: \"Finally a Cure for Cancer\",\n@@ -461,6 +462,7 @@ export const stories = createFixtures<GQLStory>([\n     isClosed: false,\n     status: GQLSTORY_STATUS.OPEN,\n     createdAt: \"2018-11-29T16:01:51.897Z\",\n+    url: \"\",\n     metadata: {\n       author: \"Linh Nguyen\",\n       title: \"First Colony on Mars\",\n@@ -473,6 +475,7 @@ export const stories = createFixtures<GQLStory>([\n     createdAt: \"2018-11-29T16:01:51.897Z\",\n     isClosed: true,\n     status: GQLSTORY_STATUS.CLOSED,\n+    url: \"\",\n     metadata: {\n       author: undefined,\n       title: \"World hunger has been defeated\","
    },
    {
      "sha": "6e99e7fbf5a49da2b136de95c46c46de2b39e2ca",
      "filename": "src/locales/en-US/admin.ftl",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/locales/en-US/admin.ftl",
      "raw_url": "https://github.com/coralproject/talk/raw/f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96/src/locales/en-US/admin.ftl",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/locales/en-US/admin.ftl?ref=f1cdcb149bbfb8282780df7a3e4d4602fd0e9e96",
      "patch": "@@ -407,6 +407,10 @@ moderate-toxicityLabel-likely = Likely <score></score>\n moderate-toxicityLabel-unlikely = Unlikely <score></score>\n moderate-toxicityLabel-maybe = Maybe <score></score>\n \n+moderate-linkDetails-label = Copy link to this comment\n+moderate-in-stream-link-copy = In Stream\n+moderate-in-moderation-link-copy = In Moderation\n+\n moderate-emptyQueue-pending = Nicely done! There are no more pending comments to moderate.\n moderate-emptyQueue-reported = Nicely done! There are no more reported comments to moderate.\n moderate-emptyQueue-unmoderated = Nicely done! All comments have been moderated."
    }
  ]
}
