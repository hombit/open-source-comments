{
  "sha": "540d828ea1a766e90f68a40a9c1d7a989e90e14c",
  "node_id": "MDY6Q29tbWl0MTE0ODI5NTAzOjU0MGQ4MjhlYTFhNzY2ZTkwZjY4YTQwYTljMWQ3YTk4OWU5MGUxNGM=",
  "commit": {
    "author": {
      "name": "Dmitry Verkhoturov",
      "email": "paskal.07@gmail.com",
      "date": "2020-01-17T23:15:10Z"
    },
    "committer": {
      "name": "Umputun",
      "email": "umputun@gmail.com",
      "date": "2020-01-17T23:19:19Z"
    },
    "message": "fix ParentCommentDate in email template, fix #561",
    "tree": {
      "sha": "ebe1df39294eee180378e60ffffe8e098019acda",
      "url": "https://api.github.com/repos/umputun/remark/git/trees/ebe1df39294eee180378e60ffffe8e098019acda"
    },
    "url": "https://api.github.com/repos/umputun/remark/git/commits/540d828ea1a766e90f68a40a9c1d7a989e90e14c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/umputun/remark/commits/540d828ea1a766e90f68a40a9c1d7a989e90e14c",
  "html_url": "https://github.com/umputun/remark/commit/540d828ea1a766e90f68a40a9c1d7a989e90e14c",
  "comments_url": "https://api.github.com/repos/umputun/remark/commits/540d828ea1a766e90f68a40a9c1d7a989e90e14c/comments",
  "author": {
    "login": "paskal",
    "id": 712534,
    "node_id": "MDQ6VXNlcjcxMjUzNA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/712534?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paskal",
    "html_url": "https://github.com/paskal",
    "followers_url": "https://api.github.com/users/paskal/followers",
    "following_url": "https://api.github.com/users/paskal/following{/other_user}",
    "gists_url": "https://api.github.com/users/paskal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paskal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paskal/subscriptions",
    "organizations_url": "https://api.github.com/users/paskal/orgs",
    "repos_url": "https://api.github.com/users/paskal/repos",
    "events_url": "https://api.github.com/users/paskal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paskal/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "umputun",
    "id": 535880,
    "node_id": "MDQ6VXNlcjUzNTg4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/535880?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/umputun",
    "html_url": "https://github.com/umputun",
    "followers_url": "https://api.github.com/users/umputun/followers",
    "following_url": "https://api.github.com/users/umputun/following{/other_user}",
    "gists_url": "https://api.github.com/users/umputun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/umputun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/umputun/subscriptions",
    "organizations_url": "https://api.github.com/users/umputun/orgs",
    "repos_url": "https://api.github.com/users/umputun/repos",
    "events_url": "https://api.github.com/users/umputun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/umputun/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a3d038f75ba708e7069e929f10ed5662eeec1325",
      "url": "https://api.github.com/repos/umputun/remark/commits/a3d038f75ba708e7069e929f10ed5662eeec1325",
      "html_url": "https://github.com/umputun/remark/commit/a3d038f75ba708e7069e929f10ed5662eeec1325"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 7,
    "deletions": 5
  },
  "files": [
    {
      "sha": "530c378fdca983391d7ea1da5cc1cb19b938d26f",
      "filename": "backend/app/notify/email.go",
      "status": "modified",
      "additions": 7,
      "deletions": 5,
      "changes": 12,
      "blob_url": "https://github.com/umputun/remark/blob/540d828ea1a766e90f68a40a9c1d7a989e90e14c/backend/app/notify/email.go",
      "raw_url": "https://github.com/umputun/remark/raw/540d828ea1a766e90f68a40a9c1d7a989e90e14c/backend/app/notify/email.go",
      "contents_url": "https://api.github.com/repos/umputun/remark/contents/backend/app/notify/email.go?ref=540d828ea1a766e90f68a40a9c1d7a989e90e14c",
      "patch": "@@ -78,11 +78,12 @@ type msgTmplData struct {\n \tUserPicture       string\n \tCommentText       string\n \tCommentLink       string\n-\tCommentDate       string\n+\tCommentDate       time.Time\n \tParentUserName    string\n \tParentUserPicture string\n \tParentCommentText string\n \tParentCommentLink string\n+\tParentCommentDate time.Time\n \tPostTitle         string\n \tEmail             string\n \tUnsubscribeLink   string\n@@ -131,7 +132,7 @@ const (\n \t\t\t\t<div style=\"margin-bottom: 12px; line-height: 24px;\">\n \t\t\t\t\t<img src=\"{{.ParentUserPicture}}\" style=\"width: 24px; height: 24px; float: left; margin: 0 8px 0 0; border-radius: 3px; background-color: #ccc;\"/>\n \t\t\t\t\t<span style=\"font-size: 14px; font-weight: bold; color: #777\">{{.ParentUserName}}</span>\n-\t\t\t\t\t<span style=\"color: #999; font-size: 14px; margin: 0 8px;\">{{.CommentDate}}</span>\n+\t\t\t\t\t<span style=\"color: #999; font-size: 14px; margin: 0 8px;\">{{.ParentCommentDate.Format \"02.01.2006 at 15:04\"}}</span>\n \t\t\t\t\t<a href=\"{{.ParentCommentLink}}\" style=\"color: #0aa; font-size: 14px;\"><b>Show</b></a>\n \t\t\t\t</div>\n \t\t\t\t<div style=\"font-size: 14px; color:#333!important; padding: 0 14px 0 2px; border-radius: 3px; line-height: 1.4;\">\n@@ -145,7 +146,7 @@ const (\n \t\t\t\t\t\t{{.UserName}}\n \t\t\t\t\t</div>\n \t\t\t\t\t<div style=\"color: #999; font-size: 14px; margin: 0 8px; float: left;\">\n-\t\t\t\t\t\t{{.CommentDate}}\n+\t\t\t\t\t\t{{.CommentDate.Format \"02.01.2006 at 15:04\"}}\n \t\t\t\t\t</div>\n \t\t\t\t\t<a href=\"{{.CommentLink}}\" style=\"color: #0aa; font-size: 14px;\"><b>Reply</b></a>\n \t\t\t\t</div>\n@@ -159,7 +160,7 @@ const (\n \t\t\t<div style=\"margin: auto; width: 150px; border-top: 1px solid rgba(0, 0, 0, 0.15); padding-top: 15px; margin-top: 15px;\">\n \t\t\t\t<a style=\"color: #0aa;\" href=\"{{.UnsubscribeLink}}\">Unsubscribe</a>\n \t\t\t\t<!-- This is hack for remove collapser in Gmail which can collapse end of the message -->\n-\t\t\t\t<div style=\"opacity: 0;\">[{{.CommentDate}}]</div>\n+\t\t\t\t<div style=\"opacity: 0;\">[{{.CommentDate.Format \"02.01.2006 at 15:04\"}}]</div>\n \t\t\t</div>\n \t\t</div>\n \t</div>\n@@ -301,11 +302,12 @@ func (e *Email) buildMessageFromRequest(req Request) (string, error) {\n \t\tUserPicture:       req.Comment.User.Picture,\n \t\tCommentText:       req.Comment.Text,\n \t\tCommentLink:       commentUrlPrefix + req.Comment.ID,\n-\t\tCommentDate:       req.Comment.Timestamp.Format(\"02.01.2006 at 15:04\"),\n+\t\tCommentDate:       req.Comment.Timestamp,\n \t\tParentUserName:    req.parent.User.Name,\n \t\tParentUserPicture: req.parent.User.Picture,\n \t\tParentCommentText: req.parent.Text,\n \t\tParentCommentLink: commentUrlPrefix + req.parent.ID,\n+\t\tParentCommentDate: req.parent.Timestamp,\n \t\tPostTitle:         req.Comment.PostTitle,\n \t\tEmail:             req.Email,\n \t\tUnsubscribeLink:   unsubscribeLink,"
    }
  ]
}
