{
  "sha": "2b1c9aea7894ecf71a318b48507d0595038d5c24",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6MmIxYzlhZWE3ODk0ZWNmNzFhMzE4YjQ4NTA3ZDA1OTUwMzhkNWMyNA==",
  "commit": {
    "author": {
      "name": "Vinh",
      "email": "vinh@vinh.tech",
      "date": "2020-01-29T22:42:33Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-01-29T22:42:32Z"
    },
    "message": "[CORL-832] IE11 Compatibility for the Embed Stream (#2801)\n\n* IE11 support\r\n\r\n* fix: types and tests\r\n\r\n* chore+fix: optimise polyfills and bugfixes for ie11\r\n\r\n* chore+fix: fix docz, radically cleanup babel configs\r\n\r\n* fix: ie11 proxy bug\r\n\r\n* feat: normalize rte html\r\n\r\n* fix: css issues in ie11\r\n\r\n* chore: improve bundle size\r\n\r\n* chore: upgrade coral rte\r\n\r\n* feat: make counts work in ie11\r\n\r\n* fix: remove native password reveal in ie11\r\n\r\n* fix: markdowneditor icons in ie11\r\n\r\n* fix: ie11 brittleness in auth popup\r\n\r\n* fix: callout width in ie11\r\n\r\n* test: fix snapshots",
    "tree": {
      "sha": "426597afbf7311b83071b90fdfca019c387cb2c8",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/426597afbf7311b83071b90fdfca019c387cb2c8"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/2b1c9aea7894ecf71a318b48507d0595038d5c24",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeMgpZCRBK7hj4Ov3rIwAAdHIIADynBRNy3D13yyFl0ZopywJY\n6C+7DuHcfY1okeEX2MKX1Wn8yTZYTVSOE9qxkexdxUVlq+OEoMeRv686WhNv9uD5\nIuTByH3m6+JCrZ3ZfJcfVNu6ttfUTcvhuiB89Uh7oIBZ3Oi4PaTQyBfukRhu2dgl\nvYbEufbwCrUZyXflVinCSNGqCYgDwDKzuLg4rgsqqoVGJNOBwRCJpt3XzmiFob5P\n7/VcXHV884O4gvu7A8jNqyNseSsz+pdj/1E7eNcwT/tE1jrEOLKnDe7U938JzjV7\ne0Yr1i/BOU+2JAwNQtLDGO3wOxAS7FsMxKRyv1huBRNpkoD3NrNyZ38hKscjwaQ=\n=XXIy\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 426597afbf7311b83071b90fdfca019c387cb2c8\nparent 9c4a9753bbf2dbdfe6a606f37585a84c305d230c\nauthor Vinh <vinh@vinh.tech> 1580337753 +0100\ncommitter GitHub <noreply@github.com> 1580337752 -0500\n\n[CORL-832] IE11 Compatibility for the Embed Stream (#2801)\n\n* IE11 support\r\n\r\n* fix: types and tests\r\n\r\n* chore+fix: optimise polyfills and bugfixes for ie11\r\n\r\n* chore+fix: fix docz, radically cleanup babel configs\r\n\r\n* fix: ie11 proxy bug\r\n\r\n* feat: normalize rte html\r\n\r\n* fix: css issues in ie11\r\n\r\n* chore: improve bundle size\r\n\r\n* chore: upgrade coral rte\r\n\r\n* feat: make counts work in ie11\r\n\r\n* fix: remove native password reveal in ie11\r\n\r\n* fix: markdowneditor icons in ie11\r\n\r\n* fix: ie11 brittleness in auth popup\r\n\r\n* fix: callout width in ie11\r\n\r\n* test: fix snapshots\r\n"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/2b1c9aea7894ecf71a318b48507d0595038d5c24",
  "html_url": "https://github.com/coralproject/talk/commit/2b1c9aea7894ecf71a318b48507d0595038d5c24",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/2b1c9aea7894ecf71a318b48507d0595038d5c24/comments",
  "author": {
    "login": "cvle",
    "id": 14221600,
    "node_id": "MDQ6VXNlcjE0MjIxNjAw",
    "avatar_url": "https://avatars2.githubusercontent.com/u/14221600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cvle",
    "html_url": "https://github.com/cvle",
    "followers_url": "https://api.github.com/users/cvle/followers",
    "following_url": "https://api.github.com/users/cvle/following{/other_user}",
    "gists_url": "https://api.github.com/users/cvle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cvle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cvle/subscriptions",
    "organizations_url": "https://api.github.com/users/cvle/orgs",
    "repos_url": "https://api.github.com/users/cvle/repos",
    "events_url": "https://api.github.com/users/cvle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cvle/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "url": "https://api.github.com/repos/coralproject/talk/commits/9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "html_url": "https://github.com/coralproject/talk/commit/9c4a9753bbf2dbdfe6a606f37585a84c305d230c"
    }
  ],
  "stats": {
    "total": 4865,
    "additions": 3077,
    "deletions": 1788
  },
  "files": [
    {
      "sha": "e98684fc7acb6c64cfeac0e5e6b457064f387976",
      "filename": "babel.config.js",
      "status": "modified",
      "additions": 10,
      "deletions": 18,
      "changes": 28,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/babel.config.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/babel.config.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/babel.config.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,28 +1,20 @@\n /**\n  * This is a project wide babel configuration.\n  * https://babeljs.io/docs/en/config-files#project-wide-configuration\n- *\n- * We use this file to apply babel configuration to packages in `node_modules`\n  */\n \n-const lodashOptimizations =\n+// Note: If Webpack env is set, we are building for the client.\n+\n+const plugins =\n   process.env.WEBPACK === \"true\" ? [\"use-lodash-es\", \"lodash\"] : [];\n \n+const environment =\n+  process.env.WEBPACK === \"true\"\n+    ? { targets: \"IE 11\", modules: false }\n+    : { targets: { node: \"current\" }, modules: \"commonjs\" };\n+\n module.exports = {\n   babelrcRoots: [\"./src/core/client/*\"],\n-  env: {\n-    production: {\n-      plugins: [...lodashOptimizations],\n-    },\n-    development: {\n-      plugins: [...lodashOptimizations],\n-    },\n-    test: {\n-      presets: [\n-        [\"@babel/env\", { targets: { node: \"current\" } }],\n-        \"@babel/react\",\n-      ],\n-      plugins: [\"dynamic-import-node\"],\n-    },\n-  },\n+  plugins,\n+  presets: [[\"@babel/env\", environment]],\n };"
    },
    {
      "sha": "aa99f9914f3e9ca6604ae8b80c78efcd1099f856",
      "filename": "config/jest/client.config.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/config/jest/client.config.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/config/jest/client.config.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/config/jest/client.config.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -7,7 +7,7 @@ module.exports = {\n   collectCoverageFrom: [\"**/*.{js,jsx,mjs,ts,tsx}\"],\n   coveragePathIgnorePatterns: [\"/node_modules/\"],\n   setupFiles: [\n-    \"<rootDir>/src/core/build/polyfills.js\",\n+    \"<rootDir>/src/core/client/test/polyfills.ts\",\n     \"<rootDir>/src/core/client/test/setup.ts\",\n   ],\n   setupFilesAfterEnv: [\"<rootDir>/src/core/client/test/setupTestFramework.ts\"],"
    },
    {
      "sha": "39c02d73ae66eba8fc223feb63044e37fef1fd1d",
      "filename": "doczrc.js",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/doczrc.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/doczrc.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/doczrc.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -58,7 +58,7 @@ module.exports = {\n               \"@babel/typescript\",\n               [\n                 \"@babel/env\",\n-                { targets: { node: \"12.0.0\" }, modules: \"commonjs\" },\n+                { targets: { node: \"current\" }, modules: \"commonjs\" },\n               ],\n             ],\n             // This is a feature of `babel-loader` for webpack (not Babel itself)."
    },
    {
      "sha": "2fcd6ae15e513db5e62e40f49af9c73b57896941",
      "filename": "package-lock.json",
      "status": "modified",
      "additions": 2532,
      "deletions": 1489,
      "changes": 4021,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/package-lock.json",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/package-lock.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package-lock.json?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24"
    },
    {
      "sha": "795c15975a255eb6b6651fcea18dcc97cf5c6ca0",
      "filename": "package.json",
      "status": "modified",
      "additions": 28,
      "deletions": 26,
      "changes": 54,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/package.json",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/package.json",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/package.json?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -131,7 +131,7 @@\n     \"permit\": \"^0.2.4\",\n     \"prom-client\": \"^11.3.0\",\n     \"proxy-agent\": \"^3.1.1\",\n-    \"querystringify\": \"^2.1.0\",\n+    \"querystringify\": \"^2.1.1\",\n     \"react-helmet\": \"^5.2.1\",\n     \"source-map-support\": \"^0.5.12\",\n     \"stack-utils\": \"^1.0.2\",\n@@ -143,15 +143,13 @@\n     \"verror\": \"^1.10.0\"\n   },\n   \"devDependencies\": {\n-    \"@babel/core\": \"^7.4.5\",\n-    \"@babel/plugin-syntax-dynamic-import\": \"^7.2.0\",\n-    \"@babel/plugin-transform-modules-commonjs\": \"^7.4.4\",\n-    \"@babel/polyfill\": \"^7.4.4\",\n-    \"@babel/preset-env\": \"^7.4.5\",\n-    \"@babel/preset-react\": \"^7.0.0\",\n-    \"@babel/preset-typescript\": \"^7.3.3\",\n+    \"@babel/core\": \"^7.8.3\",\n+    \"@babel/preset-env\": \"^7.8.3\",\n+    \"@babel/preset-react\": \"^7.8.3\",\n+    \"@babel/preset-typescript\": \"^7.8.3\",\n+    \"@babel/runtime-corejs3\": \"^7.8.3\",\n     \"@coralproject/npm-run-all\": \"^4.1.5\",\n-    \"@coralproject/rte\": \"^0.11.0\",\n+    \"@coralproject/rte\": \"^0.11.1\",\n     \"@fluent/react\": \"^0.10.0\",\n     \"@intervolga/optimize-cssnano-plugin\": \"^1.0.6\",\n     \"@types/agent-base\": \"^4.2.0\",\n@@ -220,12 +218,12 @@\n     \"@types/react-copy-to-clipboard\": \"^4.2.6\",\n     \"@types/react-dom\": \"^16.8.4\",\n     \"@types/react-helmet\": \"^5.0.10\",\n-    \"@types/react-relay\": \"^1.3.14\",\n+    \"@types/react-relay\": \"^5.0.1\",\n     \"@types/react-responsive\": \"^3.0.1\",\n     \"@types/react-test-renderer\": \"^16.8.1\",\n     \"@types/react-transition-group\": \"^2.0.14\",\n     \"@types/recompose\": \"^0.26.5\",\n-    \"@types/relay-runtime\": \"^1.3.12\",\n+    \"@types/relay-runtime\": \"^5.0.5\",\n     \"@types/sane\": \"^2.0.0\",\n     \"@types/shallow-equals\": \"^1.0.0\",\n     \"@types/simplemde\": \"^1.11.7\",\n@@ -249,14 +247,12 @@\n     \"ansi-styles\": \"^3.2.0\",\n     \"autoprefixer\": \"^9.5.1\",\n     \"babel-core\": \"^7.0.0-bridge.0\",\n-    \"babel-jest\": \"^24.8.0\",\n-    \"babel-loader\": \"^8.0.5\",\n-    \"babel-plugin-dynamic-import-node\": \"^2.2.0\",\n+    \"babel-jest\": \"^24.9.0\",\n+    \"babel-loader\": \"^8.0.6\",\n     \"babel-plugin-lodash\": \"^3.3.4\",\n     \"babel-plugin-module-resolver\": \"^3.2.0\",\n-    \"babel-plugin-relay\": \"^4.0.0\",\n+    \"babel-plugin-relay\": \"^5.0.0\",\n     \"babel-plugin-use-lodash-es\": \"^0.2.0\",\n-    \"babel-preset-react-optimize\": \"^1.0.1\",\n     \"bowser\": \"^1.9.4\",\n     \"case-sensitive-paths-webpack-plugin\": \"^2.2.0\",\n     \"chalk\": \"^2.4.2\",\n@@ -267,8 +263,10 @@\n     \"common-tags\": \"^1.8.0\",\n     \"compression-webpack-plugin\": \"^2.0.0\",\n     \"copy-webpack-plugin\": \"^5.0.3\",\n+    \"core-js\": \"^3.6.4\",\n     \"cross-spawn\": \"^6.0.5\",\n     \"css-loader\": \"^1.0.1\",\n+    \"css-vars-ponyfill\": \"^2.1.2\",\n     \"del\": \"^4.1.1\",\n     \"doctoc\": \"^1.4.0\",\n     \"docz\": \"^0.13.7\",\n@@ -289,16 +287,16 @@\n     \"flat\": \"^4.1.0\",\n     \"fluent-intl-polyfill\": \"^0.1.0\",\n     \"fork-ts-checker-webpack-plugin\": \"^1.5.0\",\n-    \"found\": \"^0.4.0-alpha.17\",\n-    \"found-relay\": \"^0.4.0-alpha.8\",\n+    \"found\": \"^0.4.9\",\n+    \"found-relay\": \"^0.4.3\",\n     \"graphql-schema-linter\": \"^0.2.0\",\n     \"graphql-schema-typescript\": \"^1.2.9\",\n     \"gulp\": \"^4.0.2\",\n     \"gulp-babel\": \"^8.0.0\",\n     \"gulp-cli\": \"^2.2.0\",\n     \"gulp-sourcemaps\": \"^2.6.5\",\n     \"gulp-typescript\": \"^5.0.1\",\n-    \"html-webpack-plugin\": \"^4.0.0-beta.5\",\n+    \"html-webpack-plugin\": \"^4.0.0-beta.11\",\n     \"husky\": \"^2.2.0\",\n     \"intersection-observer\": \"^0.6.0\",\n     \"jest\": \"^24.8.0\",\n@@ -314,6 +312,7 @@\n     \"mini-css-extract-plugin\": \"^0.6.0\",\n     \"object-diff\": \"0.0.4\",\n     \"postcss-advanced-variables\": \"^3.0.0\",\n+    \"postcss-calc-function\": \"^1.1.0\",\n     \"postcss-css-variables\": \"^0.11.0\",\n     \"postcss-flexbugs-fixes\": \"^4.1.0\",\n     \"postcss-font-magician\": \"^2.2.1\",\n@@ -326,32 +325,35 @@\n     \"postcss-preset-env\": \"^6.5.0\",\n     \"prettier\": \"^1.18.2\",\n     \"prop-types\": \"^15.6.2\",\n+    \"proxy-polyfill\": \"^0.3.0\",\n     \"pstree.remy\": \"^1.1.6\",\n     \"pym.js\": \"^1.3.2\",\n     \"raw-loader\": \"^0.5.1\",\n-    \"react\": \"^16.9.0-alpha.0\",\n+    \"react\": \"^16.9.0\",\n     \"react-axe\": \"^3.3.0\",\n     \"react-copy-to-clipboard\": \"^5.0.1\",\n     \"react-dev-utils\": \"^9.0.0\",\n-    \"react-dom\": \"^16.9.0-alpha.0\",\n+    \"react-dom\": \"^16.9.0\",\n     \"react-error-overlay\": \"^5.1.6\",\n     \"react-final-form\": \"6.3.0\",\n     \"react-final-form-arrays\": \"3.1.0\",\n     \"react-popper\": \"^1.3.2\",\n-    \"react-relay\": \"^4.0.0\",\n+    \"react-relay\": \"^5.0.0\",\n     \"react-relay-network-modern\": \"^4.0.4\",\n     \"react-responsive\": \"^7.0.0\",\n-    \"react-test-renderer\": \"^16.9.0-alpha.0\",\n+    \"react-test-renderer\": \"^16.9.0\",\n     \"react-timeago\": \"^4.1.9\",\n     \"react-transition-group\": \"^2.9.0\",\n     \"react-with-state-props\": \"^2.0.4\",\n     \"recompose\": \"0.27.1\",\n-    \"relay-compiler\": \"^4.0.0\",\n+    \"regenerator-runtime\": \"^0.13.3\",\n+    \"relay-compiler\": \"^5.0.0\",\n     \"relay-compiler-language-typescript\": \"^4.1.0\",\n     \"relay-local-schema\": \"^0.8.0\",\n-    \"relay-runtime\": \"^4.0.0\",\n+    \"relay-runtime\": \"^5.0.0\",\n     \"resize-observer-polyfill\": \"^1.5.1\",\n     \"sane\": \"^4.1.0\",\n+    \"scheduler\": \"^0.15.0\",\n     \"shallow-equals\": \"^1.0.0\",\n     \"simplemde\": \"^1.11.2\",\n     \"simulant\": \"^0.2.2\",\n@@ -379,7 +381,7 @@\n     \"typescript\": \"3.3.4000\",\n     \"typescript-snapshots-plugin\": \"^1.6.0\",\n     \"wait-for-expect\": \"^1.1.1\",\n-    \"webpack\": \"^4.30.0\",\n+    \"webpack\": \"^4.41.5\",\n     \"webpack-assets-manifest\": \"^3.1.1\",\n     \"webpack-bundle-analyzer\": \"^3.3.2\",\n     \"webpack-cli\": \"^3.3.2\","
    },
    {
      "sha": "94b92a727369970b02f4053b1788bae1b0fe45f8",
      "filename": "scripts/compileRelay.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/scripts/compileRelay.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/scripts/compileRelay.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/scripts/compileRelay.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -52,6 +52,9 @@ const args = [\n   \"--language\",\n   \"typescript\",\n   \"--no-watchman\",\n+  \"--customScalars.Time=String\",\n+  \"--customScalars.Cursor=unknown\",\n+  \"--customScalars.Locale=string\",\n   \"--src\",\n   program.src,\n   \"--artifactDirectory\","
    },
    {
      "sha": "55448850af174d98585a50a2494bcd3daf0bbb2d",
      "filename": "scripts/webpackHotDevClient.js",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/scripts/webpackHotDevClient.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/scripts/webpackHotDevClient.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/scripts/webpackHotDevClient.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -24,7 +24,8 @@ var url = require(\"url\");\n var launchEditorEndpoint = require(\"react-dev-utils/launchEditorEndpoint\");\n var formatWebpackMessages = require(\"react-dev-utils/formatWebpackMessages\");\n var ErrorOverlay = require(\"react-error-overlay\");\n-var { debounce } = require(\"lodash\");\n+var lodash = require(\"lodash\");\n+var debounce = lodash.debounce;\n \n ErrorOverlay.setEditorHandler(function editorHandler(errorLocation) {\n   // Keep this sync with errorOverlayMiddleware.js\n@@ -124,7 +125,7 @@ function handleWarnings(warnings) {\n \n   // TODO: remove this workaround when we can upgrade to WebpackDevServer >= v3.3.0,\n   // which includes proper `warningsFilter` support.\n-  warnings = warnings.filter(w => !/export .* was not found in/.test(w));\n+  warnings = warnings.filter(function(w){ return !/export .* was not found in/.test(w)});\n \n   function printWarnings() {\n     // Print warnings to the console.\n@@ -198,7 +199,7 @@ function handleAvailableHash(hash) {\n   mostRecentCompilationHash = hash;\n }\n \n-const debouncedReload = debounce(() => {\n+const debouncedReload = debounce(function() {\n   window.location.reload();\n }, 1000);\n "
    },
    {
      "sha": "0f063f3b936f11882b9fcd632ab64610155c8385",
      "filename": "src/core/build/createWebpackConfig.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 14,
      "changes": 18,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/createWebpackConfig.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/createWebpackConfig.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/build/createWebpackConfig.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -18,8 +18,7 @@ import { BundleAnalyzerPlugin } from \"webpack-bundle-analyzer\";\n // TODO: import form coral-common/version, for some reason this fails currently.\n // Try again when we have a chance to upgrade typescript.\n import { version } from \"../common/version\";\n-import { Config } from \"./config\";\n-import { createClientEnv } from \"./config\";\n+import { Config, createClientEnv } from \"./config\";\n import paths from \"./paths\";\n \n /**\n@@ -392,7 +391,7 @@ export default function createWebpackConfig(\n                       \"@babel/typescript\",\n                       [\n                         \"@babel/env\",\n-                        { targets: { node: \"12.0.0\" }, modules: \"commonjs\" },\n+                        { targets: { node: \"current\" }, modules: \"commonjs\" },\n                       ],\n                     ],\n                     // This is a feature of `babel-loader` for webpack (not Babel itself).\n@@ -450,19 +449,11 @@ export default function createWebpackConfig(\n             {\n               test: /\\.js$/,\n               include: /node_modules\\//,\n+              exclude: /node_modules\\/(@babel|babel|core-js|regenerator-runtime)/,\n               use: [\n                 {\n                   loader: require.resolve(\"babel-loader\"),\n                   options: {\n-                    // This will ensure that all packages in node_modules that\n-                    // import lodash do so in a way that supports tree shaking.\n-                    plugins: [\"lodash\"],\n-                    presets: [\n-                      [\n-                        \"@babel/env\",\n-                        { targets: \"last 2 versions\", modules: false },\n-                      ],\n-                    ],\n                     cacheDirectory: true,\n                   },\n                 },\n@@ -712,8 +703,7 @@ export default function createWebpackConfig(\n         sideEffects: true,\n       },\n       entry: [\n-        /* Use minimal amount of polyfills (for IE) */\n-        \"intersection-observer\", // also for Safari\n+        // Polyfills are in the index.ts file.\n         paths.appEmbedIndex,\n       ],\n       output: {"
    },
    {
      "sha": "dfbe3d7892092d2b5908bf80ad03af0d42e2068c",
      "filename": "src/core/build/paths.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/paths.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/paths.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/build/paths.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -16,7 +16,7 @@ export default {\n   appLoaders: resolveSrc(\"core/build/loaders\"),\n   appSrc: resolveSrc(\".\"),\n   appTsconfig: resolveSrc(\"core/client/tsconfig.json\"),\n-  appPolyfill: resolveSrc(\"core/build/polyfills.js\"),\n+  appPolyfill: resolveSrc(\"core/build/polyfills.ts\"),\n   appPublicPath: resolveSrc(\"core/build/publicPath.js\"),\n   appLocales: resolveSrc(\"locales\"),\n   appThemeVariables: resolveSrc(\"core/client/ui/theme/variables.ts\"),"
    },
    {
      "sha": "ca6d489a27c761ea1363304b77e2e9b6b44d9ac1",
      "filename": "src/core/build/polyfills.js",
      "status": "removed",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/build/polyfills.js",
      "raw_url": "https://github.com/coralproject/talk/raw/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/build/polyfills.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/build/polyfills.js?ref=9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "patch": "@@ -1,2 +0,0 @@\n-require(\"@babel/polyfill\");\n-require(\"intersection-observer\");"
    },
    {
      "sha": "54b3f690d2c9aed41d970ef76246d7a1b9e95b65",
      "filename": "src/core/build/polyfills.ts",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/polyfills.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/polyfills.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/build/polyfills.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,6 @@\n+import polyfillNodeListForEach from \"../client/framework/helpers/polyfillNodeListForEach\";\n+\n+import \"core-js/stable\";\n+import \"regenerator-runtime/runtime\";\n+\n+polyfillNodeListForEach();"
    },
    {
      "sha": "53bfe22402b3b6e7f275998b5ddd38f89877be70",
      "filename": "src/core/build/postcss.config.js",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/postcss.config.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/build/postcss.config.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/build/postcss.config.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -7,6 +7,7 @@ const pickBy = require(\"lodash/pickBy\");\n const flat = require(\"flat\");\n const paths = require(\"./paths\").default;\n const autoprefixer = require(\"autoprefixer\");\n+const postcssCalcFunction = require(\"postcss-calc-function\").default;\n const postcssFontMagician = require(\"postcss-font-magician\");\n const postcssFlexbugsFixes = require(\"postcss-flexbugs-fixes\");\n const postcssPresetEnv = require(\"postcss-preset-env\");\n@@ -52,6 +53,8 @@ module.exports = {\n     postcssNested(),\n     // Sass style variables to be used in media queries.\n     postcssAdvancedVariables({ variables: mediaQueryVariables }),\n+    // Reduce some calc()\n+    postcssCalcFunction(),\n     // Provides a modern CSS environment.\n     postcssPresetEnv(),\n     // Does all the font handling logic."
    },
    {
      "sha": "34defaac4e4ab16940ace5262f64bbbf66a4db41",
      "filename": "src/core/client/.babelrc.js",
      "status": "modified",
      "additions": 0,
      "deletions": 17,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/.babelrc.js",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/.babelrc.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/.babelrc.js?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,20 +1,3 @@\n-const lodashOptimizations = [\"use-lodash-es\", \"lodash\"];\n-\n module.exports = {\n   presets: [\"@babel/react\"],\n-  plugins: [\"@babel/syntax-dynamic-import\"],\n-  env: {\n-    production: {\n-      presets: [[\"@babel/env\", { targets: \"last 2 versions\", modules: false }]],\n-      plugins: [...lodashOptimizations],\n-    },\n-    development: {\n-      presets: [[\"@babel/env\", { targets: \"last 2 versions\", modules: false }]],\n-      plugins: [...lodashOptimizations],\n-    },\n-    test: {\n-      presets: [[\"@babel/env\", { targets: { node: \"current\" } }]],\n-      plugins: [\"@babel/transform-modules-commonjs\"],\n-    },\n-  },\n };"
    },
    {
      "sha": "172c1966b36a8b472b3bcdcb028cd4b38747aeb5",
      "filename": "src/core/client/account/App/App.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/App/App.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/App/App.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/account/App/App.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -2,4 +2,7 @@\n   body {\n     margin: 0;\n   }\n+  input::-ms-clear, input::-ms-reveal {\n+    display: none;\n+  }\n }"
    },
    {
      "sha": "edfb94eb6d1b76ad7b62e47cdaf24dd71896da71",
      "filename": "src/core/client/account/index.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/index.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/index.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/account/index.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,7 @@\n import React, { FunctionComponent } from \"react\";\n import ReactDOM from \"react-dom\";\n \n+import injectConditionalPolyfills from \"coral-framework/helpers/injectConditionalPolyfills\";\n import potentiallyInjectAxe from \"coral-framework/helpers/potentiallyInjectAxe\";\n import { createManaged } from \"coral-framework/lib/bootstrap\";\n \n@@ -12,6 +13,7 @@ import localesData from \"./locales\";\n import \"coral-ui/theme/variables.css\";\n \n async function main() {\n+  await injectConditionalPolyfills();\n   // Potentially inject react-axe for runtime a11y checks.\n   await potentiallyInjectAxe();\n   const ManagedCoralContextProvider = await createManaged({"
    },
    {
      "sha": "ae75179440f5ebd43a258d4056b9c85333b14abb",
      "filename": "src/core/client/account/test/__snapshots__/confirmEmail.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/confirmEmail.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/confirmEmail.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/account/test/__snapshots__/confirmEmail.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -90,7 +90,9 @@ exports[`renders missing confirm token 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               <span\n                 data-testid=\"invalid-link\"\n               >"
    },
    {
      "sha": "58bb89330bc7180948002e069ae129a44dc36079",
      "filename": "src/core/client/account/test/__snapshots__/resetPassword.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/resetPassword.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/resetPassword.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/account/test/__snapshots__/resetPassword.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -147,7 +147,9 @@ exports[`renders missing reset token 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               <span\n                 data-testid=\"invalid-link\"\n               >"
    },
    {
      "sha": "aee73889b8c1c513351949a5d672f84653c53333",
      "filename": "src/core/client/account/test/__snapshots__/unsubscribeNotifications.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/unsubscribeNotifications.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/account/test/__snapshots__/unsubscribeNotifications.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/account/test/__snapshots__/unsubscribeNotifications.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -80,7 +80,9 @@ exports[`renders missing confirm token 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               <span\n                 data-testid=\"invalid-link\"\n               >"
    },
    {
      "sha": "1100a5147fea30936e78b3397e0a0ba870f86982",
      "filename": "src/core/client/admin/App/Main.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/App/Main.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/App/Main.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/App/Main.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -3,6 +3,9 @@\n     padding: 0;\n     margin: 0;\n   }\n+  input::-ms-clear, input::-ms-reveal {\n+    display: none;\n+  }\n }\n \n .root {"
    },
    {
      "sha": "2d9de2316c09a7ac3175372d3a5f88da8c8681a3",
      "filename": "src/core/client/admin/App/Navigation/NavigationLink.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/App/Navigation/NavigationLink.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/App/Navigation/NavigationLink.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/App/Navigation/NavigationLink.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -9,7 +9,7 @@ interface Props {\n }\n \n const NavigationLink: FunctionComponent<Props> = props => (\n-  <Link to={props.to} as={AppBarNavigationItem} activePropName=\"active\">\n+  <Link to={props.to} as={AppBarNavigationItem as any} activePropName=\"active\">\n     {props.children}\n   </Link>\n );"
    },
    {
      "sha": "88834a392e425329538a6337cbd1045ad65dd81c",
      "filename": "src/core/client/admin/components/ModerateCard/FeatureCommentMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/ModerateCard/FeatureCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/ModerateCard/FeatureCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/ModerateCard/FeatureCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -75,7 +75,7 @@ const FeatureCommentMutation = createMutation(\n           getQueueConnection(store, \"REJECTED\", input.storyID),\n         ].filter(c => c);\n         connections.forEach(con =>\n-          ConnectionHandler.deleteNode(con, input.commentID)\n+          ConnectionHandler.deleteNode(con!, input.commentID)\n         );\n       },\n     })"
    },
    {
      "sha": "c06acc9be4dafb88f019470d6a4c6e32a413b2b3",
      "filename": "src/core/client/admin/components/UserHistoryDrawer/UserDrawerAccountHistoryQuery.tsx",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserDrawerAccountHistoryQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserDrawerAccountHistoryQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserHistoryDrawer/UserDrawerAccountHistoryQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,8 +1,11 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n-import { graphql, QueryRenderer } from \"coral-framework/lib/relay\";\n+import {\n+  graphql,\n+  QueryRenderData,\n+  QueryRenderer,\n+} from \"coral-framework/lib/relay\";\n import { CallOut, Spinner } from \"coral-ui/components/v2\";\n \n import { UserDrawerAccountHistoryQuery as QueryTypes } from \"coral-admin/__generated__/UserDrawerAccountHistoryQuery.graphql\";\n@@ -29,7 +32,7 @@ const UserDrawerAccountHistoryQuery: FunctionComponent<Props> = ({\n       `}\n       variables={{ userID }}\n       cacheConfig={{ force: true }}\n-      render={({ error, props }: ReadyState<QueryTypes[\"response\"]>) => {\n+      render={({ error, props }: QueryRenderData<QueryTypes>) => {\n         if (error) {\n           return (\n             <div className={styles.callout}>"
    },
    {
      "sha": "c9edc1de452a8a49518adc16a4954197613aa9ff",
      "filename": "src/core/client/admin/components/UserHistoryDrawer/UserDrawerNotesQuery.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserDrawerNotesQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserDrawerNotesQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserHistoryDrawer/UserDrawerNotesQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,5 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import { graphql, QueryRenderer } from \"coral-framework/lib/relay\";\n import { CallOut, Spinner } from \"coral-ui/components/v2\";\n@@ -30,7 +29,7 @@ const UserDrawerNotesQuery: FunctionComponent<Props> = ({ userID }) => {\n       `}\n       variables={{ userID }}\n       cacheConfig={{ force: true }}\n-      render={({ error, props }: ReadyState<QueryTypes[\"response\"]>) => {\n+      render={({ error, props }) => {\n         if (error) {\n           return (\n             <div className={styles.callout}>"
    },
    {
      "sha": "ae0529d505a06ff1365280f100e99b2be7fba1c2",
      "filename": "src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerAllCommentsQuery.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerAllCommentsQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerAllCommentsQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerAllCommentsQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,5 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import { graphql, QueryRenderer } from \"coral-framework/lib/relay\";\n import { CallOut, Spinner } from \"coral-ui/components/v2\";\n@@ -35,7 +34,7 @@ const UserHistoryDrawerAllCommentsQuery: FunctionComponent<Props> = ({\n       `}\n       variables={{ userID }}\n       cacheConfig={{ force: true }}\n-      render={({ error, props }: ReadyState<QueryTypes[\"response\"]>) => {\n+      render={({ error, props }) => {\n         if (!props) {\n           return (\n             <div className={styles.root}>"
    },
    {
      "sha": "e535e7ed31eecd4c5ab1265ea8db1fdc029f6372",
      "filename": "src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerQuery.tsx",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,8 +1,11 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n-import { graphql, QueryRenderer } from \"coral-framework/lib/relay\";\n+import {\n+  graphql,\n+  QueryRenderData,\n+  QueryRenderer,\n+} from \"coral-framework/lib/relay\";\n import { CallOut, Spinner } from \"coral-ui/components/v2\";\n \n import { UserHistoryDrawerQuery as QueryTypes } from \"coral-admin/__generated__/UserHistoryDrawerQuery.graphql\";\n@@ -36,7 +39,7 @@ const UserHistoryDrawerQuery: FunctionComponent<Props> = ({\n       `}\n       variables={{ userID }}\n       cacheConfig={{ force: true }}\n-      render={({ props }: ReadyState<QueryTypes[\"response\"]>) => {\n+      render={({ props }: QueryRenderData<QueryTypes>) => {\n         if (!props) {\n           return (\n             <div className={styles.root}>"
    },
    {
      "sha": "0471724f4278c46d4c195d0748d8fd5fa9901929",
      "filename": "src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerRejectedCommentsQuery.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 4,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerRejectedCommentsQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerRejectedCommentsQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserHistoryDrawer/UserHistoryDrawerRejectedCommentsQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,12 +1,9 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import { graphql, QueryRenderer } from \"coral-framework/lib/relay\";\n import { CallOut, Spinner } from \"coral-ui/components/v2\";\n \n-import { UserHistoryDrawerRejectedCommentsQuery as QueryTypes } from \"coral-admin/__generated__/UserHistoryDrawerRejectedCommentsQuery.graphql\";\n-\n import UserHistoryDrawerRejectedComments from \"./UserHistoryDrawerRejectedComments\";\n \n import styles from \"./UserHistoryDrawerRejectedCommentsQuery.css\";\n@@ -35,7 +32,7 @@ const UserHistoryDrawerRejectedCommentsQuery: FunctionComponent<Props> = ({\n       `}\n       variables={{ userID }}\n       cacheConfig={{ force: true }}\n-      render={({ error, props }: ReadyState<QueryTypes[\"response\"]>) => {\n+      render={({ error, props }) => {\n         if (!props) {\n           return (\n             <div className={styles.root}>"
    },
    {
      "sha": "fca4fa5d2216c3a5834d6c4bfcc1b6dcca4239e0",
      "filename": "src/core/client/admin/components/UserStatus/BanUserMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/BanUserMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/BanUserMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserStatus/BanUserMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -63,7 +63,7 @@ const BanUserMutation = createMutation(\n                 history: [\n                   {\n                     active: true,\n-                    createdAt: new Date(),\n+                    createdAt: new Date().toISOString(),\n                     createdBy: {\n                       id: viewer.id,\n                       username: viewer.username,"
    },
    {
      "sha": "08ee720459be6c906521501b21049cf624a63971",
      "filename": "src/core/client/admin/components/UserStatus/PremodUserMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/PremodUserMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/PremodUserMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserStatus/PremodUserMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -63,7 +63,7 @@ const PremodUserMutation = createMutation(\n                 history: [\n                   {\n                     active: true,\n-                    createdAt: new Date(),\n+                    createdAt: new Date().toISOString(),\n                     createdBy: {\n                       id: viewer.id,\n                       username: viewer.username,"
    },
    {
      "sha": "69bc85d1c4b178b0bf2c262079d37316b4d45687",
      "filename": "src/core/client/admin/components/UserStatus/RemoveUserPremodMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/RemoveUserPremodMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/components/UserStatus/RemoveUserPremodMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/components/UserStatus/RemoveUserPremodMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -63,7 +63,7 @@ const RemoveUserPremodMutation = createMutation(\n                 history: [\n                   {\n                     active: false,\n-                    createdAt: new Date(),\n+                    createdAt: new Date().toISOString(),\n                     createdBy: {\n                       id: viewer.id,\n                       username: viewer.username,"
    },
    {
      "sha": "ae16fd954066cf6c81646da6523c937b2eedb5c0",
      "filename": "src/core/client/admin/helpers/getQueueConnection.ts",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/helpers/getQueueConnection.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/helpers/getQueueConnection.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/helpers/getQueueConnection.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -14,7 +14,7 @@ export default function getQueueConnection(\n   store: RecordSourceSelectorProxy | RecordSourceProxy,\n   queue: GQLMODERATION_QUEUE_RL | \"REJECTED\",\n   storyID?: string | null\n-): RecordProxy | null {\n+): RecordProxy | null | undefined {\n   const root = store.getRoot();\n   if (queue === \"REJECTED\") {\n     return ConnectionHandler.getConnection(root, \"RejectedQueue_comments\", {\n@@ -24,10 +24,12 @@ export default function getQueueConnection(\n   }\n   const queuesRecord = root.getLinkedRecord(\"moderationQueues\", { storyID })!;\n   if (!queuesRecord) {\n-    return null;\n+    return undefined;\n   }\n-  return ConnectionHandler.getConnection(\n-    queuesRecord.getLinkedRecord(queue.toLowerCase()),\n-    \"Queue_comments\"\n-  );\n+\n+  const queueRecord = queuesRecord.getLinkedRecord(queue.toLowerCase());\n+  if (!queueRecord) {\n+    return undefined;\n+  }\n+  return ConnectionHandler.getConnection(queueRecord, \"Queue_comments\");\n }"
    },
    {
      "sha": "c4580595d1c69e71f00cc28d52468806517e1058",
      "filename": "src/core/client/admin/index.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/index.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/index.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/index.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,7 @@\n import React, { FunctionComponent } from \"react\";\n import ReactDOM from \"react-dom\";\n \n+import injectConditionalPolyfills from \"coral-framework/helpers/injectConditionalPolyfills\";\n import potentiallyInjectAxe from \"coral-framework/helpers/potentiallyInjectAxe\";\n import { createManaged } from \"coral-framework/lib/bootstrap\";\n \n@@ -13,6 +14,7 @@ import localesData from \"./locales\";\n import \"coral-ui/theme/variables.css\";\n \n async function main() {\n+  await injectConditionalPolyfills();\n   // Potentially inject react-axe for runtime a11y checks.\n   await potentiallyInjectAxe();\n   const ManagedCoralContextProvider = await createManaged({"
    },
    {
      "sha": "85b69c2dc067986275fbc5623b61f1cf2792af03",
      "filename": "src/core/client/admin/mutations/ApproveCommentMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/mutations/ApproveCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/mutations/ApproveCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/mutations/ApproveCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -84,7 +84,7 @@ const ApproveCommentMutation = createMutation(\n           getQueueConnection(store, \"REJECTED\", input.storyID),\n         ].filter(c => c);\n         connections.forEach(con =>\n-          ConnectionHandler.deleteNode(con, input.commentID)\n+          ConnectionHandler.deleteNode(con!, input.commentID)\n         );\n       },\n     })"
    },
    {
      "sha": "5e4deaef166dacf41b970ce6e9ff0c52ae934079",
      "filename": "src/core/client/admin/mutations/RejectCommentMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/mutations/RejectCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/mutations/RejectCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/mutations/RejectCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -83,7 +83,7 @@ const RejectCommentMutation = createMutation(\n           getQueueConnection(store, \"UNMODERATED\", input.storyID),\n         ].filter(c => c);\n         connections.forEach(con =>\n-          ConnectionHandler.deleteNode(con, input.commentID)\n+          ConnectionHandler.deleteNode(con!, input.commentID)\n         );\n       },\n     })"
    },
    {
      "sha": "70a047712b7953ba31f39ef13088403d1a39f14e",
      "filename": "src/core/client/admin/routes/Community/UserRow.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Community/UserRow.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Community/UserRow.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Community/UserRow.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -19,7 +19,7 @@ interface Props {\n   viewer: PropTypesOf<typeof UserRole>[\"viewer\"];\n   settings: PropTypesOf<typeof UserStatus>[\"settings\"];\n   onUsernameClicked?: (userID: string) => void;\n-  deletedAt?: string;\n+  deletedAt?: string | null;\n }\n \n const UserRow: FunctionComponent<Props> = ({"
    },
    {
      "sha": "8df5dc6c1f09a3b21faf8cae7c4543e2a9e2b136",
      "filename": "src/core/client/admin/routes/Configure/ConfigureRoute.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Configure/ConfigureRoute.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Configure/ConfigureRoute.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Configure/ConfigureRoute.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,7 @@\n import { FormApi, FormState } from \"final-form\";\n import React from \"react\";\n \n+import { LanguageCode } from \"coral-common/helpers/i18n\";\n import { CoralContext, withContext } from \"coral-framework/lib/bootstrap\";\n import { SubmitHookHandler } from \"coral-framework/lib/form\";\n import { MutationProp, withMutation } from \"coral-framework/lib/relay\";\n@@ -31,7 +32,7 @@ class ConfigureRoute extends React.Component<Props, State> {\n     await this.props.updateSettings({ settings: data });\n     const localeFieldState = form.getFieldState(\"locale\");\n     if (localeFieldState && localeFieldState.dirty) {\n-      await this.props.changeLocale(data.locale);\n+      await this.props.changeLocale(data.locale as LanguageCode);\n     }\n     form.initialize(data);\n   };"
    },
    {
      "sha": "ed8df919b77550ad3b5313b57fd24ac7fb4089c2",
      "filename": "src/core/client/admin/routes/Moderate/ModerateNavigation/ModerationCountsSubscription.tsx",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/ModerationCountsSubscription.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/ModerationCountsSubscription.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/ModerateNavigation/ModerationCountsSubscription.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -54,7 +54,10 @@ const ModerationCountsSubscription = createSubscription(\n         if (!queueProxy) {\n           return;\n         }\n-        queueProxy.setValue(queueProxy.getValue(\"count\") + change, \"count\");\n+        queueProxy.setValue(\n+          (queueProxy.getValue(\"count\") as number) + change,\n+          \"count\"\n+        );\n       },\n     })\n );"
    },
    {
      "sha": "8003effc587a08bab970213009fa739b203ce6ba",
      "filename": "src/core/client/admin/routes/Moderate/ModerateNavigation/NavigationLink.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/NavigationLink.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/NavigationLink.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/ModerateNavigation/NavigationLink.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -5,11 +5,11 @@ import { SubBarNavigationItem } from \"coral-ui/components/v2\";\n \n interface Props {\n   children: React.ReactNode;\n-  to: string | LocationDescriptor;\n+  to: LocationDescriptor;\n }\n \n const NavigationLink: FunctionComponent<Props> = props => (\n-  <Link to={props.to} as={SubBarNavigationItem} activePropName=\"active\">\n+  <Link to={props.to} as={SubBarNavigationItem as any} activePropName=\"active\">\n     {props.children}\n   </Link>\n );"
    },
    {
      "sha": "cc34e0ba7375abbe89a741f059e2c3f7102640d5",
      "filename": "src/core/client/admin/routes/Moderate/ModerateNavigation/changeQueueCount.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/changeQueueCount.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/ModerateNavigation/changeQueueCount.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/ModerateNavigation/changeQueueCount.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -20,5 +20,8 @@ export default function changeQueueCount(\n   if (!queueProxy) {\n     return;\n   }\n-  queueProxy.setValue(queueProxy.getValue(\"count\") + change, \"count\");\n+  queueProxy.setValue(\n+    (queueProxy.getValue(\"count\") as number) + change,\n+    \"count\"\n+  );\n }"
    },
    {
      "sha": "f5e99ee0bdace7c769d04d71d2db4a9221baaec2",
      "filename": "src/core/client/admin/routes/Moderate/Queue/QueueCommentLeftSubscription.tsx",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/Queue/QueueCommentLeftSubscription.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/Queue/QueueCommentLeftSubscription.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/Queue/QueueCommentLeftSubscription.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -19,7 +19,9 @@ function handleCommentLeftModerationQueue(\n   if (!rootField) {\n     return;\n   }\n-  const commentID = rootField.getLinkedRecord(\"comment\")!.getValue(\"id\")!;\n+  const commentID = rootField\n+    .getLinkedRecord(\"comment\")!\n+    .getValue(\"id\")! as string;\n   const commentInStore = store.get(commentID);\n   if (commentInStore) {\n     // Mark that the status of the comment was live updated."
    },
    {
      "sha": "22d667653baa48cab65160bd881223f74ec1733c",
      "filename": "src/core/client/admin/routes/Moderate/Queue/QueueViewNewMutation.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/Queue/QueueViewNewMutation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/Queue/QueueViewNewMutation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/Queue/QueueViewNewMutation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -25,7 +25,7 @@ const QueueViewNewMutation = createMutation(\n         return;\n       }\n       viewNewEdges.forEach(edge => {\n-        ConnectionHandler.insertEdgeBefore(connection, edge);\n+        ConnectionHandler.insertEdgeBefore(connection, edge!);\n       });\n       connection.setLinkedRecords([], \"viewNewEdges\");\n     });"
    },
    {
      "sha": "522f3c76dcf0f024ce2ab59cebab301790b319f0",
      "filename": "src/core/client/admin/routes/Moderate/SingleModerate/SingleModerateSubscription.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/SingleModerate/SingleModerateSubscription.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/routes/Moderate/SingleModerate/SingleModerateSubscription.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/SingleModerate/SingleModerateSubscription.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -32,7 +32,7 @@ const SingleModerateSubscription = createSubscription(\n         const commentID = store\n           .getRootField(\"commentStatusUpdated\")!\n           .getLinkedRecord(\"comment\")!\n-          .getValue(\"id\")!;\n+          .getValue(\"id\")! as string;\n         const commentInStore = store.get(commentID);\n         if (commentInStore) {\n           // Mark that the status of the comment was live updated."
    },
    {
      "sha": "8e397abf7cad48af2040a0e139a00fc6a51b748e",
      "filename": "src/core/client/admin/test/auth/__snapshots__/addEmailAddress.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/addEmailAddress.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/addEmailAddress.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/auth/__snapshots__/addEmailAddress.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -447,7 +447,9 @@ exports[`shows server error 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "48956fcb6048558204a26d20255bbd9e644c1aaf",
      "filename": "src/core/client/admin/test/auth/__snapshots__/createPassword.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/createPassword.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/createPassword.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/auth/__snapshots__/createPassword.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -338,7 +338,9 @@ we require users to create a password.\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "97b5ba0c656e161206a7c2d61869edb27b466d39",
      "filename": "src/core/client/admin/test/auth/__snapshots__/createUsername.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/createUsername.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/createUsername.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/auth/__snapshots__/createUsername.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -262,7 +262,9 @@ exports[`shows server error 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "3e5f30a6ce2658ff342d78c59986aa5ac6cb28b0",
      "filename": "src/core/client/admin/test/auth/__snapshots__/signInWithEmail.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/signInWithEmail.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/auth/__snapshots__/signInWithEmail.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/auth/__snapshots__/signInWithEmail.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -788,7 +788,9 @@ exports[`shows server error 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         Server Error\n       </div>\n     </div>"
    },
    {
      "sha": "08e14c5b59bd54bf8aa54f43bd61ab92911887c3",
      "filename": "src/core/client/admin/test/invite/__snapshots__/invite.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/invite/__snapshots__/invite.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/admin/test/invite/__snapshots__/invite.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/invite/__snapshots__/invite.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -222,7 +222,9 @@ exports[`renders missing the token 1`] = `\n       <div\n         className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n       >\n-        <div>\n+        <div\n+          className=\"CallOut-inner\"\n+        >\n           <span\n             data-testid=\"invalid-link\"\n           >"
    },
    {
      "sha": "172c1966b36a8b472b3bcdcb028cd4b38747aeb5",
      "filename": "src/core/client/auth/App/App.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/App/App.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/App/App.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/App/App.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -2,4 +2,7 @@\n   body {\n     margin: 0;\n   }\n+  input::-ms-clear, input::-ms-reveal {\n+    display: none;\n+  }\n }"
    },
    {
      "sha": "23774e87b2308dcf3f99115e64e742807ee6d2ca",
      "filename": "src/core/client/auth/components/Header/Bar.css",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/components/Header/Bar.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/components/Header/Bar.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/components/Header/Bar.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,4 +1,6 @@\n .root {\n   min-height: calc(var(--mini-unit) * 8);\n+  padding: var(--mini-unit);\n   background-color: var(--palette-text-primary);\n+  box-sizing: border-box;\n }"
    },
    {
      "sha": "aa9e2393288abdba423505cf343d46f17a2df87c",
      "filename": "src/core/client/auth/dom/resizePopup.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/dom/resizePopup.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/dom/resizePopup.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/dom/resizePopup.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,11 @@\n function resizePopup() {\n   const innerHeight = window.document.body.offsetHeight;\n-  window.resizeTo(350, innerHeight + window.outerHeight - window.innerHeight);\n+\n+  try {\n+    window.resizeTo(350, innerHeight + window.outerHeight - window.innerHeight);\n+  } catch {\n+    // Ignore occasional errors in IE11.\n+  }\n }\n \n let resizedAlready = false;"
    },
    {
      "sha": "edfb94eb6d1b76ad7b62e47cdaf24dd71896da71",
      "filename": "src/core/client/auth/index.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/index.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/index.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/index.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,7 @@\n import React, { FunctionComponent } from \"react\";\n import ReactDOM from \"react-dom\";\n \n+import injectConditionalPolyfills from \"coral-framework/helpers/injectConditionalPolyfills\";\n import potentiallyInjectAxe from \"coral-framework/helpers/potentiallyInjectAxe\";\n import { createManaged } from \"coral-framework/lib/bootstrap\";\n \n@@ -12,6 +13,7 @@ import localesData from \"./locales\";\n import \"coral-ui/theme/variables.css\";\n \n async function main() {\n+  await injectConditionalPolyfills();\n   // Potentially inject react-axe for runtime a11y checks.\n   await potentiallyInjectAxe();\n   const ManagedCoralContextProvider = await createManaged({"
    },
    {
      "sha": "1ebf51702a0b75bef2805050e0ad375d203d4776",
      "filename": "src/core/client/auth/test/__snapshots__/addEmailAddress.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/addEmailAddress.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/addEmailAddress.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/test/__snapshots__/addEmailAddress.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -782,7 +782,9 @@ Your email address will be used to:\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "a8446ebc279712eca8504fd046c9263a2ead84a9",
      "filename": "src/core/client/auth/test/__snapshots__/createPassword.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/createPassword.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/createPassword.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/test/__snapshots__/createPassword.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -328,7 +328,9 @@ we require users to create a password.\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "89dc6b60f3478f576cca2cb4221b8508f2f85ab1",
      "filename": "src/core/client/auth/test/__snapshots__/createUsername.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/createUsername.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/auth/test/__snapshots__/createUsername.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/auth/test/__snapshots__/createUsername.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -252,7 +252,9 @@ exports[`shows server error 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorError CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         server error\n \n GraphQL request (4:3)"
    },
    {
      "sha": "b0b2ecfd7fd500951d0ce51163a554bb453ae2de",
      "filename": "src/core/client/count/getCurrentScriptOrigin.ts",
      "status": "modified",
      "additions": 8,
      "deletions": 1,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/count/getCurrentScriptOrigin.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/count/getCurrentScriptOrigin.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/count/getCurrentScriptOrigin.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,3 +1,5 @@\n+import getOrigin from \"coral-common/utils/getOrigin\";\n+\n /**\n  * getCurrentScriptOrigin will try to find the script origin.\n  * For legacy browsers a fallbackIdentifier is required.\n@@ -17,9 +19,14 @@ function getCurrentScriptOrigin(fallbackID?: string) {\n     }\n   }\n   if (!script) {\n+    if (process.env.NODE_ENV === \"development\") {\n+      // In development just return top level origin.\n+      return window.location.origin;\n+    }\n     throw new Error(\"Current script not found\");\n   }\n-  return new URL(script.src).origin;\n+  // Get origin.\n+  return getOrigin(script.src);\n }\n \n export default getCurrentScriptOrigin;"
    },
    {
      "sha": "95d12622cf41825ffec0c776311d7b5eb3e29d20",
      "filename": "src/core/client/embed/decorators/withEventEmitter.ts",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/decorators/withEventEmitter.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/decorators/withEventEmitter.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/decorators/withEventEmitter.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,5 +1,7 @@\n import { EventEmitter2 } from \"eventemitter2\";\n \n+import startsWith from \"coral-common/utils/startsWith\";\n+\n import { Decorator } from \"./types\";\n \n const withEventEmitter = (\n@@ -11,13 +13,13 @@ const withEventEmitter = (\n     const { eventName, value } = JSON.parse(raw);\n     // TODO: (cvle) Remove this when no longer needed.\n     if (!enableDeprecatedEvents) {\n-      if ((eventName as string).startsWith(\"mutation.\")) {\n+      if (startsWith(eventName as string, \"mutation.\")) {\n         return;\n       }\n-      if ((eventName as string).startsWith(\"fetch.\")) {\n+      if (startsWith(eventName as string, \"fetch.\")) {\n         return;\n       }\n-      if ((eventName as string).startsWith(\"subscription.\")) {\n+      if (startsWith(eventName as string, \"subscription.\")) {\n         return;\n       }\n     }"
    },
    {
      "sha": "f566632e3bdd78b4bd7136710173d1b7dc5aca8e",
      "filename": "src/core/client/embed/index.ts",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/index.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1 +1,9 @@\n+import polyfillNodeListForEach from \"coral-framework/helpers/polyfillNodeListForEach\";\n+\n+// Include minimal polyfills for IE11\n+import \"core-js/stable/object/assign\";\n+import \"intersection-observer\"; // also for Safari.\n+\n+polyfillNodeListForEach();\n+\n export * from \"./Coral\";"
    },
    {
      "sha": "3d0f4ce8b7b2bbfa5eeb38050bd7d345f4312b49",
      "filename": "src/core/client/embed/injectCountScriptIfNeeded.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/injectCountScriptIfNeeded.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/injectCountScriptIfNeeded.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/injectCountScriptIfNeeded.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,4 +1,4 @@\n-import { COUNT_SELECTOR } from \"coral-framework/constants\";\n+import { COUNT_SELECTOR, ORIGIN_FALLBACK_ID } from \"coral-framework/constants\";\n import detectCountScript from \"coral-framework/helpers/detectCountScript\";\n \n /**\n@@ -13,6 +13,7 @@ const injectCountScriptIfNeeded = (rootURL: string) => {\n   if (document.querySelector(COUNT_SELECTOR)) {\n     const s = document.createElement(\"script\");\n     s.src = `${rootURL}/assets/js/count.js`;\n+    s.className = ORIGIN_FALLBACK_ID;\n     s.async = false;\n     s.defer = true;\n     (document.head || document.body).appendChild(s);"
    },
    {
      "sha": "428a8ec3e3016bfc7f7cbf44595009bbdb6dc298",
      "filename": "src/core/client/embed/storyButton.html",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/storyButton.html",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/storyButton.html",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/storyButton.html?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -131,7 +131,7 @@ <h1 style=\"text-align: center\">Coral 5.0 – Story with Button</h1>\n \n       const button = document.getElementById(\"showComments\");\n \n-      const showStreamEmbed = () => {\n+      const showStreamEmbed = function() {\n         CoralStreamEmbed.render();\n         button.parentElement.removeChild(button);\n       };"
    },
    {
      "sha": "3b9bc7ad6169d2e89c420c34fee98148c81e877c",
      "filename": "src/core/client/embed/utils/index.ts",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/utils/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/utils/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/utils/index.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,2 +1 @@\n-export { default as startsWith } from \"./startsWith\";\n export { default as prefixStorage } from \"./prefixStorage\";"
    },
    {
      "sha": "63fb4e75e7c2016af8b8c40507690e1cd63f1287",
      "filename": "src/core/client/embed/utils/prefixStorage.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/utils/prefixStorage.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/embed/utils/prefixStorage.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/embed/utils/prefixStorage.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,4 +1,4 @@\n-import startsWith from \"./startsWith\";\n+import startsWith from \"coral-common/utils/startsWith\";\n \n /**\n  * PrefixedStorage decorates a Storage and prefixes keys in"
    },
    {
      "sha": "f435f76f6eeddaafe6708967c1fc66d8e660915e",
      "filename": "src/core/client/framework/constants.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/constants.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/constants.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/constants.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -6,7 +6,7 @@ export const COUNT_SELECTOR = \".coral-count\";\n \n /**\n  * ORIGIN_FALLBACK_ID can be attached to any <script /> tag as an\n- * id to allow the `count.js` script to find its origin when\n+ * id or class to allow the `count.js` script to find its origin when\n  * `document.currentScript` is not available (for legacy browsers).\n  */\n-export const ORIGIN_FALLBACK_ID = \"coral-origin\";\n+export const ORIGIN_FALLBACK_ID = \"coral-script\";"
    },
    {
      "sha": "77885c6dd054a651d440bab0e0f68ff13d5c8c79",
      "filename": "src/core/client/framework/helpers/getViewerSourceID.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/getViewerSourceID.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/getViewerSourceID.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/getViewerSourceID.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -8,5 +8,5 @@ export default function getViewerSourceID(\n   if (!root.viewer) {\n     return null;\n   }\n-  return root.viewer.__ref;\n+  return (root.viewer as any).__ref;\n }"
    },
    {
      "sha": "c125da627dc81bfdd45ef8497c602ab3fb1b3d4a",
      "filename": "src/core/client/framework/helpers/index.ts",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/index.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -12,3 +12,8 @@ export { default as clearHash } from \"./clearHash\";\n export { default as roleIsAtLeast } from \"./roleIsAtLeast\";\n export { default as resolveStoryURL } from \"./resolveStoryURL\";\n export { default as detectCountScript } from \"./detectCountScript\";\n+export { default as potentiallyInjectAxe } from \"./potentiallyInjectAxe\";\n+export {\n+  default as injectConditionalPolyfills,\n+} from \"./injectConditionalPolyfills\";\n+export { default as polyfillCSSVarsForIE11 } from \"./polyfillCSSVarsForIE11\";"
    },
    {
      "sha": "95a22217b6ae3e7b80528136cd182b8d9365c1a1",
      "filename": "src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "status": "added",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/injectConditionalPolyfills.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/injectConditionalPolyfills.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,31 @@\n+import bowser from \"bowser\";\n+\n+import polyfillCSSVarsForIE11 from \"./polyfillCSSVarsForIE11\";\n+\n+export default async function injectConditionalPolyfills() {\n+  const pending: Promise<any>[] = [];\n+\n+  // Polyfill Intl.\n+  if (typeof Intl === \"undefined\" || !(Intl as any).PluralRules) {\n+    pending.push(import(\"fluent-intl-polyfill\"));\n+  }\n+\n+  // Polyfill Intersection Observer.\n+  if (\n+    !(\"IntersectionObserver\" in window) ||\n+    !(\"IntersectionObserverEntry\" in window) ||\n+    !(\n+      \"intersectionRatio\" in (window as any).IntersectionObserverEntry.prototype\n+    )\n+  ) {\n+    pending.push(import(\"intersection-observer\"));\n+  }\n+\n+  // CSS Vars Polyfill for IE11.\n+  if (bowser.msie) {\n+    pending.push(import(\"whatwg-fetch\"));\n+    pending.push(import(\"proxy-polyfill\"));\n+    pending.push(polyfillCSSVarsForIE11());\n+  }\n+  await Promise.all(pending);\n+}"
    },
    {
      "sha": "a0522e813328574b1de4b18bc6d10e3e2131634c",
      "filename": "src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "status": "added",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/polyfillCSSVarsForIE11.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,8 @@\n+import bowser from \"bowser\";\n+\n+export default function polyfillCSSVarsForIE11() {\n+  if (bowser.msie) {\n+    return import(\"css-vars-ponyfill\").then(module => module.default());\n+  }\n+  return Promise.resolve();\n+}"
    },
    {
      "sha": "8d5e3090ab9d088a3db4dff55d7d1a10709b0cb3",
      "filename": "src/core/client/framework/helpers/polyfillNodeListForEach.ts",
      "status": "added",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/polyfillNodeListForEach.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/helpers/polyfillNodeListForEach.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/helpers/polyfillNodeListForEach.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,10 @@\n+export default function polyfillNodeListForEach() {\n+  if (\"NodeList\" in window && !NodeList.prototype.forEach) {\n+    NodeList.prototype.forEach = function(callback, thisArg) {\n+      thisArg = thisArg || window;\n+      for (let i = 0; i < this.length; i++) {\n+        callback.call(thisArg, this[i], i, this);\n+      }\n+    };\n+  }\n+}"
    },
    {
      "sha": "c91433f4db5a3056f8a1de5c5ca9dde5aca2bae5",
      "filename": "src/core/client/framework/lib/bootstrap/CoralContext.tsx",
      "status": "modified",
      "additions": 11,
      "deletions": 1,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/bootstrap/CoralContext.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/bootstrap/CoralContext.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/bootstrap/CoralContext.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -81,6 +81,13 @@ export const useCoralContext = () => React.useContext(CoralReactContext);\n  */\n export const CoralContextConsumer = CoralReactContext.Consumer;\n \n+const parser = new DOMParser();\n+\n+// Use this custom markup parser which works in IE11.\n+function parseMarkup(str: string) {\n+  const doc = parser.parseFromString(`<body>${str}</body>`, \"text/html\");\n+  return Array.from(doc.body.childNodes);\n+}\n /**\n  * In addition to just providing the context, CoralContextProvider also\n  * renders the `LocalizationProvider` with the appropite data.\n@@ -89,7 +96,10 @@ export const CoralContextProvider: FunctionComponent<{\n   value: CoralContext;\n }> = ({ value, children }) => (\n   <CoralReactContext.Provider value={value}>\n-    <LocalizationProvider bundles={value.localeBundles}>\n+    <LocalizationProvider\n+      bundles={value.localeBundles}\n+      parseMarkup={parseMarkup}\n+    >\n       <UIContext.Provider\n         value={{\n           timeagoFormatter: value.timeagoFormatter,"
    },
    {
      "sha": "6ab6ba7d6588891af79891f1b742963b85d5fd72",
      "filename": "src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/bootstrap/createManaged.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/bootstrap/createManaged.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -106,7 +106,7 @@ function createRelayEnvironment(\n   const tokenGetter: TokenGetter = () => {\n     const localState = source.get(LOCAL_ID);\n     if (localState) {\n-      return localState.accessToken || \"\";\n+      return (localState.accessToken as string) || \"\";\n     }\n     return \"\";\n   };"
    },
    {
      "sha": "f69c4ec36c99d2f64c66fd45d122a7bf8d54c745",
      "filename": "src/core/client/framework/lib/i18n/generateBundles.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/i18n/generateBundles.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/i18n/generateBundles.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/i18n/generateBundles.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,9 +1,7 @@\n import { FluentBundle, FluentResource } from \"@fluent/bundle/compat\";\n-\n-import * as functions from \"./functions\";\n import { LocalesData } from \"./locales\";\n \n-import \"fluent-intl-polyfill/compat\";\n+import * as functions from \"./functions\";\n \n // Don't warn in production.\n let decorateWarnMissing = (bundle: FluentBundle) => bundle;"
    },
    {
      "sha": "7b9c595dfecc601eb67b5ff1ce617ace211d7b47",
      "filename": "src/core/client/framework/lib/relay/QueryRenderer.tsx",
      "status": "modified",
      "additions": 16,
      "deletions": 9,
      "changes": 25,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/QueryRenderer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/QueryRenderer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/QueryRenderer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,26 +1,33 @@\n import React, { Component } from \"react\";\n-import {\n-  QueryRenderer,\n-  QueryRendererProps as QueryRendererPropsOrig,\n-} from \"react-relay\";\n-import { OperationBase, OperationDefaults } from \"relay-runtime\";\n+import { QueryRenderer } from \"react-relay\";\n+import { OperationType } from \"relay-runtime\";\n \n-import { Omit } from \"coral-framework/types\";\n+import { Omit, PropTypesOf } from \"coral-framework/types\";\n \n import { CoralContextConsumer } from \"../bootstrap/CoralContext\";\n \n+interface OperationDefaults {\n+  readonly variables: {};\n+  readonly response: unknown;\n+}\n+\n // Omit environment as we are passing this from the context.\n export type QueryRendererProps<\n-  T extends OperationBase = OperationDefaults\n-> = Omit<QueryRendererPropsOrig<T>, \"environment\">;\n+  T extends OperationType = OperationDefaults\n+> = Omit<PropTypesOf<QueryRenderer<T>>, \"environment\">;\n+\n+// Omit environment as we are passing this from the context.\n+export type QueryRenderData<\n+  T extends OperationType = OperationDefaults\n+> = Parameters<QueryRendererProps<T>[\"render\"]>[0];\n \n /**\n  * CoralQueryRenderer is a wrappper around  Relay's `QueryRenderer`.\n  * It supplies the `environment` from the context and has better\n  * generics type support.\n  */\n class CoralQueryRenderer<\n-  T extends OperationBase = OperationDefaults\n+  T extends OperationType = OperationDefaults\n > extends Component<QueryRendererProps<T>> {\n   public render() {\n     return ("
    },
    {
      "sha": "4955a4b5625236a12efbb83a6780de1b94a0b02c",
      "filename": "src/core/client/framework/lib/relay/commitMutationPromise.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/commitMutationPromise.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/commitMutationPromise.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/commitMutationPromise.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,5 +1,5 @@\n import { commitMutation } from \"react-relay\";\n-import { Environment, MutationConfig, OperationBase } from \"relay-runtime\";\n+import { Environment, MutationConfig, OperationType } from \"relay-runtime\";\n \n import { DeepPartial, Omit } from \"coral-framework/types\";\n \n@@ -9,7 +9,7 @@ import extractPayload from \"./extractPayload\";\n  * Like `MutationConfig` but omits `onCompleted` and `onError`\n  * because we are going to use a Promise API.\n  */\n-export type MutationPromiseConfig<T extends OperationBase> = Omit<\n+export type MutationPromiseConfig<T extends OperationType> = Omit<\n   MutationConfig<T>,\n   \"onCompleted\" | \"onError\" | \"optimisticResponse\"\n > & { optimisticResponse?: DeepPartial<T[\"response\"]> };\n@@ -20,7 +20,7 @@ export type MutationPromiseConfig<T extends OperationBase> = Omit<\n  * and errors are wrapped inside of application specific\n  * error instances.\n  */\n-export async function commitMutationPromiseNormalized<T extends OperationBase>(\n+export async function commitMutationPromiseNormalized<T extends OperationType>(\n   environment: Environment,\n   config: MutationPromiseConfig<T>\n ): Promise<T[\"response\"][keyof T[\"response\"]]> {\n@@ -30,7 +30,7 @@ export async function commitMutationPromiseNormalized<T extends OperationBase>(\n /**\n  * Like `commitMutation` of the Relay API but returns a Promise.\n  */\n-export function commitMutationPromise<T extends OperationBase>(\n+export function commitMutationPromise<T extends OperationType>(\n   environment: Environment,\n   config: MutationPromiseConfig<T>\n ): Promise<T[\"response\"][keyof T[\"response\"]]> {"
    },
    {
      "sha": "19456008cf9a142df379b3614a2f8c29cc274e7e",
      "filename": "src/core/client/framework/lib/relay/createAndRetain.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/createAndRetain.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/createAndRetain.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/createAndRetain.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -16,7 +16,8 @@ export default function createAndRetain(\n   const result = source.create(id, type);\n   environment.retain({\n     dataID: id,\n-    node: { selections: [] },\n+    // TODO: Do we still need this retain hack?\n+    node: { selections: [] } as any,\n     variables: {},\n   });\n   return result;"
    },
    {
      "sha": "4b695e0ccda35d181eb138d2d4976928bdf36047",
      "filename": "src/core/client/framework/lib/relay/extractPayload.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/extractPayload.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/extractPayload.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/extractPayload.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,5 +1,5 @@\n // Extract the payload from the response,\n-export default function extractPayload(response: { [key: string]: any }): any {\n+export default function extractPayload(response: any): any {\n   const keys = Object.keys(response);\n   if (keys.length !== 1) {\n     return response;"
    },
    {
      "sha": "3eebe1f1c3a391d5d9b352fb3ec04c7ff58b5f22",
      "filename": "src/core/client/framework/lib/relay/lookup.ts",
      "status": "modified",
      "additions": 14,
      "deletions": 3,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/lookup.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/lookup.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/lookup.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,4 +1,5 @@\n-import { Environment, RelayInMemoryRecordSource } from \"relay-runtime\";\n+import bowser from \"bowser\";\n+import { Environment } from \"relay-runtime\";\n \n /**\n  * RecordSourceProxy has the same shape as the underlying Schema Type, but\n@@ -20,8 +21,9 @@ type RecordSourceProxy<T> = T extends object\n  */\n const createProxy = <T = any>(\n   environment: Environment,\n-  recordSource: RelayInMemoryRecordSource\n+  recordSource: Record<string, any>\n ) => {\n+  let target = {};\n   const proxy: ProxyHandler<any> = {\n     ownKeys() {\n       return Object.keys(recordSource);\n@@ -50,7 +52,16 @@ const createProxy = <T = any>(\n       return rsrc[prop];\n     },\n   };\n-  return new Proxy({}, proxy) as RecordSourceProxy<T>;\n+  // IE11 does not have Proxy support and the polyfill only supports\n+  // a subset of features under special circumstances.\n+  // https://github.com/GoogleChrome/proxy-polyfill\n+  if (bowser.msie) {\n+    target = recordSource;\n+    delete proxy.ownKeys;\n+    delete proxy.getOwnPropertyDescriptor;\n+    delete proxy.has;\n+  }\n+  return new Proxy(target, proxy) as RecordSourceProxy<T>;\n };\n \n /**"
    },
    {
      "sha": "cec86ef15fb77b2e122420be6c4b563fcb00a089",
      "filename": "src/core/client/framework/lib/relay/purgeMetadata.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/purgeMetadata.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/purgeMetadata.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/purgeMetadata.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,3 +1,5 @@\n+import startsWith from \"coral-common/utils/startsWith\";\n+\n /**\n  * Purges relay metadata from response e.g. information about fragments.\n  *\n@@ -14,7 +16,7 @@ export default function purgeMetadata<T>(data: T): T {\n       }\n       const result: any = {};\n       Object.keys(data)\n-        .filter(k => !k.startsWith(\"__\"))\n+        .filter(k => !startsWith(k, \"__\"))\n         .forEach(k => {\n           result[k] = purgeMetadata((data as any)[k]);\n         });"
    },
    {
      "sha": "0fecc46d6afcd539555c36fa40ba2f08f85847be",
      "filename": "src/core/client/framework/lib/relay/useLocal.tsx",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/useLocal.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/useLocal.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/useLocal.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,7 +1,7 @@\n import { useCallback, useEffect, useRef, useState } from \"react\";\n import {\n   commitLocalUpdate,\n-  CSelector,\n+  CReaderSelector,\n   GraphQLTaggedNode,\n   RecordProxy,\n } from \"relay-runtime\";\n@@ -85,15 +85,15 @@ function useLocal<T>(\n ): [OmitFragments<T>, (update: LocalUpdater<OmitFragments<T>>) => void] {\n   const fragment =\n     typeof fragmentSpec === \"function\"\n-      ? fragmentSpec().default\n+      ? (fragmentSpec() as any).default\n       : (fragmentSpec as any).data().default;\n   if (fragment.kind !== \"Fragment\") {\n     throw new Error(\"Expected fragment\");\n   }\n   if (fragment.type !== LOCAL_TYPE) {\n     throw new Error(`Type must be \"Local\" in \"Fragment ${fragment.name}\"`);\n   }\n-  const selector: CSelector<any> = {\n+  const selector: CReaderSelector<any> = {\n     dataID: LOCAL_ID,\n     node: { selections: fragment.selections },\n     variables: {},"
    },
    {
      "sha": "9b8f505b673a59252a3adff40997aea17920ecea",
      "filename": "src/core/client/framework/lib/relay/withLocalStateContainer.tsx",
      "status": "modified",
      "additions": 11,
      "deletions": 6,
      "changes": 17,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/withLocalStateContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/withLocalStateContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/withLocalStateContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -7,11 +7,11 @@ import {\n   wrapDisplayName,\n } from \"recompose\";\n import {\n-  CSelector,\n-  CSnapshot,\n   Disposable,\n   Environment,\n   GraphQLTaggedNode,\n+  ReaderSelector,\n+  Snapshot,\n } from \"relay-runtime\";\n \n import { withContext } from \"../bootstrap\";\n@@ -33,7 +33,7 @@ function withLocalStateContainer(\n ): InferableComponentEnhancer<{ local: _RefType<any> }> {\n   const fragment =\n     typeof fragmentSpec === \"function\"\n-      ? fragmentSpec().default\n+      ? (fragmentSpec() as any).default\n       : (fragmentSpec as any).data().default;\n   return compose(\n     withContext(({ relayEnvironment }) => ({ relayEnvironment })),\n@@ -54,9 +54,14 @@ function withLocalStateContainer(\n               `Type must be \"Local\" in \"Fragment ${fragment.name}\"`\n             );\n           }\n-          const selector: CSelector<any> = {\n+          const selector: ReaderSelector = {\n             dataID: LOCAL_ID,\n-            node: { selections: fragment.selections },\n+            node: {\n+              kind: fragment.kind,\n+              name: fragment.name,\n+              metadata: fragment.metadata,\n+              selections: fragment.selections,\n+            },\n             variables: {},\n           };\n           const snapshot = environment.lookup(selector);\n@@ -72,7 +77,7 @@ function withLocalStateContainer(\n           this.subscribe(props.relayEnvironment);\n         }\n \n-        private updateSnapshot = (snapshot: CSnapshot<any>) => {\n+        private updateSnapshot = (snapshot: Snapshot) => {\n           const nextState = { data: snapshot.data };\n           // State has not been initialized yet.\n           if (!this.state) {"
    },
    {
      "sha": "6152929d2f29ff19b8d2becd2b1326c9a234078d",
      "filename": "src/core/client/framework/lib/relay/withPaginationContainer.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 2,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/withPaginationContainer.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/relay/withPaginationContainer.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/relay/withPaginationContainer.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,5 +1,4 @@\n import {\n-  ConnectionData,\n   createPaginationContainer,\n   FragmentOrRegularProp,\n   GraphQLTaggedNode,\n@@ -9,11 +8,16 @@ import {\n   InferableComponentEnhancerWithProps,\n   wrapDisplayName,\n } from \"recompose\";\n-import { Variables } from \"relay-runtime\";\n+import { PageInfo, Variables } from \"relay-runtime\";\n \n import hideForwardRef from \"./hideForwardRef\";\n import { FragmentKeysNoLocal } from \"./types\";\n \n+interface ConnectionData {\n+  edges?: ReadonlyArray<any> | null;\n+  pageInfo?: Partial<PageInfo> | null;\n+}\n+\n // TODO: (cvle) at some point we might switch these to stock react-relay typings\n // when they become versatile enough.\n export type FragmentVariablesGetter<V extends Variables = Variables> = ("
    },
    {
      "sha": "421a34957d387b56aab6dab48e15ea96bfb66d5c",
      "filename": "src/core/client/framework/lib/storage/prefixStorage.ts",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/storage/prefixStorage.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/storage/prefixStorage.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/storage/prefixStorage.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,3 +1,5 @@\n+import startsWith from \"coral-common/utils/startsWith\";\n+\n /**\n  * PrefixedStorage decorates a Storage and prefixes keys in\n  * getItem, setItem and removeItem with given prefix.\n@@ -15,7 +17,7 @@ class PrefixedStorage implements Storage {\n     let count = 0;\n     for (let i = 0; i < this.storage.length; i++) {\n       const key = this.storage.key(i);\n-      if (key && key.startsWith(this.prefix)) {\n+      if (key && startsWith(key, this.prefix)) {\n         count++;\n       }\n     }\n@@ -26,7 +28,7 @@ class PrefixedStorage implements Storage {\n     const toBeDeleted = [];\n     for (let i = 0; i < this.storage.length; i++) {\n       const key = this.storage.key(i);\n-      if (key && key.startsWith(this.prefix)) {\n+      if (key && startsWith(key, this.prefix)) {\n         toBeDeleted.push(key);\n       }\n     }\n@@ -37,7 +39,7 @@ class PrefixedStorage implements Storage {\n     let count = 0;\n     for (let i = 0; i < this.storage.length; i++) {\n       const key = this.storage.key(i);\n-      if (key && key.startsWith(this.prefix)) {\n+      if (key && startsWith(key, this.prefix)) {\n         if (count === n) {\n           return key;\n         }"
    },
    {
      "sha": "3c58c71b5e12caa814f607460709d01b784fd40d",
      "filename": "src/core/client/framework/lib/validation.tsx",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/validation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/lib/validation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/lib/validation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,5 +1,7 @@\n import { ReactNode } from \"react\";\n \n+import startsWith from \"coral-common/utils/startsWith\";\n+\n import {\n   EMAIL_REGEX,\n   PASSWORD_MIN_LENGTH,\n@@ -236,7 +238,7 @@ export const validateStrictURLList = createValidator(v => {\n       return false;\n     }\n \n-    if (!url.startsWith(\"http\")) {\n+    if (!startsWith(url, \"http\")) {\n       return false;\n     }\n   }"
    },
    {
      "sha": "ddd815a431db476095f51e6942aea5af3de9f630",
      "filename": "src/core/client/framework/testHelpers/createFluentBundle.ts",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/testHelpers/createFluentBundle.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/testHelpers/createFluentBundle.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/testHelpers/createFluentBundle.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -4,8 +4,6 @@ import path from \"path\";\n \n import * as functions from \"coral-framework/lib/i18n/functions\";\n \n-import \"fluent-intl-polyfill/compat\";\n-\n // These locale prefixes are always loaded.\n const commonPrefixes = [\"ui\", \"common\", \"framework\"];\n "
    },
    {
      "sha": "03f3b68a6f9365f61642886cf88f628485dc9252",
      "filename": "src/core/client/framework/testHelpers/createRelayEnvironment.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 2,
      "changes": 8,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/testHelpers/createRelayEnvironment.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/testHelpers/createRelayEnvironment.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/testHelpers/createRelayEnvironment.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -4,6 +4,7 @@ import { SubscribeFunction } from \"react-relay-network-modern/es\";\n import {\n   commitLocalUpdate,\n   Environment,\n+  INetwork,\n   Network,\n   RecordProxy,\n   RecordSource,\n@@ -87,7 +88,10 @@ function createFetch({\n         });\n         throw new Error(payload.errors.toString());\n       }\n-      return payload;\n+      return {\n+        data: payload.data,\n+        errors: payload.errors || [],\n+      };\n     });\n   };\n }\n@@ -147,7 +151,7 @@ function createSubscribe(\n export default function createRelayEnvironment(\n   params: CreateRelayEnvironmentParams = {}\n ) {\n-  let network: Network = null as any;\n+  let network: INetwork = null as any;\n   if (params.network) {\n     const schema = loadSchema(\n       params.network.projectName,"
    },
    {
      "sha": "2a7cef7b27107fa69368158870c3dd79e8116315",
      "filename": "src/core/client/framework/utils/buildURL.ts",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/buildURL.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/buildURL.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/utils/buildURL.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,3 +1,5 @@\n+import startsWith from \"coral-common/utils/startsWith\";\n+\n export default function buildURL({\n   protocol = window.location.protocol,\n   hostname = window.location.hostname,\n@@ -6,11 +8,14 @@ export default function buildURL({\n   search = window.location.search,\n   hash = window.location.hash,\n } = {}) {\n-  if (search && !search.startsWith(\"?\")) {\n+  if (search && !startsWith(search, \"?\")) {\n     search = `?${search}`;\n   } else if (search === \"?\") {\n     search = \"\";\n   }\n+  if (!startsWith(pathname, \"/\")) {\n+    pathname = \"/\" + pathname;\n+  }\n   return `${protocol}//${hostname}${\n     port ? `:${port}` : \"\"\n   }${pathname}${search}${hash}`;"
    },
    {
      "sha": "e88c80a2365004b3b5cb8abf1a41081f7c9ece99",
      "filename": "src/core/client/framework/utils/parseHashQuery.ts",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/parseHashQuery.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/parseHashQuery.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/utils/parseHashQuery.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,10 +1,12 @@\n import { parseQuery } from \"coral-common/utils\";\n \n+import startsWith from \"coral-common/utils/startsWith\";\n+\n export default function parseQueryHash(\n   hash: string\n ): Record<string, string | undefined> {\n   let normalized = hash;\n-  if (normalized.startsWith(\"#\")) {\n+  if (startsWith(normalized, \"#\")) {\n     normalized = normalized.substr(1);\n   }\n   return parseQuery(normalized);"
    },
    {
      "sha": "21183f177a953cb63b821829738ca867c1a6e9a9",
      "filename": "src/core/client/framework/utils/parseURL.ts",
      "status": "modified",
      "additions": 8,
      "deletions": 10,
      "changes": 18,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/parseURL.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/framework/utils/parseURL.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/framework/utils/parseURL.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,14 +1,12 @@\n-import { pick } from \"lodash\";\n-\n export default function parseURL(url: string) {\n   const parser = document.createElement(\"a\");\n   parser.href = url;\n-  return pick(parser, [\n-    \"protocol\",\n-    \"hostname\",\n-    \"port\",\n-    \"pathname\",\n-    \"search\",\n-    \"hash\",\n-  ]);\n+  return {\n+    protocol: parser.protocol,\n+    hostname: parser.hostname,\n+    port: parser.port,\n+    pathname: parser.pathname,\n+    search: parser.search,\n+    hash: parser.hash,\n+  };\n }"
    },
    {
      "sha": "6b7d0a554a6443bc7b7e8986eb1118b59814e006",
      "filename": "src/core/client/install/App/App.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/install/App/App.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/install/App/App.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/install/App/App.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -10,6 +10,9 @@\n     background-color: var(--palette-background-light);\n     color: var(--palette-text-primary);\n   }\n+  input::-ms-clear, input::-ms-reveal {\n+    display: none;\n+  }\n }\n \n .root {"
    },
    {
      "sha": "82a1392697dd1c4bfaf62bb578ced7290bd9b299",
      "filename": "src/core/client/install/index.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/install/index.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/install/index.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/install/index.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,7 @@\n import React, { FunctionComponent } from \"react\";\n import ReactDOM from \"react-dom\";\n \n+import injectConditionalPolyfills from \"coral-framework/helpers/injectConditionalPolyfills\";\n import potentiallyInjectAxe from \"coral-framework/helpers/potentiallyInjectAxe\";\n import { createManaged } from \"coral-framework/lib/bootstrap\";\n \n@@ -12,6 +13,7 @@ import localesData from \"./locales\";\n import \"coral-ui/theme/variables.css\";\n \n async function main() {\n+  await injectConditionalPolyfills();\n   // Potentially inject react-axe for runtime a11y checks.\n   await potentiallyInjectAxe();\n   const ManagedCoralContextProvider = await createManaged({"
    },
    {
      "sha": "1a57d15b29bcb913b22710773fb0280e5a551b72",
      "filename": "src/core/client/stream/App/App.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/App/App.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/App/App.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/App/App.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -9,6 +9,9 @@\n     /* Support for Firefox. */\n     -moz-osx-font-smoothing: grayscale;\n   }\n+  input::-ms-clear, input::-ms-reveal {\n+    display: none;\n+  }\n }\n \n .root {"
    },
    {
      "sha": "90ad8e65f209fffcca375c39b771667a241ad2fe",
      "filename": "src/core/client/stream/index.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/index.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/index.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/index.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -2,6 +2,7 @@ import { Child as PymChild } from \"pym.js\";\n import React, { FunctionComponent } from \"react\";\n import ReactDOM from \"react-dom\";\n \n+import injectConditionalPolyfills from \"coral-framework/helpers/injectConditionalPolyfills\";\n import potentiallyInjectAxe from \"coral-framework/helpers/potentiallyInjectAxe\";\n import { createManaged } from \"coral-framework/lib/bootstrap\";\n \n@@ -16,6 +17,7 @@ async function main() {\n   const pym = new PymChild({\n     polling: 100,\n   });\n+  await injectConditionalPolyfills();\n   // Potentially inject react-axe for runtime a11y checks.\n   await potentiallyInjectAxe(pym.parentUrl);\n   const ManagedCoralContextProvider = await createManaged({"
    },
    {
      "sha": "476fa7ff35ef264314439958947e177237861d9f",
      "filename": "src/core/client/stream/mutations/CancelAccountDeletionMutation.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/mutations/CancelAccountDeletionMutation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/mutations/CancelAccountDeletionMutation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/mutations/CancelAccountDeletionMutation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -48,7 +48,7 @@ const CancelAccountDeletionMutation = createMutation(\n           optimisticUpdater: store => {\n             const viewer = getViewer(environment)!;\n             const viewerProxy = store.get(viewer.id);\n-            if (viewerProxy !== null) {\n+            if (viewerProxy) {\n               viewerProxy.setValue(null, \"scheduledDeletionDate\");\n             }\n           },"
    },
    {
      "sha": "50b5f8e2876b34c87e6458729da5e371be7e797b",
      "filename": "src/core/client/stream/tabs/Comments/Comment/CommentContainer.tsx",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/CommentContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/CommentContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/CommentContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -113,6 +113,7 @@ export class CommentContainer extends Component<Props, State> {\n       !banned &&\n       !suspended &&\n       isMyComment &&\n+      !!this.props.comment.editing.editableUntil &&\n       isBeforeDate(this.props.comment.editing.editableUntil)\n     );\n   }\n@@ -161,7 +162,8 @@ export class CommentContainer extends Component<Props, State> {\n \n   private updateWhenNotEditable() {\n     const ms =\n-      new Date(this.props.comment.editing.editableUntil).getTime() - Date.now();\n+      new Date(this.props.comment.editing.editableUntil!).getTime() -\n+      Date.now();\n     if (ms > 0) {\n       return setTimeout(() => this.setState({ editable: false }), ms);\n     }"
    },
    {
      "sha": "3fbeb8dbdc5808b16758a0f997741e00c6dc5df0",
      "filename": "src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentForm.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentForm.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentForm.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentForm.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -19,7 +19,7 @@ import {\n   RelativeTime,\n } from \"coral-ui/components\";\n \n-import { cleanupRTEEmptyHTML, getCommentBodyValidators } from \"../../helpers\";\n+import { getCommentBodyValidators, normalizeRTEHTML } from \"../../helpers\";\n import RemainingCharactersContainer from \"../../RemainingCharacters\";\n import RTE from \"../../RTE\";\n import TopBarLeft from \"../TopBarLeft\";\n@@ -88,7 +88,7 @@ const EditCommentForm: FunctionComponent<EditCommentFormProps> = props => {\n                       <RTE\n                         inputId={inputID}\n                         onChange={({ html }) =>\n-                          input.onChange(cleanupRTEEmptyHTML(html))\n+                          input.onChange(normalizeRTEHTML(html))\n                         }\n                         value={input.value}\n                         placeholder=\"Edit comment\""
    },
    {
      "sha": "342633b6af130c6e7faa3d4db3956a3636945cb6",
      "filename": "src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentFormContainer.tsx",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentFormContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentFormContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/EditCommentForm/EditCommentFormContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -52,7 +52,9 @@ export class EditCommentFormContainer extends Component<Props, State> {\n \n   public state: State = {\n     initialized: false,\n-    expired: !isBeforeDate(this.props.comment.editing.editableUntil),\n+    expired:\n+      !!this.props.comment.editing.editableUntil &&\n+      !isBeforeDate(this.props.comment.editing.editableUntil),\n     submitStatus: null,\n   };\n \n@@ -67,7 +69,8 @@ export class EditCommentFormContainer extends Component<Props, State> {\n \n   private updateWhenExpired() {\n     const ms =\n-      new Date(this.props.comment.editing.editableUntil).getTime() - Date.now();\n+      new Date(this.props.comment.editing.editableUntil!).getTime() -\n+      Date.now();\n     if (ms > 0) {\n       return setTimeout(() => this.setState({ expired: true }), ms);\n     }\n@@ -138,7 +141,7 @@ export class EditCommentFormContainer extends Component<Props, State> {\n         rteRef={this.handleRTERef}\n         author={this.props.comment.author}\n         createdAt={this.props.comment.createdAt}\n-        editableUntil={this.props.comment.editing.editableUntil}\n+        editableUntil={this.props.comment.editing.editableUntil!}\n         expired={this.state.expired}\n         min={\n           (this.props.settings.charCount.enabled &&"
    },
    {
      "sha": "3fa46b8ca58092cd1c935dc324a1c107ec6c22af",
      "filename": "src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/FeatureCommentMutation.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/FeatureCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/FeatureCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/FeatureCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -25,7 +25,10 @@ function incrementCount(store: RecordSourceSelectorProxy, storyID: string) {\n   }\n   const tagsRecord = commentCountsRecord.getLinkedRecord(\"tags\");\n   if (tagsRecord) {\n-    tagsRecord.setValue(tagsRecord.getValue(\"FEATURED\") + 1, \"FEATURED\");\n+    tagsRecord.setValue(\n+      (tagsRecord.getValue(\"FEATURED\") as number) + 1,\n+      \"FEATURED\"\n+    );\n   }\n }\n "
    },
    {
      "sha": "b2c604a42d3b78583c03371e43221797ae29ba1f",
      "filename": "src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/UnfeatureCommentMutation.ts",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/UnfeatureCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/UnfeatureCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/ModerationDropdown/UnfeatureCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -25,7 +25,10 @@ function decrementCount(store: RecordSourceSelectorProxy, storyID: string) {\n   }\n   const tagsRecord = commentCountsRecord.getLinkedRecord(\"tags\");\n   if (tagsRecord) {\n-    tagsRecord.setValue(tagsRecord.getValue(\"FEATURED\") - 1, \"FEATURED\");\n+    tagsRecord.setValue(\n+      (tagsRecord.getValue(\"FEATURED\") as number) - 1,\n+      \"FEATURED\"\n+    );\n   }\n }\n "
    },
    {
      "sha": "940680e9dcf28381542fc99284fceb8cb56679da",
      "filename": "src/core/client/stream/tabs/Comments/Comment/ReactionButton/CreateCommentReactionMutation.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 4,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReactionButton/CreateCommentReactionMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReactionButton/CreateCommentReactionMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/ReactionButton/CreateCommentReactionMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -35,10 +35,8 @@ async function commit(\n   input: CreateCommentReactionInput,\n   { eventEmitter }: Pick<CoralContext, \"eventEmitter\">\n ) {\n-  const source = environment.getStore().getSource();\n-  const currentCount = source.get(\n-    source.get(source.get(input.commentID)!.actionCounts.__ref)!.reaction.__ref\n-  )!.total;\n+  const currentCount = lookup(environment, input.commentID).actionCounts\n+    .reaction.total;\n \n   const createCommentReactionEvent = CreateCommentReactionEvent.begin(\n     eventEmitter,"
    },
    {
      "sha": "31a49baddfd2cb23c8b299b25ae7a8365d20f50d",
      "filename": "src/core/client/stream/tabs/Comments/Comment/ReactionButton/RemoveCommentReactionMutation.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 4,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReactionButton/RemoveCommentReactionMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReactionButton/RemoveCommentReactionMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/ReactionButton/RemoveCommentReactionMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -35,10 +35,8 @@ async function commit(\n   input: RemoveCommentReactionInput,\n   { eventEmitter }: Pick<CoralContext, \"eventEmitter\">\n ) {\n-  const source = environment.getStore().getSource();\n-  const currentCount = source.get(\n-    source.get(source.get(input.commentID)!.actionCounts.__ref)!.reaction.__ref\n-  )!.total;\n+  const currentCount = lookup(environment, input.commentID).actionCounts\n+    .reaction.total;\n \n   const removeCommentReactionEvent = RemoveCommentReactionEvent.begin(\n     eventEmitter,"
    },
    {
      "sha": "78470f3f1aacc64f634daf0fd83aedd7f602bd0a",
      "filename": "src/core/client/stream/tabs/Comments/Comment/ReplyCommentForm/ReplyCommentForm.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReplyCommentForm/ReplyCommentForm.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Comment/ReplyCommentForm/ReplyCommentForm.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Comment/ReplyCommentForm/ReplyCommentForm.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -24,7 +24,7 @@ import {\n   MatchMedia,\n } from \"coral-ui/components\";\n \n-import { cleanupRTEEmptyHTML, getCommentBodyValidators } from \"../../helpers\";\n+import { getCommentBodyValidators, normalizeRTEHTML } from \"../../helpers\";\n import RemainingCharactersContainer from \"../../RemainingCharacters\";\n import RTE from \"../../RTE\";\n import ReplyTo from \"./ReplyTo\";\n@@ -92,7 +92,7 @@ const ReplyCommentForm: FunctionComponent<ReplyCommentFormProps> = props => {\n                           inputId={inputID}\n                           onFocus={onFocus}\n                           onChange={({ html }) =>\n-                            input.onChange(cleanupRTEEmptyHTML(html))\n+                            input.onChange(normalizeRTEHTML(html))\n                           }\n                           value={input.value}\n                           placeholder=\"Write a reply\""
    },
    {
      "sha": "5eb1522f1c986fed2222481d3ac883b69252dea7",
      "filename": "src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.spec.tsx",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.spec.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.spec.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.spec.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,3 +1,4 @@\n+import { noop } from \"lodash\";\n import React from \"react\";\n import { createRenderer } from \"react-test-renderer/shallow\";\n \n@@ -10,6 +11,7 @@ it(\"renders permalink view container\", () => {\n       comment: {},\n     } as any,\n     error: null,\n+    retry: noop,\n   };\n   const renderer = createRenderer();\n   renderer.render(React.createElement(() => render(data)));\n@@ -20,6 +22,7 @@ it(\"renders loading\", () => {\n   const data = {\n     props: null,\n     error: null,\n+    retry: noop,\n   };\n   const renderer = createRenderer();\n   renderer.render(React.createElement(() => render(data)));\n@@ -30,6 +33,7 @@ it(\"renders error\", () => {\n   const data = {\n     props: null,\n     error: new Error(\"error\"),\n+    retry: noop,\n   };\n   const renderer = createRenderer();\n   renderer.render(React.createElement(() => render(data)));"
    },
    {
      "sha": "04f7374d737542dd049287ee9a8671ea000cd057",
      "filename": "src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 5,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/PermalinkView/PermalinkViewQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,9 +1,9 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -19,10 +19,7 @@ interface Props {\n   local: Local;\n }\n \n-export const render = ({\n-  error,\n-  props,\n-}: ReadyState<QueryTypes[\"response\"]>) => {\n+export const render = ({ error, props }: QueryRenderData<QueryTypes>) => {\n   if (error) {\n     return <div>{error.message}</div>;\n   }"
    },
    {
      "sha": "bdf66222792c240126ea42195d1706a3fdb33211",
      "filename": "src/core/client/stream/tabs/Comments/ReplyList/CommentReplyCreatedSubscription.tsx",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/ReplyList/CommentReplyCreatedSubscription.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/ReplyList/CommentReplyCreatedSubscription.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/ReplyList/CommentReplyCreatedSubscription.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -13,7 +13,7 @@ import { CommentReplyCreatedSubscription } from \"coral-stream/__generated__/Comm\n  */\n function determineDepthTillAncestor(comment: RecordProxy, ancestorID: string) {\n   let depth = 0;\n-  let cur: RecordProxy | null = comment;\n+  let cur: RecordProxy | null | undefined = comment;\n   while (cur) {\n     cur = cur.getLinkedRecord(\"parent\");\n     if (cur) {\n@@ -59,9 +59,10 @@ const CommentReplyCreatedSubscription = createSubscription(\n         const comment = rootField.getLinkedRecord(\"comment\")!;\n         comment.setValue(true, \"enteredLive\");\n \n-        const parentProxy = store.get(\n-          comment.getLinkedRecord(\"parent\")!.getValue(\"id\")!\n-        )!;\n+        const parentID = comment\n+          .getLinkedRecord(\"parent\")!\n+          .getValue(\"id\")! as string;\n+        const parentProxy = store.get(parentID)!;\n \n         const depth = determineDepthTillAncestor(comment, variables.ancestorID);\n         if (depth === null) {\n@@ -73,7 +74,7 @@ const CommentReplyCreatedSubscription = createSubscription(\n           // Inform last comment in visible tree about the available replies.\n           // This will trigger to show the `Read More of this Conversation` link.\n           const replyCount = parentProxy.getValue(\"replyCount\") || 0;\n-          parentProxy.setValue(replyCount + 1, \"replyCount\");\n+          parentProxy.setValue((replyCount as number) + 1, \"replyCount\");\n           return;\n         }\n \n@@ -89,7 +90,7 @@ const CommentReplyCreatedSubscription = createSubscription(\n           // in our visible tree.\n           return;\n         }\n-        if (connection.getLinkedRecord(\"pageInfo\").getValue(\"hasNextPage\")) {\n+        if (connection.getLinkedRecord(\"pageInfo\")!.getValue(\"hasNextPage\")) {\n           // It hasn't loaded all comments yet, ignore this one.\n           return;\n         }"
    },
    {
      "sha": "c4ca18f4537386e120437e71c249f04880e1516a",
      "filename": "src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,9 +1,9 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -21,7 +21,7 @@ interface Props {\n   preload?: boolean;\n }\n \n-export const render = (data: ReadyState<QueryTypes[\"response\"]>) => {\n+export const render = (data: QueryRenderData<QueryTypes>) => {\n   if (data.error) {\n     return <div>{data.error.message}</div>;\n   }"
    },
    {
      "sha": "e4faf283c93efccf67fd41fb84d5e18f673f8954",
      "filename": "src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabViewNewMutation.tsx",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabViewNewMutation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabViewNewMutation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/AllCommentsTab/AllCommentsTabViewNewMutation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -27,8 +27,10 @@ const AllCommentsTabViewNewMutation = createMutation(\n         {\n           orderBy: GQLCOMMENT_SORT.CREATED_AT_DESC,\n         }\n-      )! as RecordProxy;\n-      const viewNewEdges = connection.getLinkedRecords(\"viewNewEdges\");\n+      )!;\n+      const viewNewEdges = connection.getLinkedRecords(\n+        \"viewNewEdges\"\n+      ) as ReadonlyArray<RecordProxy>;\n       if (!viewNewEdges || viewNewEdges.length === 0) {\n         return;\n       }"
    },
    {
      "sha": "c22d0a15b4dd6c3b026d22c44819e6b7e2410169",
      "filename": "src/core/client/stream/tabs/Comments/Stream/FeaturedComments/FeaturedCommentsQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/FeaturedComments/FeaturedCommentsQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/FeaturedComments/FeaturedCommentsQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/FeaturedComments/FeaturedCommentsQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,9 +1,9 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -20,7 +20,7 @@ interface Props {\n   preload?: boolean;\n }\n \n-export const render = (data: ReadyState<QueryTypes[\"response\"]>) => {\n+export const render = (data: QueryRenderData<QueryTypes>) => {\n   if (data.error) {\n     return <div>{data.error.message}</div>;\n   }"
    },
    {
      "sha": "650268f9148601de9921ff5e5dce2dad6ca0433c",
      "filename": "src/core/client/stream/tabs/Comments/Stream/PostCommentForm/CreateCommentMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/CreateCommentMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/CreateCommentMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/CreateCommentMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -78,7 +78,7 @@ function addCommentToStory(\n   commentEdge: RecordProxy\n ) {\n   // Get stream proxy.\n-  const streamProxy = store.get(input.storyID);\n+  const streamProxy = store.get(input.storyID)!;\n   const connectionKey = \"Stream_comments\";\n \n   if (input.commentsOrderBy === \"CREATED_AT_ASC\") {"
    },
    {
      "sha": "fd4c3ed3757b3cba6e4e721766279e468b99f692",
      "filename": "src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentForm.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentForm.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentForm.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentForm.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -12,7 +12,7 @@ import ValidationMessage from \"coral-stream/common/ValidationMessage\";\n import { CreateCommentFocusEvent } from \"coral-stream/events\";\n import { AriaInfo, Button, Flex, HorizontalGutter } from \"coral-ui/components\";\n \n-import { cleanupRTEEmptyHTML, getCommentBodyValidators } from \"../../helpers\";\n+import { getCommentBodyValidators, normalizeRTEHTML } from \"../../helpers\";\n import RemainingCharactersContainer from \"../../RemainingCharacters\";\n import RTE from \"../../RTE\";\n import MessageBoxContainer from \"../MessageBoxContainer\";\n@@ -86,7 +86,7 @@ const PostCommentForm: FunctionComponent<Props> = props => {\n                           inputId=\"comments-postCommentForm-field\"\n                           onFocus={onFocus}\n                           onChange={({ html }) =>\n-                            input.onChange(cleanupRTEEmptyHTML(html))\n+                            input.onChange(normalizeRTEHTML(html))\n                           }\n                           contentClassName={\n                             props.showMessageBox"
    },
    {
      "sha": "fbaa2c45e94905120a88d5d55de9a2876b3c7d19",
      "filename": "src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentFormContainer.spec.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentFormContainer.spec.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentFormContainer.spec.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/PostCommentForm/PostCommentFormContainer.spec.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -49,7 +49,7 @@ function createDefaultProps(add: DeepPartial<Props> = {}): Props {\n       },\n       viewer: {\n         id: \"viewer-id\",\n-        scheduledDeletionDate: undefined,\n+        scheduledDeletionDate: null,\n       },\n     },\n     add"
    },
    {
      "sha": "db2eb97f9ef1b6a79a9087105e633f1b10739844",
      "filename": "src/core/client/stream/tabs/Comments/Stream/StoryClosedTimeout/StoryClosedTimeoutContainer.tsx",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/StoryClosedTimeout/StoryClosedTimeoutContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/StoryClosedTimeout/StoryClosedTimeoutContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/StoryClosedTimeout/StoryClosedTimeoutContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -28,14 +28,16 @@ class StoryClosedTimeoutContainer extends React.Component<Props> {\n   constructor(props: Props) {\n     super(props);\n     if (props.story.closedAt) {\n-      this.timer = createTimeout(this.handleClose, this.props.story.closedAt);\n+      this.timer = createTimeout(this.handleClose, props.story.closedAt);\n     }\n   }\n \n   public UNSAFE_componentWillReceiveProps(nextProps: Props) {\n     if (nextProps.story.closedAt !== this.props.story.closedAt) {\n       clearTimeout(this.timer);\n-      this.timer = createTimeout(this.handleClose, nextProps.story.closedAt);\n+      if (nextProps.story.closedAt) {\n+        this.timer = createTimeout(this.handleClose, nextProps.story.closedAt);\n+      }\n     }\n   }\n "
    },
    {
      "sha": "c6af87a21d83fe0b5e10dfdab790e017c3959484",
      "filename": "src/core/client/stream/tabs/Comments/Stream/StreamQuery.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/StreamQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/StreamQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/StreamQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,9 +1,9 @@\n import { Localized } from \"@fluent/react/compat\";\n import React, { FunctionComponent } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -22,7 +22,7 @@ interface Props {\n }\n \n export const render = (\n-  data: ReadyState<QueryTypes[\"response\"]>,\n+  data: QueryRenderData<QueryTypes>,\n   commentsTab: COMMENTS_TAB\n ) => {\n   if (data.error) {"
    },
    {
      "sha": "5db42bd43c26b5f10c3fff432d0a55f16943cb19",
      "filename": "src/core/client/stream/tabs/Comments/Stream/SuspendedInfo/SuspendedInfoContainer.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/SuspendedInfo/SuspendedInfoContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/Stream/SuspendedInfo/SuspendedInfoContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/Stream/SuspendedInfo/SuspendedInfoContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -22,7 +22,7 @@ export const SuspendedInfoContainer: FunctionComponent<Props> = ({\n   }\n   return (\n     <SuspendedInfo\n-      until={viewer.status.suspension.until}\n+      until={viewer.status.suspension.until!}\n       organization={settings.organization.name}\n     />\n   );"
    },
    {
      "sha": "8e173492134d45495aefc55d2080cc393ff17859",
      "filename": "src/core/client/stream/tabs/Comments/helpers/incrementStoryCommentCounts.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/incrementStoryCommentCounts.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/incrementStoryCommentCounts.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/helpers/incrementStoryCommentCounts.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -11,7 +11,7 @@ export default function incrementStoryCommentCounts(\n     if (record) {\n       // TODO: when we have moderation, we'll need to be careful here.\n       const currentCount = record.getValue(\"totalPublished\");\n-      record.setValue(currentCount + 1, \"totalPublished\");\n+      record.setValue((currentCount as number) + 1, \"totalPublished\");\n     }\n   }\n }"
    },
    {
      "sha": "570541baa342185943a4fa379118b217776884ab",
      "filename": "src/core/client/stream/tabs/Comments/helpers/index.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/helpers/index.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -2,7 +2,7 @@ export { default as getHTMLCharacterLength } from \"./getHTMLCharacterLength\";\n export {\n   default as getCommentBodyValidators,\n } from \"./getCommentBodyValidators\";\n-export { default as cleanupRTEEmptyHTML } from \"./cleanupRTEEmptyHTML\";\n+export { default as normalizeRTEHTML } from \"./normalizeRTEHTML\";\n export {\n   default as shouldTriggerSettingsRefresh,\n } from \"./shouldTriggerSettingsRefresh\";"
    },
    {
      "sha": "0822f53def1c1f33f0d19000c0e40bac8f27759f",
      "filename": "src/core/client/stream/tabs/Comments/helpers/normalizeRTEHTML.ts",
      "status": "renamed",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/normalizeRTEHTML.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/normalizeRTEHTML.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/helpers/normalizeRTEHTML.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -7,7 +7,7 @@ import getHTMLText from \"./getHTMLText\";\n  *\n  * @param html the html to be cleaned up\n  */\n-export default function cleanupRTEEmptyHTML(html: string) {\n+function cleanupRTEEmptyHTML(html: string) {\n   if (html.includes(\"blockquote\")) {\n     return html;\n   }\n@@ -20,3 +20,12 @@ export default function cleanupRTEEmptyHTML(html: string) {\n   }\n   return \"\";\n }\n+\n+export default function normalizeRTEHTML(html: string) {\n+  // IE11 uses strong and em instead of b and i.\n+  html = html.replace(\"<strong>\", \"<b>\");\n+  html = html.replace(\"</strong>\", \"</b>\");\n+  html = html.replace(\"<em>\", \"<i>\");\n+  html = html.replace(\"</em>\", \"</i>\");\n+  return cleanupRTEEmptyHTML(html);\n+}",
      "previous_filename": "src/core/client/stream/tabs/Comments/helpers/cleanupRTEEmptyHTML.ts"
    },
    {
      "sha": "ae7d93ff66e7d3f2381f42772a333fee313c9fb2",
      "filename": "src/core/client/stream/tabs/Comments/helpers/prependCommentEdgeToProfile.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/prependCommentEdgeToProfile.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Comments/helpers/prependCommentEdgeToProfile.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Comments/helpers/prependCommentEdgeToProfile.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -12,7 +12,7 @@ export default function prependCommentEdgeToProfile(\n   store: RecordSourceSelectorProxy,\n   commentEdge: RecordProxy\n ) {\n-  const meProxy = store.get(getViewerSourceID(environment)!);\n+  const meProxy = store.get(getViewerSourceID(environment)!)!;\n   const con = ConnectionHandler.getConnection(\n     meProxy,\n     \"CommentHistory_comments\""
    },
    {
      "sha": "91ed1e9bf0f7dccebca56268b005050eb5727006",
      "filename": "src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Configure/ConfigureQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,10 +1,11 @@\n import { Localized } from \"@fluent/react/compat\";\n import { once } from \"lodash\";\n import React, { FunctionComponent, Suspense } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n+import { polyfillCSSVarsForIE11 } from \"coral-framework/helpers\";\n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -15,7 +16,11 @@ import { ConfigureQuery as QueryTypes } from \"coral-stream/__generated__/Configu\n import { ConfigureQueryLocal as Local } from \"coral-stream/__generated__/ConfigureQueryLocal.graphql\";\n \n const loadConfigureContainer = () =>\n-  import(\"./ConfigureContainer\" /* webpackChunkName: \"configure\" */);\n+  import(\"./ConfigureContainer\" /* webpackChunkName: \"configure\" */).then(x => {\n+    // New css is loaded, take care of polyfilling those css vars for IE11.\n+    polyfillCSSVarsForIE11();\n+    return x;\n+  });\n // (cvle) For some reason without `setTimeout` this request will block other requests.\n const preloadConfigureContainer = once(() =>\n   setTimeout(loadConfigureContainer)\n@@ -27,10 +32,7 @@ interface Props {\n   local: Local;\n }\n \n-export const render = ({\n-  error,\n-  props,\n-}: ReadyState<QueryTypes[\"response\"]>) => {\n+export const render = ({ error, props }: QueryRenderData<QueryTypes>) => {\n   if (error) {\n     return <div>{error.message}</div>;\n   }"
    },
    {
      "sha": "66f3fee21f60e8dd7fc3096ae4be35c1fa75e343",
      "filename": "src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/ProfileQuery.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/ProfileQuery.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,10 +1,11 @@\n import { Localized } from \"@fluent/react/compat\";\n import { once } from \"lodash\";\n import React, { FunctionComponent, Suspense } from \"react\";\n-import { ReadyState } from \"react-relay\";\n \n+import { polyfillCSSVarsForIE11 } from \"coral-framework/helpers\";\n import {\n   graphql,\n+  QueryRenderData,\n   QueryRenderer,\n   withLocalStateContainer,\n } from \"coral-framework/lib/relay\";\n@@ -15,7 +16,11 @@ import { ProfileQuery as QueryTypes } from \"coral-stream/__generated__/ProfileQu\n import { ProfileQueryLocal as Local } from \"coral-stream/__generated__/ProfileQueryLocal.graphql\";\n \n const loadProfileContainer = () =>\n-  import(\"./ProfileContainer\" /* webpackChunkName: \"profile\" */);\n+  import(\"./ProfileContainer\" /* webpackChunkName: \"profile\" */).then(x => {\n+    // New css is loaded, take care of polyfilling those css vars for IE11.\n+    polyfillCSSVarsForIE11();\n+    return x;\n+  });\n // (cvle) For some reason without `setTimeout` this request will block other requests.\n const preloadProfileContainer = once(() => setTimeout(loadProfileContainer));\n \n@@ -25,10 +30,7 @@ interface Props {\n   local: Local;\n }\n \n-export const render = ({\n-  error,\n-  props,\n-}: ReadyState<QueryTypes[\"response\"]>) => {\n+export const render = ({ error, props }: QueryRenderData<QueryTypes>) => {\n   if (error) {\n     return (\n       <CallOut color=\"error\" fullWidth>"
    },
    {
      "sha": "56064eed7113ddb4bebeb9631bd9ad7c5403f244",
      "filename": "src/core/client/stream/tabs/Profile/Settings/ChangeUsername/ChangeUsernameContainer.tsx",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/ChangeUsernameContainer.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/ChangeUsernameContainer.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/ChangeUsernameContainer.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -112,9 +112,10 @@ const ChangeUsernameContainer: FunctionComponent<Props> = ({\n         lastUsernameEditAllowed.getSeconds() -\n           ALLOWED_USERNAME_CHANGE_TIMEFRAME_DURATION\n       );\n-      const lastUsernameEdit =\n-        username.history[username.history.length - 1].createdAt;\n-      return lastUsernameEdit > lastUsernameEditAllowed;\n+      const lastUsernameEdit = new Date(\n+        username.history[username.history.length - 1].createdAt\n+      );\n+      return lastUsernameEdit <= lastUsernameEditAllowed;\n     }\n     return true;\n   }, [viewer]);"
    },
    {
      "sha": "93ef42f3c59799998a46d11aec2cf2374ae93fc5",
      "filename": "src/core/client/stream/tabs/Profile/Settings/ChangeUsername/UpdateUsernameMutation.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/UpdateUsernameMutation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/UpdateUsernameMutation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/Settings/ChangeUsername/UpdateUsernameMutation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -33,6 +33,7 @@ const UpdateUsernameMutation = createMutation(\n               updateUsername(input: $input) {\n                 clientMutationId\n                 user {\n+                  id\n                   username\n                   status {\n                     username {\n@@ -64,7 +65,7 @@ const UpdateUsernameMutation = createMutation(\n                     history: [\n                       {\n                         username: input.username,\n-                        createdAt: Date.now(),\n+                        createdAt: Date.now().toString(),\n                       },\n                     ],\n                   },"
    },
    {
      "sha": "ace75614d2cf00bcc1d4cf90eee02a750f0ebe55",
      "filename": "src/core/client/stream/tabs/Profile/Settings/DeleteAccount/DeleteAccountModal.tsx",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/DeleteAccountModal.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/DeleteAccountModal.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/DeleteAccountModal.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -6,7 +6,7 @@ import DeleteAccountModalContents from \"./DeleteAccountModalContents\";\n \n interface Props {\n   userID: string;\n-  scheduledDeletionDate?: string;\n+  scheduledDeletionDate?: string | null;\n   organizationEmail: string;\n   open: boolean;\n   onClose: () => void;\n@@ -33,7 +33,7 @@ const DeleteAccountModal: FunctionComponent<Props> = ({\n         <DeleteAccountModalContents\n           userID={userID}\n           onClose={onClose}\n-          scheduledDeletionDate={scheduledDeletionDate}\n+          scheduledDeletionDate={scheduledDeletionDate || undefined}\n           organizationEmail={organizationEmail}\n         />\n       </Modal>"
    },
    {
      "sha": "408774420a1cc6a9e10edbb14f820fb50ee17af0",
      "filename": "src/core/client/stream/tabs/Profile/Settings/DeleteAccount/Pages/RequestAccountDeletionMutation.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/Pages/RequestAccountDeletionMutation.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/Pages/RequestAccountDeletionMutation.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/Settings/DeleteAccount/Pages/RequestAccountDeletionMutation.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -52,7 +52,7 @@ const RequestAccountDeletionMutation = createMutation(\n               Date.now() + SCHEDULED_DELETION_WINDOW_DURATION * 1000\n             ).toISOString();\n             const viewerProxy = store.get(viewer.id);\n-            if (viewerProxy !== null) {\n+            if (viewerProxy) {\n               viewerProxy.setValue(deletionDate, \"scheduledDeletionDate\");\n             }\n           },"
    },
    {
      "sha": "0265135e0e8db0c38fbf9c9244ccd0b176d3a365",
      "filename": "src/core/client/stream/tabs/Profile/Settings/RequestCommentsDownloadMutation.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/RequestCommentsDownloadMutation.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/tabs/Profile/Settings/RequestCommentsDownloadMutation.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/tabs/Profile/Settings/RequestCommentsDownloadMutation.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -25,7 +25,7 @@ const RequestCommentsDownloadMutation = createMutation(\n       const user = store.get(viewer.id);\n       const now = new Date();\n \n-      if (user !== null) {\n+      if (user) {\n         user.setValue(now.toISOString(), \"lastDownloadedAt\");\n       }\n     };"
    },
    {
      "sha": "6c7f46e8689add806c20a2d3c72733bcf5617562",
      "filename": "src/core/client/stream/test/comments/permalink/__snapshots__/permalinkViewCommentNotFound.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/permalink/__snapshots__/permalinkViewCommentNotFound.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/permalink/__snapshots__/permalinkViewCommentNotFound.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/test/comments/permalink/__snapshots__/permalinkViewCommentNotFound.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -76,7 +76,9 @@ exports[`renders permalink view with unknown comment 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         <p\n           className=\"Box-root Typography-root Typography-bodyCopy Typography-colorTextPrimary\"\n         >"
    },
    {
      "sha": "e3fdbde378bea337a0af3f6aadffd0591ddca8cd",
      "filename": "src/core/client/stream/test/comments/stream/__snapshots__/renderCommunityGuidelines.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/stream/__snapshots__/renderCommunityGuidelines.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/stream/__snapshots__/renderCommunityGuidelines.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/test/comments/stream/__snapshots__/renderCommunityGuidelines.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -46,7 +46,9 @@ exports[`renders comment stream with community guidelines 1`] = `\n     <div\n       className=\"CallOut-root CallOut-colorPrimary CallOut-fullWidth coral coral-guidelines\"\n     >\n-      <div>\n+      <div\n+        className=\"CallOut-inner\"\n+      >\n         <div\n           className=\"Markdown-root\"\n           dangerouslySetInnerHTML={"
    },
    {
      "sha": "3b439cdcab2531430d5a3d9961556b00dff81e70",
      "filename": "src/core/client/stream/test/comments/stream/__snapshots__/renderMessageBox.spec.tsx.snap",
      "status": "modified",
      "additions": 18,
      "deletions": 6,
      "changes": 24,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/stream/__snapshots__/renderMessageBox.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/comments/stream/__snapshots__/renderMessageBox.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/test/comments/stream/__snapshots__/renderMessageBox.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -49,7 +49,9 @@ exports[`renders message box when commenting disabled 1`] = `\n       <div\n         className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth PostCommentFormClosedSitewide-root coral coral-closedSitewide\"\n       >\n-        <div>\n+        <div\n+          className=\"CallOut-inner\"\n+        >\n           <div\n             className=\"Markdown-root PostCommentFormClosedSitewide-message\"\n             dangerouslySetInnerHTML={\n@@ -204,7 +206,9 @@ exports[`renders message box when commenting disabled 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               There are no comments yet. Why don't you write one?\n             </div>\n           </div>\n@@ -530,7 +534,9 @@ exports[`renders message box when logged in 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               There are no comments yet. Why don't you write one?\n             </div>\n           </div>\n@@ -828,7 +834,9 @@ exports[`renders message box when not logged in 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               There are no comments yet. Why don't you write one?\n             </div>\n           </div>\n@@ -901,7 +909,9 @@ exports[`renders message box when story isClosed 1`] = `\n       <div\n         className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth coral coral-createComment-closed\"\n       >\n-        <div>\n+        <div\n+          className=\"CallOut-inner\"\n+        >\n           <div\n             className=\"Markdown-root\"\n             dangerouslySetInnerHTML={\n@@ -1033,7 +1043,9 @@ exports[`renders message box when story isClosed 1`] = `\n           <div\n             className=\"CallOut-root CallOut-colorRegular CallOut-fullWidth\"\n           >\n-            <div>\n+            <div\n+              className=\"CallOut-inner\"\n+            >\n               There are no comments on this story.\n             </div>\n           </div>"
    },
    {
      "sha": "7734ea7470d13597c059a22c4707fc59bcd4190c",
      "filename": "src/core/client/stream/test/profile/__snapshots__/account.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/profile/__snapshots__/account.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/profile/__snapshots__/account.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/test/profile/__snapshots__/account.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -286,7 +286,9 @@ exports[`renders the empty settings pane 1`] = `\n                 <div\n                   className=\"CallOut-root CallOut-colorRegular coral coral-verifyEmail\"\n                 >\n-                  <div>\n+                  <div\n+                    className=\"CallOut-inner\"\n+                  >\n                     <div\n                       className=\"Box-root Flex-root Flex-flex Flex-itemGutter gutter\"\n                     >"
    },
    {
      "sha": "b3d69795e095728fa3219e1f01f20c4d2498adf8",
      "filename": "src/core/client/stream/test/profile/changeEmail.spec.tsx",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/profile/changeEmail.spec.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/stream/test/profile/changeEmail.spec.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/stream/test/profile/changeEmail.spec.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -6,6 +6,7 @@ import {\n   act,\n   createResolversStub,\n   CreateTestRendererParams,\n+  waitForElement,\n   within,\n } from \"coral-framework/testHelpers\";\n \n@@ -70,8 +71,8 @@ describe(\"change email form\", () => {\n   });\n \n   it(\"ensures email field is required\", async () => {\n-    const changeEmail = within(testRenderer.root).getByTestID(\n-      \"profile-changeEmail\"\n+    const changeEmail = await waitForElement(() =>\n+      within(testRenderer.root).getByTestID(\"profile-changeEmail\")\n     );\n     const editButton = within(changeEmail).getByText(\"Edit\");\n     act(() => {\n@@ -90,8 +91,8 @@ describe(\"change email form\", () => {\n   });\n \n   it(\"ensures password field is required\", async () => {\n-    const changeEmail = within(testRenderer.root).getByTestID(\n-      \"profile-changeEmail\"\n+    const changeEmail = await waitForElement(() =>\n+      within(testRenderer.root).getByTestID(\"profile-changeEmail\")\n     );\n     const editButton = within(changeEmail).getByText(\"Edit\");\n     act(() => {\n@@ -113,8 +114,8 @@ describe(\"change email form\", () => {\n   });\n \n   it(\"updates email if fields are valid\", async () => {\n-    const changeEmail = within(testRenderer.root).getByTestID(\n-      \"profile-changeEmail\"\n+    const changeEmail = await waitForElement(() =>\n+      within(testRenderer.root).getByTestID(\"profile-changeEmail\")\n     );\n     const editButton = within(changeEmail).getByText(\"Edit\");\n     act(() => {"
    },
    {
      "sha": "91e87fbd6a1798295d8b2a0f12294c7be04b5007",
      "filename": "src/core/client/test/mocks.ts",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/mocks.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/mocks.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/test/mocks.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,4 +1,3 @@\n-jest.mock(\"fluent-intl-polyfill/compat\", () => null);\n jest.mock(\"react-transition-group\", () => ({\n   CSSTransition: (props: { children: React.ReactNode }) => props.children,\n   Transition: (props: { children: React.ReactNode }) => props.children,"
    },
    {
      "sha": "273ebd24b2b396551f81e64187f0ff09a550a400",
      "filename": "src/core/client/test/polyfills.ts",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/polyfills.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/polyfills.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/test/polyfills.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1 @@\n+import \"intersection-observer\";"
    },
    {
      "sha": "87c0998c8eca558f08025a7018d0f9a2c8ee2dbb",
      "filename": "src/core/client/test/setupConsole.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/setupConsole.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/test/setupConsole.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/test/setupConsole.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -21,6 +21,7 @@ const failPatterns: PatternMap = {\n  */\n const mutePatterns: PatternMap = {\n   \"False validateMutation warnings (https://github.com/facebook/relay/pull/2760)\": /`optimisticResponse`.*contains an unused field .*\\.\\d+/g,\n+  \"ComponentWillReceiveProps has been renamed, and is not recommended for use\": /componentWillReceiveProps has been renamed, and is not recommended for use/g,\n };\n \n let matchedFail: string[] = [];"
    },
    {
      "sha": "dadd678e8819a65a52c997998ba0fa478683793d",
      "filename": "src/core/client/ui/components/CallOut/CallOut.css",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/CallOut.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/CallOut.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/CallOut/CallOut.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -43,3 +43,7 @@\n   display: flex;\n   width: 100%;\n }\n+\n+.inner {\n+  width: 100%;\n+}"
    },
    {
      "sha": "2b4efb0a01bf359d11eee0c956fd83a6f79e8a95",
      "filename": "src/core/client/ui/components/CallOut/CallOut.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/CallOut.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/CallOut.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/CallOut/CallOut.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -59,7 +59,7 @@ const CallOut: FunctionComponent<CallOutProps> = props => {\n \n   return (\n     <div className={rootClassName} {...rest}>\n-      <div>{children}</div>\n+      <div className={classes.inner}>{children}</div>\n     </div>\n   );\n };"
    },
    {
      "sha": "056cdb13ade25fa044fb454d9e8707376451613a",
      "filename": "src/core/client/ui/components/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/CallOut/__snapshots__/CallOut.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -4,7 +4,9 @@ exports[`renders correctly 1`] = `\n <div\n   className=\"CallOut-root CallOut-colorError custom\"\n >\n-  <div>\n+  <div\n+    className=\"CallOut-inner\"\n+  >\n     Hello World\n   </div>\n </div>"
    },
    {
      "sha": "773986d02379e835044b3f733d788fc83250119d",
      "filename": "src/core/client/ui/components/Icon/Icon.css",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/Icon/Icon.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/Icon/Icon.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/Icon/Icon.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -15,6 +15,7 @@\n \n   /* Enable Ligatures */\n   font-feature-settings: \"liga\";\n+  -ms-font-feature-settings: \"liga\" 1;\n   font-variant-ligatures: \"discretionary-ligatures\";\n \n   /* Support for Safari and Chrome. */"
    },
    {
      "sha": "e6d4bb9c8f01bb0ffed1ede511f83145ed322bbe",
      "filename": "src/core/client/ui/components/Modal/Modal.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/Modal/Modal.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/Modal/Modal.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/Modal/Modal.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -18,7 +18,7 @@ import styles from \"./Modal.css\";\n \n function appendDivNode() {\n   const div = document.createElement(\"div\");\n-  document.body.append(div);\n+  document.body.appendChild(div);\n   div.setAttribute(\"data-portal\", \"modal\");\n   return div;\n }"
    },
    {
      "sha": "be7a7a13cdc14ec6b1dfad477165e5bc5c081e41",
      "filename": "src/core/client/ui/components/PasswordField/PasswordField.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/PasswordField/PasswordField.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/PasswordField/PasswordField.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/PasswordField/PasswordField.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -39,6 +39,9 @@\n   line-height: 0;\n }\n \n+/* ie11 specific css */\n+_:-ms-lang(x), .icon { top: 8px; }\n+\n .input {\n   composes: inputText placeholderPseudo from \"coral-ui/shared/typography.css\";\n   display: block;"
    },
    {
      "sha": "aadab72e5f8437a5e726981750053c352ec937ba",
      "filename": "src/core/client/ui/components/v2/CallOut/CallOut.css",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/CallOut.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/CallOut.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/v2/CallOut/CallOut.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -49,3 +49,7 @@ $callout-regular-border: var(--v2-colors-grey-300);\n   display: flex;\n   width: 100%;\n }\n+\n+.inner {\n+  width: 100%;\n+}"
    },
    {
      "sha": "2b4efb0a01bf359d11eee0c956fd83a6f79e8a95",
      "filename": "src/core/client/ui/components/v2/CallOut/CallOut.tsx",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/CallOut.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/CallOut.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/v2/CallOut/CallOut.tsx?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -59,7 +59,7 @@ const CallOut: FunctionComponent<CallOutProps> = props => {\n \n   return (\n     <div className={rootClassName} {...rest}>\n-      <div>{children}</div>\n+      <div className={classes.inner}>{children}</div>\n     </div>\n   );\n };"
    },
    {
      "sha": "056cdb13ade25fa044fb454d9e8707376451613a",
      "filename": "src/core/client/ui/components/v2/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/CallOut/__snapshots__/CallOut.spec.tsx.snap",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/v2/CallOut/__snapshots__/CallOut.spec.tsx.snap?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -4,7 +4,9 @@ exports[`renders correctly 1`] = `\n <div\n   className=\"CallOut-root CallOut-colorError custom\"\n >\n-  <div>\n+  <div\n+    className=\"CallOut-inner\"\n+  >\n     Hello World\n   </div>\n </div>"
    },
    {
      "sha": "20f5240c0f29d4304205618e073471b4a1d00fa8",
      "filename": "src/core/client/ui/components/v2/Icon/Icon.css",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/Icon/Icon.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/Icon/Icon.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/v2/Icon/Icon.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -14,6 +14,7 @@\n \n   /* Enable Ligatures */\n   font-feature-settings: \"liga\";\n+  -ms-font-feature-settings: \"liga\" 1;\n   font-variant-ligatures: \"discretionary-ligatures\";\n \n   /* Support for Safari and Chrome. */"
    },
    {
      "sha": "2831df21f480f725c91a512d1faff7953b29056a",
      "filename": "src/core/client/ui/components/v2/PasswordField/PasswordField.css",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/PasswordField/PasswordField.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/components/v2/PasswordField/PasswordField.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/components/v2/PasswordField/PasswordField.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -39,6 +39,9 @@\n   line-height: 0;\n }\n \n+/* ie11 specific css */\n+_:-ms-lang(x), .icon { top: 8px; }\n+\n .input {\n   font-family: var(--v2-font-family-primary);\n   font-weight: var(--v2-font-weight-primary-regular);"
    },
    {
      "sha": "ab8497c1b7dfb07bff8f9c739dc4bc46bb2d8580",
      "filename": "src/core/client/ui/shared/icon.css",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/shared/icon.css",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/client/ui/shared/icon.css",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/ui/shared/icon.css?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -24,6 +24,7 @@\n \n   /* Enable Ligatures */\n   font-feature-settings: \"liga\";\n+  -ms-font-feature-settings: \"liga\" 1;\n   font-variant-ligatures: \"discretionary-ligatures\";\n \n   /* Support for Safari and Chrome. */"
    },
    {
      "sha": "5dd91d1224cf0111c94b4af4c20488c7bbce8e21",
      "filename": "src/core/common/.babelrc.client.js",
      "status": "removed",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.client.js",
      "raw_url": "https://github.com/coralproject/talk/raw/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.client.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/.babelrc.client.js?ref=9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "patch": "@@ -1 +0,0 @@\n-module.exports = require(\"../client/.babelrc.js\");"
    },
    {
      "sha": "24865acf8ce005598aee87f3af7c6e3f6b96707b",
      "filename": "src/core/common/.babelrc.js",
      "status": "removed",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.js",
      "raw_url": "https://github.com/coralproject/talk/raw/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/.babelrc.js?ref=9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "patch": "@@ -1,5 +0,0 @@\n-if (process.env.WEBPACK === \"true\") {\n-  module.exports = require(\"./.babelrc.client.js\");\n-} else {\n-  module.exports = require(\"./.babelrc.server.js\");\n-}"
    },
    {
      "sha": "6a5039ceec723f3778baefbba90561392c112e3c",
      "filename": "src/core/common/.babelrc.server.js",
      "status": "removed",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.server.js",
      "raw_url": "https://github.com/coralproject/talk/raw/9c4a9753bbf2dbdfe6a606f37585a84c305d230c/src/core/common/.babelrc.server.js",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/.babelrc.server.js?ref=9c4a9753bbf2dbdfe6a606f37585a84c305d230c",
      "patch": "@@ -1,5 +0,0 @@\n-module.exports = {\n-  presets: [\n-    [\"@babel/env\", { targets: { node: \"10.0.0\" }, modules: \"commonjs\" }],\n-  ],\n-};"
    },
    {
      "sha": "30b83d3f29c021ba2e10196cf2bdbc1ef0e83ff6",
      "filename": "src/core/common/utils/getOrigin.spec.ts",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/getOrigin.spec.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/getOrigin.spec.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/utils/getOrigin.spec.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,12 @@\n+import getOrigin from \"./getOrigin\";\n+\n+it(\"should get origin\", () => {\n+  const cases: Record<string, string> = {\n+    \"//localhost:8080/xyz/jh.html\": \"//localhost:8080\",\n+    \"http://localhost:8080/xyz\": \"http://localhost:8080\",\n+    \"https://localhost:8080/xyz\": \"https://localhost:8080\",\n+  };\n+  Object.keys(cases).forEach(k => {\n+    expect(getOrigin(k)).toBe(cases[k]);\n+  });\n+});"
    },
    {
      "sha": "e925b04b7a8ab1ede779bebcd4dee6c586361f55",
      "filename": "src/core/common/utils/getOrigin.ts",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/getOrigin.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/getOrigin.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/utils/getOrigin.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1,4 @@\n+export default function getOrigin(url: string) {\n+  const split = url.split(\"/\");\n+  return `${split[0]}//${split[2]}`;\n+}"
    },
    {
      "sha": "4dedb2a47d6b97ea0727f2297b1ec9734d9c4aae",
      "filename": "src/core/common/utils/index.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/index.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/index.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/utils/index.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -10,3 +10,5 @@ export { default as stringifyQuery } from \"./stringifyQuery\";\n export { default as pureMerge } from \"./pureMerge\";\n export { default as isPromiseLike } from \"./isPromiseLike\";\n export { default as isPromise } from \"./isPromise\";\n+export { default as startsWith } from \"./startsWith\";\n+export { default as getOrigin } from \"./getOrigin\";"
    },
    {
      "sha": "7e4c5d16e91d57196eec87bc6b8240547d57d932",
      "filename": "src/core/common/utils/startsWith.spec.ts",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/startsWith.spec.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/startsWith.spec.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/utils/startsWith.spec.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "previous_filename": "src/core/client/embed/utils/startsWith.spec.ts"
    },
    {
      "sha": "fb9efe717b89e3049eff03a26937a93387224826",
      "filename": "src/core/common/utils/startsWith.ts",
      "status": "renamed",
      "additions": 0,
      "deletions": 0,
      "changes": 0,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/startsWith.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/core/common/utils/startsWith.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/common/utils/startsWith.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "previous_filename": "src/core/client/embed/utils/startsWith.ts"
    },
    {
      "sha": "7be6da1700689c664483f27f6515ce3a499cad6e",
      "filename": "src/types/fluent-intl-polyfill.d.ts",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/fluent-intl-polyfill.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/fluent-intl-polyfill.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/fluent-intl-polyfill.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1 @@\n+declare module \"fluent-intl-polyfill\";"
    },
    {
      "sha": "169802ccfbcccfdb7b72f1acc07fbaa6d0653d45",
      "filename": "src/types/fluent.d.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/fluent.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/fluent.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/fluent.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -32,6 +32,7 @@ declare module \"@fluent/react/compat\" {\n \n   export interface LocalizationProviderProps {\n     bundles: FluentBundle[];\n+    parseMarkup?: (s: string) => ChildNode[];\n   }\n   export const LocalizationProvider: ComponentType<LocalizationProviderProps>;\n "
    },
    {
      "sha": "6e2b18f3c576ef4a63f03909eec1287501f2eb4e",
      "filename": "src/types/proxy-polyfill.d.ts",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/proxy-polyfill.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/proxy-polyfill.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/proxy-polyfill.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1 @@\n+declare module \"proxy-polyfill\";"
    },
    {
      "sha": "cef76b7172a1b4905ed63ba07ff45c8b095e278c",
      "filename": "src/types/react-relay-network-modern.d.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/react-relay-network-modern.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/react-relay-network-modern.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/react-relay-network-modern.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -5,6 +5,7 @@\n declare module \"react-relay-network-modern/es\" {\n   // TODO: missing typescript types.\n   // import { QueryResponseCache } from 'relay-runtime';\n+  import { ExecuteFunction } from \"relay-runtime\";\n \n   export interface Variables {\n     [name: string]: any;\n@@ -188,6 +189,7 @@ declare module \"react-relay-network-modern/es\" {\n       middlewares: Array<Middleware | MiddlewareSync | MiddlewareRaw>,\n       opts?: RelayNetworkLayerOpts\n     );\n+    execute: ExecuteFunction;\n   }\n \n   export interface AuthMiddlewareOpts {"
    },
    {
      "sha": "4032b4d0454e5c2ea2351b78da3d0eb9be78ae2a",
      "filename": "src/types/relay-local-schema.d.ts",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/relay-local-schema.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/relay-local-schema.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/relay-local-schema.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -1,6 +1,6 @@\n declare module \"relay-local-schema\" {\n   import { GraphQLSchema } from \"graphql\";\n-  import { Network as RelayNetwork, FetchFunction } from \"relay-runtime\";\n+  import { INetwork as RelayNetwork, FetchFunction } from \"relay-runtime\";\n \n   interface CreateArguments {\n     schema: GraphQLSchema;"
    },
    {
      "sha": "f6fdad5668d8a9cf79008a50c418e005585a871e",
      "filename": "src/types/whatwg-fetch.d.ts",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/coralproject/talk/blob/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/whatwg-fetch.d.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/2b1c9aea7894ecf71a318b48507d0595038d5c24/src/types/whatwg-fetch.d.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/types/whatwg-fetch.d.ts?ref=2b1c9aea7894ecf71a318b48507d0595038d5c24",
      "patch": "@@ -0,0 +1 @@\n+declare module \"whatwg-fetch\";"
    }
  ]
}
