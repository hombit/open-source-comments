{
  "sha": "e5ea1ee17996fbebda2de05e632993df1d979f34",
  "node_id": "MDY6Q29tbWl0NzI0NTQyNDI6ZTVlYTFlZTE3OTk2ZmJlYmRhMmRlMDVlNjMyOTkzZGYxZDk3OWYzNA==",
  "commit": {
    "author": {
      "name": "Tessa Thornton",
      "email": "tessathornton@gmail.com",
      "date": "2020-03-12T22:19:26Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-03-12T22:19:26Z"
    },
    "message": "[CORL-959] pass siteID through to approved and rejected route queries (#2884)\n\n* pass siteID through to approved and rejected route queries\r\n\r\n* Fix tests\r\n\r\nCo-authored-by: Wyatt Johnson <wyattjoh@gmail.com>",
    "tree": {
      "sha": "747058599faa65cdc477aacf180b6c468522eb16",
      "url": "https://api.github.com/repos/coralproject/talk/git/trees/747058599faa65cdc477aacf180b6c468522eb16"
    },
    "url": "https://api.github.com/repos/coralproject/talk/git/commits/e5ea1ee17996fbebda2de05e632993df1d979f34",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJearVuCRBK7hj4Ov3rIwAAdHIIAAdBAYQsZ7kPQ4k855H0f2re\neYYIupNPY5lYJ/HtPqwmJmlwmKCUhmY0BDGCs8YTPcynhyiZBytyabopsPXMob3T\n9rbA4EW45Y32IdX2ZWdCDmN3dIzHakCRZWZAWcrnNqw6MG4YcNln1EUXybXDkTEa\nZTqQ4D4nEWODdL0cYGY2GRW4M6CoJ/NWEzHgDSLIYIgHyshMub/dgEnyivG8OzWy\nt3nCawG3+W7zFGxbi6HVX/iqky2wIWTquFl/XT1+7Y4p/642onlRGcIvV0VQTd0+\nO3400JNt8GBCI9kbvrpdIcnxznvCqUca9esos8GLFgn3Z+Vb8uG367hXUxY+lw0=\n=YLfb\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 747058599faa65cdc477aacf180b6c468522eb16\nparent 75c0bad073d0cb49f9ada1f6a2fe516ca2ddeb70\nauthor Tessa Thornton <tessathornton@gmail.com> 1584051566 -0400\ncommitter GitHub <noreply@github.com> 1584051566 +0000\n\n[CORL-959] pass siteID through to approved and rejected route queries (#2884)\n\n* pass siteID through to approved and rejected route queries\r\n\r\n* Fix tests\r\n\r\nCo-authored-by: Wyatt Johnson <wyattjoh@gmail.com>"
    }
  },
  "url": "https://api.github.com/repos/coralproject/talk/commits/e5ea1ee17996fbebda2de05e632993df1d979f34",
  "html_url": "https://github.com/coralproject/talk/commit/e5ea1ee17996fbebda2de05e632993df1d979f34",
  "comments_url": "https://api.github.com/repos/coralproject/talk/commits/e5ea1ee17996fbebda2de05e632993df1d979f34/comments",
  "author": {
    "login": "tessalt",
    "id": 1789029,
    "node_id": "MDQ6VXNlcjE3ODkwMjk=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/1789029?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tessalt",
    "html_url": "https://github.com/tessalt",
    "followers_url": "https://api.github.com/users/tessalt/followers",
    "following_url": "https://api.github.com/users/tessalt/following{/other_user}",
    "gists_url": "https://api.github.com/users/tessalt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tessalt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tessalt/subscriptions",
    "organizations_url": "https://api.github.com/users/tessalt/orgs",
    "repos_url": "https://api.github.com/users/tessalt/repos",
    "events_url": "https://api.github.com/users/tessalt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tessalt/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "75c0bad073d0cb49f9ada1f6a2fe516ca2ddeb70",
      "url": "https://api.github.com/repos/coralproject/talk/commits/75c0bad073d0cb49f9ada1f6a2fe516ca2ddeb70",
      "html_url": "https://github.com/coralproject/talk/commit/75c0bad073d0cb49f9ada1f6a2fe516ca2ddeb70"
    }
  ],
  "stats": {
    "total": 64,
    "additions": 50,
    "deletions": 14
  },
  "files": [
    {
      "sha": "f9d04761af767667a000fcf3f7f27a5f7531357d",
      "filename": "src/core/client/admin/routes/Moderate/Queue/ApprovedQueueRoute.tsx",
      "status": "modified",
      "additions": 19,
      "deletions": 4,
      "changes": 23,
      "blob_url": "https://github.com/coralproject/talk/blob/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/routes/Moderate/Queue/ApprovedQueueRoute.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/routes/Moderate/Queue/ApprovedQueueRoute.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/Queue/ApprovedQueueRoute.tsx?ref=e5ea1ee17996fbebda2de05e632993df1d979f34",
      "patch": "@@ -17,6 +17,7 @@ interface ApprovedQueueRouteProps {\n   query: ApprovedQueueRoute_query;\n   relay: RelayPaginationProp;\n   storyID?: string;\n+  siteID?: string;\n }\n \n // TODO: use generated types\n@@ -87,10 +88,12 @@ const enhanced = (withPaginationContainer<\n           count: { type: \"Int!\", defaultValue: 5 }\n           cursor: { type: \"Cursor\" }\n           storyID: { type: \"ID\" }\n+          siteID: { type: \"ID\" }\n         ) {\n         comments(\n           status: APPROVED\n           storyID: $storyID\n+          siteID: $siteID\n           first: $count\n           after: $cursor\n         ) @connection(key: \"ApprovedQueue_comments\") {\n@@ -134,11 +137,17 @@ const enhanced = (withPaginationContainer<\n       # Notice that we re-use our fragment, and the shape of this query matches our fragment spec.\n       query ApprovedQueueRoutePaginationQuery(\n         $storyID: ID\n+        $siteID: ID\n         $count: Int!\n         $cursor: Cursor\n       ) {\n         ...ApprovedQueueRoute_query\n-          @arguments(storyID: $storyID, count: $count, cursor: $cursor)\n+          @arguments(\n+            storyID: $storyID\n+            siteID: $siteID\n+            count: $count\n+            cursor: $cursor\n+          )\n       }\n     `,\n   }\n@@ -147,14 +156,20 @@ const enhanced = (withPaginationContainer<\n enhanced.routeConfig = {\n   Component: enhanced,\n   query: graphql`\n-    query ApprovedQueueRouteQuery($storyID: ID) {\n-      ...ApprovedQueueRoute_query @arguments(storyID: $storyID)\n+    query ApprovedQueueRouteQuery($storyID: ID, $siteID: ID) {\n+      ...ApprovedQueueRoute_query @arguments(storyID: $storyID, siteID: $siteID)\n     }\n   `,\n   cacheConfig: { force: true },\n   render: function RejectedRouteRender({ Component, props, match }) {\n     if (Component && props) {\n-      return <Component query={props} storyID={match.params.storyID} />;\n+      return (\n+        <Component\n+          query={props}\n+          storyID={match.params.storyID}\n+          siteID={match.params.siteID}\n+        />\n+      );\n     }\n     return <LoadingQueue />;\n   },"
    },
    {
      "sha": "a3ebf01e4cc3de91c9082b971be05e40a65c3621",
      "filename": "src/core/client/admin/routes/Moderate/Queue/RejectedQueueRoute.tsx",
      "status": "modified",
      "additions": 19,
      "deletions": 4,
      "changes": 23,
      "blob_url": "https://github.com/coralproject/talk/blob/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/routes/Moderate/Queue/RejectedQueueRoute.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/routes/Moderate/Queue/RejectedQueueRoute.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/routes/Moderate/Queue/RejectedQueueRoute.tsx?ref=e5ea1ee17996fbebda2de05e632993df1d979f34",
      "patch": "@@ -17,6 +17,7 @@ interface RejectedQueueRouteProps {\n   query: RejectedQueueRoute_query;\n   relay: RelayPaginationProp;\n   storyID?: string;\n+  siteID?: string;\n }\n \n // TODO: use generated types\n@@ -87,10 +88,12 @@ const enhanced = (withPaginationContainer<\n           count: { type: \"Int!\", defaultValue: 5 }\n           cursor: { type: \"Cursor\" }\n           storyID: { type: \"ID\" }\n+          siteID: { type: \"ID\" }\n         ) {\n         comments(\n           status: REJECTED\n           storyID: $storyID\n+          siteID: $siteID\n           first: $count\n           after: $cursor\n         ) @connection(key: \"RejectedQueue_comments\") {\n@@ -134,11 +137,17 @@ const enhanced = (withPaginationContainer<\n       # Notice that we re-use our fragment, and the shape of this query matches our fragment spec.\n       query RejectedQueueRoutePaginationQuery(\n         $storyID: ID\n+        $siteID: ID\n         $count: Int!\n         $cursor: Cursor\n       ) {\n         ...RejectedQueueRoute_query\n-          @arguments(storyID: $storyID, count: $count, cursor: $cursor)\n+          @arguments(\n+            storyID: $storyID\n+            siteID: $siteID\n+            count: $count\n+            cursor: $cursor\n+          )\n       }\n     `,\n   }\n@@ -147,14 +156,20 @@ const enhanced = (withPaginationContainer<\n enhanced.routeConfig = {\n   Component: enhanced,\n   query: graphql`\n-    query RejectedQueueRouteQuery($storyID: ID) {\n-      ...RejectedQueueRoute_query @arguments(storyID: $storyID)\n+    query RejectedQueueRouteQuery($storyID: ID, $siteID: ID) {\n+      ...RejectedQueueRoute_query @arguments(storyID: $storyID, siteID: $siteID)\n     }\n   `,\n   cacheConfig: { force: true },\n   render: function RejectedRouteRender({ Component, props, match }) {\n     if (Component && props) {\n-      return <Component query={props} storyID={match.params.storyID} />;\n+      return (\n+        <Component\n+          query={props}\n+          storyID={match.params.storyID}\n+          siteID={match.params.siteID}\n+        />\n+      );\n     }\n     return <LoadingQueue />;\n   },"
    },
    {
      "sha": "57f9ddc9e22d18c4efccf3b5252053d67a513637",
      "filename": "src/core/client/admin/test/moderate/rejectedQueue.spec.tsx",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/coralproject/talk/blob/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/test/moderate/rejectedQueue.spec.tsx",
      "raw_url": "https://github.com/coralproject/talk/raw/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/client/admin/test/moderate/rejectedQueue.spec.tsx",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/client/admin/test/moderate/rejectedQueue.spec.tsx?ref=e5ea1ee17996fbebda2de05e632993df1d979f34",
      "patch": "@@ -74,6 +74,7 @@ it(\"renders rejected queue with comments\", async () => {\n             first: 5,\n             status: \"REJECTED\",\n             storyID: null,\n+            siteID: null,\n           });\n           return {\n             edges: [\n@@ -112,6 +113,7 @@ it(\"shows a moderate story\", async () => {\n             first: 5,\n             status: \"REJECTED\",\n             storyID: null,\n+            siteID: null,\n           });\n           return {\n             edges: [\n@@ -155,6 +157,7 @@ it(\"renders rejected queue with comments and load more\", async () => {\n                 first: 5,\n                 status: GQLCOMMENT_STATUS.REJECTED,\n                 storyID: null,\n+                siteID: null,\n               });\n               return {\n                 edges: [\n@@ -178,6 +181,7 @@ it(\"renders rejected queue with comments and load more\", async () => {\n                 after: rejectedComments[1].createdAt,\n                 status: GQLCOMMENT_STATUS.REJECTED,\n                 storyID: null,\n+                siteID: null,\n               });\n               return {\n                 edges: [\n@@ -269,6 +273,7 @@ it(\"approves comment in rejected queue\", async () => {\n             first: 5,\n             status: \"REJECTED\",\n             storyID: null,\n+            siteID: null,\n           });\n           return {\n             edges: ["
    },
    {
      "sha": "96da21723d700f6448246df3e9c9e18c7848860a",
      "filename": "src/core/server/graph/loaders/Comments.ts",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/coralproject/talk/blob/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/server/graph/loaders/Comments.ts",
      "raw_url": "https://github.com/coralproject/talk/raw/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/server/graph/loaders/Comments.ts",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/server/graph/loaders/Comments.ts?ref=e5ea1ee17996fbebda2de05e632993df1d979f34",
      "patch": "@@ -138,6 +138,7 @@ export default (ctx: Context) => ({\n     first,\n     after,\n     storyID,\n+    siteID,\n     status,\n     tag,\n     query,\n@@ -151,6 +152,7 @@ export default (ctx: Context) => ({\n           ...queryFilter(query),\n           ...tagFilter(tag),\n           storyID,\n+          siteID,\n           status,\n         },\n         isNil"
    },
    {
      "sha": "4cf3ca649752328cbd7e6acbef1ca8ed1547a6a7",
      "filename": "src/core/server/graph/schema/schema.graphql",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/coralproject/talk/blob/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/server/graph/schema/schema.graphql",
      "raw_url": "https://github.com/coralproject/talk/raw/e5ea1ee17996fbebda2de05e632993df1d979f34/src/core/server/graph/schema/schema.graphql",
      "contents_url": "https://api.github.com/repos/coralproject/talk/contents/src/core/server/graph/schema/schema.graphql?ref=e5ea1ee17996fbebda2de05e632993df1d979f34",
      "patch": "@@ -2944,6 +2944,7 @@ type Query {\n     first: Int = 10 @constraint(max: 50)\n     after: Cursor\n     storyID: ID\n+    siteID: ID\n     status: COMMENT_STATUS\n     tag: TAG\n     query: String\n@@ -6415,16 +6416,14 @@ type Mutation {\n   \"\"\"\n   addStoryExpert adds an expert to a story.\n   \"\"\"\n-  addStoryExpert(\n-    input: AddExpertInput!\n-  ): AddExpertPayload! @auth(roles: [ADMIN, MODERATOR])\n+  addStoryExpert(input: AddExpertInput!): AddExpertPayload!\n+    @auth(roles: [ADMIN, MODERATOR])\n \n   \"\"\"\n   removeStoryExpert removes an expert from a story.\n   \"\"\"\n-  removeStoryExpert(\n-    input: RemoveExpertInput!\n-  ): RemoveExpertPayload! @auth(roles: [ADMIN, MODERATOR])\n+  removeStoryExpert(input: RemoveExpertInput!): RemoveExpertPayload!\n+    @auth(roles: [ADMIN, MODERATOR])\n }\n \n ##################"
    }
  ]
}
