{
  "sha": "799ddeea3c328658a596baab22233444f1e9e915",
  "node_id": "MDY6Q29tbWl0NzU2OTU3ODo3OTlkZGVlYTNjMzI4NjU4YTU5NmJhYWIyMjIzMzQ0NGYxZTllOTE1",
  "commit": {
    "author": {
      "name": "Dan Ungureanu",
      "email": "dan@ungureanu.me",
      "date": "2020-04-13T15:57:52Z"
    },
    "committer": {
      "name": "GitHub",
      "email": "noreply@github.com",
      "date": "2020-04-13T15:57:52Z"
    },
    "message": "FIX: Include subcategories in 'posts' report (#9410)",
    "tree": {
      "sha": "0f3ad8c0c2824b7334066e632a1aba765baecd0f",
      "url": "https://api.github.com/repos/discourse/discourse/git/trees/0f3ad8c0c2824b7334066e632a1aba765baecd0f"
    },
    "url": "https://api.github.com/repos/discourse/discourse/git/commits/799ddeea3c328658a596baab22233444f1e9e915",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJelIwACRBK7hj4Ov3rIwAAdHIIAFLtESuaKjBWIRrUBpxUST8o\nHbQJoqawY90Quf7Q6za2wtA2HRQJofhROZnwUbJoWuELBffs8AJKDk1rqcdAgMep\nU+KyLDrKGleRBLpj+3FfoGx9eSMuE+Xn4LzAlDl63QueQPZpBjEzcBEyDWcD3kGZ\nEBMC6LLPkNIYW3/jV+vZBgI3bryd3OH0RKDC6qA6S0ZGF5rGXkHTgdo92HJkdwnt\n/nXJaT9X9HHiNuIGNFpxZ6b1bC8Td7Jw2LAP/5bFwafyhEr6WqF8SJMzh7BHwVSA\nLIt11S7dUU8MarOg9U6CYYIsZvrAtMDw8hl04r2DKHzZxYIchPcWWTeAWV7WiTM=\n=3r1k\n-----END PGP SIGNATURE-----\n",
      "payload": "tree 0f3ad8c0c2824b7334066e632a1aba765baecd0f\nparent a10c36994b80c6451af458c0faa998190a66e301\nauthor Dan Ungureanu <dan@ungureanu.me> 1586793472 +0300\ncommitter GitHub <noreply@github.com> 1586793472 +0300\n\nFIX: Include subcategories in 'posts' report (#9410)\n\n"
    }
  },
  "url": "https://api.github.com/repos/discourse/discourse/commits/799ddeea3c328658a596baab22233444f1e9e915",
  "html_url": "https://github.com/discourse/discourse/commit/799ddeea3c328658a596baab22233444f1e9e915",
  "comments_url": "https://api.github.com/repos/discourse/discourse/commits/799ddeea3c328658a596baab22233444f1e9e915/comments",
  "author": {
    "login": "udan11",
    "id": 4147664,
    "node_id": "MDQ6VXNlcjQxNDc2NjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4147664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/udan11",
    "html_url": "https://github.com/udan11",
    "followers_url": "https://api.github.com/users/udan11/followers",
    "following_url": "https://api.github.com/users/udan11/following{/other_user}",
    "gists_url": "https://api.github.com/users/udan11/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/udan11/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/udan11/subscriptions",
    "organizations_url": "https://api.github.com/users/udan11/orgs",
    "repos_url": "https://api.github.com/users/udan11/repos",
    "events_url": "https://api.github.com/users/udan11/events{/privacy}",
    "received_events_url": "https://api.github.com/users/udan11/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "web-flow",
    "id": 19864447,
    "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/web-flow",
    "html_url": "https://github.com/web-flow",
    "followers_url": "https://api.github.com/users/web-flow/followers",
    "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
    "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
    "organizations_url": "https://api.github.com/users/web-flow/orgs",
    "repos_url": "https://api.github.com/users/web-flow/repos",
    "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/web-flow/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a10c36994b80c6451af458c0faa998190a66e301",
      "url": "https://api.github.com/repos/discourse/discourse/commits/a10c36994b80c6451af458c0faa998190a66e301",
      "html_url": "https://github.com/discourse/discourse/commit/a10c36994b80c6451af458c0faa998190a66e301"
    }
  ],
  "stats": {
    "total": 2,
    "additions": 1,
    "deletions": 1
  },
  "files": [
    {
      "sha": "1fe1bed98507d299f266a033a17c2668997fda58",
      "filename": "app/models/post.rb",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/discourse/discourse/blob/799ddeea3c328658a596baab22233444f1e9e915/app/models/post.rb",
      "raw_url": "https://github.com/discourse/discourse/raw/799ddeea3c328658a596baab22233444f1e9e915/app/models/post.rb",
      "contents_url": "https://api.github.com/repos/discourse/discourse/contents/app/models/post.rb?ref=799ddeea3c328658a596baab22233444f1e9e915",
      "patch": "@@ -767,7 +767,7 @@ def trigger_post_process(bypass_bump: false, priority: :normal, new_post: false)\n   def self.public_posts_count_per_day(start_date, end_date, category_id = nil)\n     result = public_posts.where('posts.created_at >= ? AND posts.created_at <= ?', start_date, end_date)\n       .where(post_type: Post.types[:regular])\n-    result = result.where('topics.category_id = ?', category_id) if category_id\n+    result = result.where('topics.category_id IN (?)', Category.subcategory_ids(category_id.to_i)) if category_id\n     result\n       .group('date(posts.created_at)')\n       .order('date(posts.created_at)')"
    }
  ]
}
